	<PG title="Text Graphics" name="textGraphics">		<SCR name="getPageID"><![CDATA[pageIcon = icon.parentNode.clip();if (rootIcon.projMode == "dev"){   // Page Wizard  pageIcon.templateData = pageIcon.extXML.toObject();  pageIcon.templateData = pageIcon.templateData.pageWizard[0];} else {  // Toolkits  myXML = new XML(extXML.firstChild.childNodes[rootIcon.getPageIndex() - pgOffset]);  pageIcon.templateData = myXML.toObject();}  rootIcon.setTitleText(templateData.learningObject[0].name);  // handle multiple page data definitions in a project if (rootIcon.projectPageIndex == undefined){     rootIcon.projectPageIndex = 0;}// check if this page has a definition for the current project index and default to 0 if notif (pageIcon.templateData.textGraphics[rootIcon.projectPageIndex].name == undefined){  projPI = 0;} else {  projPI = rootIcon.projectPageIndex; }  if (pageIcon.templateData.textGraphics[projPI].url.indexOf('http') == 0){  url = "'" + pageIcon.templateData.textGraphics[projPI].url + "'";} else {  url = pageIcon.templateData.textGraphics[projPI].url}if (pageIcon.templateData.textGraphics[projPI].narration != undefined){  narration = pageIcon.templateData.textGraphics[projPI].narration;  rootIcon.broadcast('showAudio');}]]></SCR>		<DIS tabIndex="-1" id="panel" name="panel" x="-300" y="20" type="ext" url="templatePath + 'common/whitePanel.swf'"><![CDATA[]]></DIS>		<INT name="loadPanel" perpetual="0">			<RES name="onLoad" type="event" eventName="onLoad" icon="panel" erase="1" exit="1">				<SCR name="exit"><![CDATA[//ok to move onif (pageIcon.templateData.textGraphics[projPI].hidePanel == 'true' && pageIcon.templateData.textGraphics[projPI].transcript == undefined){  panel._alpha = 0;}]]></SCR>			</RES>		</INT>		<DIS toolTip="{pageIcon.templateData.textGraphics[projPI].tip}" scrolling="auto" id="graphic" name="graphic" x="coded" y="30" type="ext" url="{url}"><![CDATA[{pageIcon.templateData.textGraphics[projPI].tip}]]></DIS>		<INT name="loadImage" perpetual="0">			<RES name="onLoad" type="event" eventName="onLoad" icon="graphic" erase="1" exit="1">				<SCR name="calculate"><![CDATA[align = pageIcon.templateData.textGraphics[projPI].align;p = graphic._width / graphic._height;if (align == "Top" || align == 'Bottom'){  maxWidth = 740;  maxHeight = 250;} else {  //left or right, so fit to width  maxWidth = 465;  maxHeight = 465;//if a transcript option added reduce max height so it fits under a tall image if (pageIcon.templateData.textGraphics[projPI].transcript != undefined){  maxHeight = 365;}}if (pageIcon.templateData.textGraphics[projPI].imagesize == 'full screen'){  maxWidth = 760;  maxHeight = 464;}if (pageIcon.templateData.textGraphics[projPI].imagesize != 'actual size'){  graphic.constrain(maxWidth, maxHeight);}//resize the panel to the graphicpanel._width = graphic._width + 20;panel._height = graphic._height + 20;if (align == 'Left'){  panel._x = stageWidth - panel._width - 20;  graphic._x = panel._x + 10;  textX = 20;  textY = 20;  textWidth = stageWidth - 80 - graphic._width;} if (align == 'Right'){  panel._x = 20;  graphic._x = 30;  textX = graphic._width + 60;  textY = 20;  textWidth = stageWidth - 80 - graphic._width;}if (align == 'Bottom'){  panel._x = 20;  graphic._x = 30;  textWidth = panel._width;  textX = panel._x;  textY = panel._y + panel._height + 20;}if (align == 'Top'){  panel._x = 20;  graphic._x = 30;  textWidth = panel._width;  textX = panel._x;  textY = panel._y + panel._height + 20;}if (pageIcon.templateData.textGraphics[projPI].imagesize == 'full screen'){  panel._x = 400 - panel._width / 2;  graphic._x = panel._x + 10;  textWidth = 0;  hidetranscript=true;}else{  hidetranscript=false;}//hide transcript if no space to display itif (panel._height>450){  hidetranscript=true;}]]></SCR>			</RES>		</INT>		<SCR name="sound"><![CDATA[if (pageIcon.templateData.textGraphics[projPI].sound != undefined){  //check for a literal path  sndURL = pageIcon.templateData.textGraphics[projPI].sound;  if (sndURL.indexOf('http') == 0){    sndURL = "'" + sndURL + "'";  }  icon.nextSibling.attributes.controls = graphic._x +',' + (graphic._y + graphic._height - 20) + ',' + graphic._width;} else {  if (icon.nextSibling.nodeName == 'SND'){    icon.nextSibling.removeNode();  }}]]></SCR>		<SND name="sound" type="ext" url="{sndURL}" play="0" loop="0" wait="0" />		<DIS scrolling="auto" id="textBlock" h="480" name="text" x="textX" y="textY" w="textWidth" type="text"><![CDATA[{pageIcon.templateData.textGraphics[projPI]}]]></DIS>		<SCR name="layout"><![CDATA[if (align == 'Top'){  textBlock._y = 20;  panel._y = textBlock._y + textBlock._height + 20;  graphic._y = panel._y + 10;}if (pageIcon.templateData.textGraphics[projPI].magnifier != "true" && icon.built != 'true'){  icon.nextSibling.removeNode();  icon.built = 'true';}]]></SCR>		<INT name="zoomControls" perpetual="1">			<RES name="onRollOver" type="event" eventName="onRollOver" icon="graphic" erase="1" exit="0">				<DIS h="graphic._height *4" w="graphic._width * 4" id="zoom" name="zoom" x="graphic._x" y="graphic._y" type="ext" url="{pageIcon.templateData.textGraphics[projPI].url}"><![CDATA[]]></DIS>				<DIS id="mask" name="mask" x="-100" y="-100" type="ext" url="FileLocation + "><![CDATA[]]></DIS>				<DIS id="frame" name="frame" x="-100" y="-100" type="ext" url="FileLocation + "><![CDATA[]]></DIS>				<SCR name="setup"><![CDATA[mask.beginFill(0xFF0000,100);mask.drawOval(0,0,60,60);zoom.setMask(mask);frame.lineStyle(2, 0x000000,100);frame.drawOval(0,0,60,60);mainMask.beginFill(0xFF0000,100);mainMask.drawRect(0,0,graphic._width, graphic._height);Mouse.hide();]]></SCR>				<INT name="onMouseMove" perpetual="0">					<RES name="onMouseMove" type="event" eventName="onMouseMove" icon="zoom" erase="1" exit="0">						<SCR name="moveThings"><![CDATA[mask._x = rootIcon._xmouse;mask._y = rootIcon._ymouse - 60;frame._x = rootIcon._xmouse;frame._y = rootIcon._ymouse - 60;zoom._x = graphic._x - 3*(rootIcon._xmouse - graphic._x);zoom._y = graphic._y - 3*(rootIcon._ymouse - graphic._y) + 180;]]></SCR>					</RES>				</INT>			</RES>			<RES name="onRollOut" type="event" eventName="onRollOut" icon="graphic" erase="1" exit="0">				<SCR name="exit"><![CDATA[Mouse.show();]]></SCR>			</RES>		</INT>		<SCR name="setupTranscript"><![CDATA[if (pageIcon.templateData.textGraphics[projPI].transcript == undefined){  icon.nextSibling.removeNode();}if (pageIcon.templateData.textGraphics[projPI].transcriptbuttonlabel != undefined){  showtranscriptlabel=pageIcon.templateData.textGraphics[projPI].transcriptbuttonlabel;} else {  showtranscriptlabel='transcript';}if (hidetranscript == true){  icon.nextSibling.removeNode();}]]></SCR>		<INT id="trans" name="transcript" perpetual="1">			<RES w="90" swf="templatePath + 'common/invertTab.swf'" rs="btnTrans" name="showTranscript" type="button" x="panel._x + panel._width - 100" y="panel._y + panel._height" label="{showtranscriptlabel}" erase="1" exit="0">				<SCR name="tween"><![CDATA[if (transShow != true){  panel.tween("_height", panel._height, 464,0.2,'Strong', 'easeIn');  btnTrans.tween("_y", btnTrans._y, 484,0.2,'Strong', 'easeIn');  transShow = true;} else {  panel.tween("_height", panel._height, graphic._height + 30,0.2,'Strong', 'easeIn');  btnTrans.tween("_y", btnTrans._y, graphic._y + graphic._height + 20,0.2,'Strong', 'easeIn');  transShow = false;}]]></SCR>			</RES>			<RES name="onMotionFinished" type="event" eventName="onMotionFinished" icon="panel" erase="1" exit="0">				<SCR name="broadcast"><![CDATA[if (transShow == true){  trans.broadcast("showTranscript");}]]></SCR>			</RES>			<RES name="showTranscript" type="event" eventName="showTranscript" icon="trans" erase="1" exit="0">				<DIS textColour="#333333" scrolling="auto" name="transcript" x="graphic._x" y="graphic._y + graphic._height" w="graphic._width" h="panel._height - graphic._height - 20" type="text"><![CDATA[{pageIcon.templateData.textGraphics[projPI].transcript}]]></DIS>			</RES>		</INT>	</PG>