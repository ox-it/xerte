	<PG title="Text SWF" name="textSWF">		<SCR name="getPageID"><![CDATA[pageIcon = icon.parentNode.clip();if (rootIcon.projMode == "dev"){   // Page Wizard  pageIcon.templateData = pageIcon.extXML.toObject();  pageIcon.templateData = pageIcon.templateData.pageWizard[0];} else {  // Toolkits  myXML = new XML(extXML.firstChild.childNodes[rootIcon.getPageIndex() - pgOffset]);  pageIcon.templateData = myXML.toObject();}  rootIcon.setTitleText(templateData.learningObject[0].name);  // handle multiple page data definitions in a project if (rootIcon.projectPageIndex == undefined){     rootIcon.projectPageIndex = 0;}// check if this page has a definition for the current project index and default to 0 if notif (pageIcon.templateData.textSWF[rootIcon.projectPageIndex].name == undefined){  projPI = 0;} else {  projPI = rootIcon.projectPageIndex; }  //control bar?if (pageIcon.templateData.textSWF[projPI].controls != undefined && pageIcon.templateData.textSWF[projPI].controls != 'Control Bar'){  icon.nextSibling.nextSibling.nextSibling.attributes.controls = 0;  vSpace = 20;} else {  vSpace = 40;}if (pageIcon.templateData.textSWF[projPI].narration != undefined){  narration = pageIcon.templateData.textSWF[projPI].narration;  rootIcon.broadcast('showAudio');}]]></SCR>		<DIS tabIndex="-1" id="panel" name="panel" x="-300" y="20" type="ext" url="templatePath + 'common/whitePanel.swf'"><![CDATA[]]></DIS>		<INT name="loadPanel" perpetual="0">			<RES name="onLoad" type="event" eventName="onLoad" icon="panel" erase="1" exit="1">				<SCR name="calculate"><![CDATA[//ok to move on]]></SCR>			</RES>		</INT>		<DIS autoPlay="0" controls="1" toolTip="{pageIcon.templateData.textSWF[projPI].tip}" id="graphic" name="graphic" x="coded" y="30" type="ext" url="{pageIcon.templateData.textSWF[projPI].url}"><![CDATA[{pageIcon.templateData.textSWF[projPI].tip}]]></DIS>		<DIS id="mask" name="mask" x="0" y="0" w="400" h="10" type="text"><![CDATA[]]></DIS>		<INT name="loadSWF" perpetual="0">			<RES name="onLoad" type="event" eventName="onLoad" icon="graphic" erase="1" exit="1">				<SCR name="calculate"><![CDATA[//resize it if need be...if (pageIcon.templateData.textSWF[projPI].movieSize != undefined){  graphic._width = pageIcon.templateData.textSWF[projPI].movieSize.split(',')[0];  graphic._height = pageIcon.templateData.textSWF[projPI].movieSize.split(',')[1];}//initialise the swf before we do anything else...if (pageIcon.templateData.textSWF[projPI].initObject != undefined){  obj = expression(pageIcon.templateData.textSWF[projPI].initObject, engine);  graphic.clip.init(obj);}//resize the panel to the graphicpanel._width = graphic._width + 20;panel._height = graphic._height + vSpace;if (pageIcon.templateData.textSWF[projPI].align == 'Left'){  panel._x = stageWidth - panel._width - 20;  graphic._x = panel._x + 10;  textX = 20;} else {  panel._x = 20;  graphic._x = 30;  textX = panel._width + 40;}textWidth = stageWidth - 60 - panel._width;/* Commenting out this section kills wink videos */mask._x = graphic._x;mask._y = graphic._y;mask.beginFill(0xFF0000,100);mask.drawRect(0,0,graphic._width, graphic._height + 21);graphic.setMask(mask);//kil xerte events?if (pageIcon.templateData.textSWF[projPI].controls == 'Native SWF'){  graphic.onRollOver = null;  delete graphic.onRollOver;  graphic.onRollOut = null;  delete graphic.onRollOut;  graphic.onSetFocus = null;  delete graphic.onSetFocus;}/* end of section commented out in svn  */]]></SCR>			</RES>		</INT>		<DIS id="textBlock" scrolling="auto" name="text" x="textX" y="20" w="textWidth" h="480" type="text"><![CDATA[{pageIcon.templateData.textSWF[projPI]}]]></DIS>	</PG>