	<PG title="QR Code" name="QRCodes">		<SCR name="getPageID"><![CDATA[pageIcon = icon.parentNode.clip();if (rootIcon.projMode == "dev"){   // Page Wizard  pageIcon.templateData = pageIcon.extXML.toObject();  pageIcon.templateData = pageIcon.templateData.pageWizard[0];} else {  // Toolkits  myXML = new XML(extXML.firstChild.childNodes[rootIcon.getPageIndex() - pgOffset]);  pageIcon.templateData = myXML.toObject();}  rootIcon.setTitleText(templateData.learningObject[0].name);  // handle multiple page data definitions in a project if (rootIcon.projectPageIndex == undefined){     rootIcon.projectPageIndex = 0;}// check if this page has a definition for the current project index and default to 0 if notif (pageIcon.templateData.QRcode[rootIcon.projectPageIndex].name == undefined){  projPI = 0;} else {  projPI = rootIcon.projectPageIndex; }   if (pageIcon.templateData.QRcode[projPI].narration != undefined){  narration = pageIcon.templateData.QRcode[projPI].narration;  rootIcon.broadcast('showAudio');}]]></SCR>		<DIS h="490" w="770" tabIndex="-1" id="panel" name="panel" x="15" y="15" type="ext" url="templatePath + 'common/whitePanel.swf'"><![CDATA[]]></DIS>		<INT name="loadPanel" perpetual="0">			<RES name="onLoad" type="event" eventName="onLoad" icon="panel" erase="1" exit="1">				<SCR name="exit"><![CDATA[align = pageIcon.templateData.QRcode[projPI].align;if (align == 'Left'){panel._width = 440;panel._height = 474;panel._x = stageWidth - panel._width - 20;} if (align == 'Right'){panel._width = 440;panel._height = 474;panel._x = 20;}]]></SCR>			</RES>		</INT>		<DIS id="myurl" name="myurl" x="0" y="0" w="400" h="10" type="text"><![CDATA[]]></DIS>		<SCR name="loadthetext"><![CDATA[pastedurl=pageIcon.templateData.QRcode[projPI].url;if (templatePath.indexOf('modules/xerte') == -1){  myurl.readFile("http://is.gd/api.php?longurl="+pastedurl);} else {  myurl.readFile(_level0.site_url + 'rss_proxy.php?rss=' + "http://is.gd/api.php?longurl="+pastedurl);}]]></SCR>		<INT name="loadurl" perpetual="0">			<RES name="onLoad" type="event" eventName="onReadFile" icon="myurl" erase="1" exit="1">				<SCR name="exit"><![CDATA[//ok to move on]]></SCR>			</RES>		</INT>		<SCR name="getqrcode"><![CDATA[if (templatePath.indexOf('modules/xerte') == -1){  mytext='<a href="'+myurl.fileData+'">'+myurl.fileData+'</a>';  qrcodelink=myurl.fileData;  qrcodelink="http://splashurl.net/qr.png?q="+qrcodelink;} else {  mytext='<a href="'+myurl.fileData+'">'+myurl.fileData+'</a>';  qrcodelink=myurl.fileData;  qrcodelink="http://splashurl.net/qr.png?q="+qrcodelink;}]]></SCR>		<DIS h="500" w="500" toolTip="{pageIcon.templateData.QRcode[projPI].tip}" scrolling="auto" id="graphic" name="graphic" x="200" y="70" type="ext" url="qrcodelink"><![CDATA[{pageIcon.templateData.QRcode[projPI].tip}]]></DIS>		<INT name="loadImage" perpetual="0">			<RES name="onLoad" type="event" eventName="onLoad" icon="graphic" erase="1" exit="1">				<SCR name="calculate"><![CDATA[align = pageIcon.templateData.QRcode[projPI].align; p = graphic._width / graphic._height;  maxWidth = 410;//was 465  maxHeight = 410;  graphic.constrain(maxWidth, maxHeight);   if (align == 'Hide text' | align==undefined){  urlX=210;  urlY=20;  textX = 20;  textY = 20;textWidth = 0;}if (align == 'Left'){panel._width = graphic._width + 20;panel._height = 474;  panel._x = stageWidth - panel._width - 20;  graphic._x = 360;  urlX=370;  urlY=20;  textX = 20;  textY = 20;  textWidth = stageWidth - 80 - graphic._width;} if (align == 'Right'){panel._width = graphic._width + 20;panel._height = 474;  panel._x = 20;  graphic._x = 30;  urlX=30;  urlY=20;  textX = graphic._width + 60;  textY = 20;  textWidth = stageWidth - 80 - graphic._width;}]]></SCR>			</RES>		</INT>		<SCR name="sound"><![CDATA[if (pageIcon.templateData.QRcode[projPI].sound != undefined){  //check for a literal path  sndURL = pageIcon.templateData.QRcode[projPI].sound;  if (sndURL.indexOf('http') == 0){    sndURL = "'" + sndURL + "'";  }  icon.nextSibling.attributes.controls = panel._x +',' + (panel._y+panel._height - 20) + ',' + panel._width;} else {  if (icon.nextSibling.nodeName == 'SND'){    icon.nextSibling.removeNode();  }}]]></SCR>		<SND name="sound" type="ext" url="{sndURL}" play="0" loop="0" wait="0" />		<DIS scrolling="auto" id="textBlock1" h="450" name="text" x="textX" y="textY" w="textWidth" type="text"><![CDATA[{pageIcon.templateData.QRcode[projPI]}]]></DIS>		<DIS w="600" textSize="36pt" scrolling="auto" id="textBlock" h="410" name="showurl" x="urlX" y="urlY" type="text"><![CDATA[{mytext}]]></DIS>	</PG>