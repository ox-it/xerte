(function(a){if(typeof exports=="object"&&typeof module=="object"){module.exports=a()}else{if(typeof define=="function"&&define.amd){return define([],a)}else{this.CodeMirror=a()}}})(function(){var co=/gecko\/\d/i.test(navigator.userAgent);var ez=/MSIE \d/.test(navigator.userAgent);var bI=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);var dA=ez||bI;var l=dA&&(ez?document.documentMode||6:bI[1]);var cV=/WebKit\//.test(navigator.userAgent);var dC=cV&&/Qt\/\d+\.\d+/.test(navigator.userAgent);var c7=/Chrome\//.test(navigator.userAgent);var dR=/Opera\//.test(navigator.userAgent);var aC=/Apple Computer/.test(navigator.vendor);var a8=/KHTML\//.test(navigator.userAgent);var c2=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent);var fj=/PhantomJS/.test(navigator.userAgent);var eQ=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);var d4=eQ||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent);var b6=eQ||/Mac/.test(navigator.platform);var aN=/win/i.test(navigator.platform);var aV=dR&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);if(aV){aV=Number(aV[1])}if(aV&&aV>=15){dR=false;cV=true}var bP=b6&&(dC||dR&&(aV==null||aV<12.11));var fT=co||(dA&&l>=9);var fW=false,a4=false;function J(f3,f4){if(!(this instanceof J)){return new J(f3,f4)}this.options=f4=f4||{};aL(eS,f4,false);cd(f4);var f6=f4.value;if(typeof f6=="string"){f6=new at(f6,f4.mode)}this.doc=f6;var f5=this.display=new ex(f3,f6);f5.wrapper.CodeMirror=this;d0(this);cL(this);if(f4.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}if(f4.autofocus&&!d4){eo(this)}this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,draggingText:false,highlight:new f1()};if(dA&&l<11){setTimeout(cu(fd,this,true),20)}fE(this);bf();var f2=this;cJ(this,function(){f2.curOp.forceUpdate=true;dZ(f2,f6);if((f4.autofocus&&!d4)||dD()==f5.input){setTimeout(cu(cz,f2),20)}else{aS(f2)}for(var f8 in bb){if(bb.hasOwnProperty(f8)){bb[f8](f2,f4[f8],cb)}}dU(f2);for(var f7=0;f7<a5.length;++f7){a5[f7](f2)}})}function ex(f2,f4){var f5=this;var f3=f5.input=fL("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");if(cV){f3.style.width="1000px"}else{f3.setAttribute("wrap","off")}if(eQ){f3.style.border="1px solid black"}f3.setAttribute("autocorrect","off");f3.setAttribute("autocapitalize","off");f3.setAttribute("spellcheck","false");f5.inputDiv=fL("div",[f3],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");f5.scrollbarH=fL("div",[fL("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");f5.scrollbarV=fL("div",[fL("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");f5.scrollbarFiller=fL("div",null,"CodeMirror-scrollbar-filler");f5.gutterFiller=fL("div",null,"CodeMirror-gutter-filler");f5.lineDiv=fL("div",null,"CodeMirror-code");f5.selectionDiv=fL("div",null,null,"position: relative; z-index: 1");f5.cursorDiv=fL("div",null,"CodeMirror-cursors");f5.measure=fL("div",null,"CodeMirror-measure");f5.lineMeasure=fL("div",null,"CodeMirror-measure");f5.lineSpace=fL("div",[f5.measure,f5.lineMeasure,f5.selectionDiv,f5.cursorDiv,f5.lineDiv],null,"position: relative; outline: none");f5.mover=fL("div",[fL("div",[f5.lineSpace],"CodeMirror-lines")],null,"position: relative");f5.sizer=fL("div",[f5.mover],"CodeMirror-sizer");f5.heightForcer=fL("div",null,null,"position: absolute; height: "+bh+"px; width: 1px;");f5.gutters=fL("div",null,"CodeMirror-gutters");f5.lineGutter=null;f5.scroller=fL("div",[f5.sizer,f5.heightForcer,f5.gutters],"CodeMirror-scroll");f5.scroller.setAttribute("tabIndex","-1");f5.wrapper=fL("div",[f5.inputDiv,f5.scrollbarH,f5.scrollbarV,f5.scrollbarFiller,f5.gutterFiller,f5.scroller],"CodeMirror");if(dA&&l<8){f5.gutters.style.zIndex=-1;f5.scroller.style.paddingRight=0}if(eQ){f3.style.width="0px"}if(!cV){f5.scroller.draggable=true}if(a8){f5.inputDiv.style.height="1px";f5.inputDiv.style.position="absolute"}if(dA&&l<8){f5.scrollbarH.style.minHeight=f5.scrollbarV.style.minWidth="18px"}if(f2.appendChild){f2.appendChild(f5.wrapper)}else{f2(f5.wrapper)}f5.viewFrom=f5.viewTo=f4.first;f5.view=[];f5.externalMeasured=null;f5.viewOffset=0;f5.lastSizeC=0;f5.updateLineNumbers=null;f5.lineNumWidth=f5.lineNumInnerWidth=f5.lineNumChars=null;f5.prevInput="";f5.alignWidgets=false;f5.pollingFast=false;f5.poll=new f1();f5.cachedCharWidth=f5.cachedTextHeight=f5.cachedPaddingH=null;f5.inaccurateSelection=false;f5.maxLine=null;f5.maxLineLength=0;f5.maxLineChanged=false;f5.wheelDX=f5.wheelDY=f5.wheelStartX=f5.wheelStartY=null;f5.shift=false;f5.selForContextMenu=null}function bq(f2){f2.doc.mode=J.getMode(f2.options,f2.doc.modeOption);d9(f2)}function d9(f2){f2.doc.iter(function(f3){if(f3.stateAfter){f3.stateAfter=null}if(f3.styles){f3.styles=null}});f2.doc.frontier=f2.doc.first;d3(f2,100);f2.state.modeGen++;if(f2.curOp){ag(f2)}}function ev(f2){if(f2.options.lineWrapping){fp(f2.display.wrapper,"CodeMirror-wrap");f2.display.sizer.style.minWidth=""}else{f(f2.display.wrapper,"CodeMirror-wrap");g(f2)}Y(f2);ag(f2);aj(f2);setTimeout(function(){eN(f2)},100)}function ba(f2){var f4=aU(f2.display),f3=f2.options.lineWrapping;var f5=f3&&Math.max(5,f2.display.scroller.clientWidth/du(f2.display)-3);return function(f7){if(fl(f2.doc,f7)){return 0}var f6=0;if(f7.widgets){for(var f8=0;f8<f7.widgets.length;f8++){if(f7.widgets[f8].height){f6+=f7.widgets[f8].height}}}if(f3){return f6+(Math.ceil(f7.text.length/f5)||1)*f4}else{return f6+f4}}}function Y(f2){var f4=f2.doc,f3=ba(f2);f4.iter(function(f5){var f6=f3(f5);if(f6!=f5.height){fP(f5,f6)}})}function fZ(f2){var f4=eY[f2.options.keyMap],f3=f4.style;f2.display.wrapper.className=f2.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(f3?" cm-keymap-"+f3:"")}function cL(f2){f2.display.wrapper.className=f2.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+f2.options.theme.replace(/(^|\s)\s*/g," cm-s-");aj(f2)}function dm(f2){d0(f2);ag(f2);setTimeout(function(){et(f2)},20)}function d0(f2){var f3=f2.display.gutters,f7=f2.options.gutters;dQ(f3);for(var f4=0;f4<f7.length;++f4){var f5=f7[f4];var f6=f3.appendChild(fL("div",null,"CodeMirror-gutter "+f5));if(f5=="CodeMirror-linenumbers"){f2.display.lineGutter=f6;f6.style.width=(f2.display.lineNumWidth||1)+"px"}}f3.style.display=f4?"":"none";cZ(f2)}function cZ(f2){var f3=f2.display.gutters.offsetWidth;f2.display.sizer.style.marginLeft=f3+"px";f2.display.scrollbarH.style.left=f2.options.fixedGutter?f3+"px":0}function ea(f4){if(f4.height==0){return 0}var f3=f4.text.length,f2,f6=f4;while(f2=eD(f6)){var f5=f2.find(0,true);f6=f5.from.line;f3+=f5.from.ch-f5.to.ch}f6=f4;while(f2=ej(f6)){var f5=f2.find(0,true);f3-=f6.text.length-f5.from.ch;f6=f5.to.line;f3+=f6.text.length-f5.to.ch}return f3}function g(f2){var f4=f2.display,f3=f2.doc;f4.maxLine=e3(f3,f3.first);f4.maxLineLength=ea(f4.maxLine);f4.maxLineChanged=true;f3.iter(function(f6){var f5=ea(f6);if(f5>f4.maxLineLength){f4.maxLineLength=f5;f4.maxLine=f6}})}function cd(f2){var f3=dc(f2.gutters,"CodeMirror-linenumbers");if(f3==-1&&f2.lineNumbers){f2.gutters=f2.gutters.concat(["CodeMirror-linenumbers"])}else{if(f3>-1&&!f2.lineNumbers){f2.gutters=f2.gutters.slice(0);f2.gutters.splice(f3,1)}}}function cN(f2){return f2.display.scroller.clientHeight-f2.display.wrapper.clientHeight<bh-3}function dr(f3){var f2=f3.display.scroller;return{clientHeight:f2.clientHeight,barHeight:f3.display.scrollbarV.clientHeight,scrollWidth:f2.scrollWidth,clientWidth:f2.clientWidth,hScrollbarTakesSpace:cN(f3),barWidth:f3.display.scrollbarH.clientWidth,docHeight:Math.round(f3.doc.height+bH(f3.display))}}function eN(f9,f2){if(!f2){f2=dr(f9)}var f6=f9.display,f3=k(f6.measure);var ga=f2.docHeight+bh;var f4=f2.scrollWidth>f2.clientWidth;if(f4&&f2.scrollWidth<=f2.clientWidth+1&&f3>0&&!f2.hScrollbarTakesSpace){f4=false}var f5=ga>f2.clientHeight;if(f5){f6.scrollbarV.style.display="block";f6.scrollbarV.style.bottom=f4?f3+"px":"0";f6.scrollbarV.firstChild.style.height=Math.max(0,ga-f2.clientHeight+(f2.barHeight||f6.scrollbarV.clientHeight))+"px"}else{f6.scrollbarV.style.display="";f6.scrollbarV.firstChild.style.height="0"}if(f4){f6.scrollbarH.style.display="block";f6.scrollbarH.style.right=f5?f3+"px":"0";f6.scrollbarH.firstChild.style.width=(f2.scrollWidth-f2.clientWidth+(f2.barWidth||f6.scrollbarH.clientWidth))+"px"}else{f6.scrollbarH.style.display="";f6.scrollbarH.firstChild.style.width="0"}if(f4&&f5){f6.scrollbarFiller.style.display="block";f6.scrollbarFiller.style.height=f6.scrollbarFiller.style.width=f3+"px"}else{f6.scrollbarFiller.style.display=""}if(f4&&f9.options.coverGutterNextToScrollbar&&f9.options.fixedGutter){f6.gutterFiller.style.display="block";f6.gutterFiller.style.height=f3+"px";f6.gutterFiller.style.width=f6.gutters.offsetWidth+"px"}else{f6.gutterFiller.style.display=""}if(!f9.state.checkedOverlayScrollbar&&f2.clientHeight>0){if(f3===0){var f8=b6&&!c2?"12px":"18px";f6.scrollbarV.style.minWidth=f6.scrollbarH.style.minHeight=f8;var f7=function(gb){if(M(gb)!=f6.scrollbarV&&M(gb)!=f6.scrollbarH){cX(f9,eh)(gb)}};bW(f6.scrollbarV,"mousedown",f7);bW(f6.scrollbarH,"mousedown",f7)}f9.state.checkedOverlayScrollbar=true}}function b5(f5,f9,f4){var f6=f4&&f4.top!=null?Math.max(0,f4.top):f5.scroller.scrollTop;f6=Math.floor(f6-eW(f5));var f2=f4&&f4.bottom!=null?f4.bottom:f6+f5.wrapper.clientHeight;var f7=bF(f9,f6),f8=bF(f9,f2);if(f4&&f4.ensure){var f3=f4.ensure.from.line,ga=f4.ensure.to.line;if(f3<f7){return{from:f3,to:bF(f9,bL(e3(f9,f3))+f5.wrapper.clientHeight)}}if(Math.min(ga,f9.lastLine())>=f8){return{from:bF(f9,bL(e3(f9,ga))-f5.wrapper.clientHeight),to:ga}}}return{from:f7,to:Math.max(f8,f7+1)}}function et(ga){var f8=ga.display,f9=f8.view;if(!f8.alignWidgets&&(!f8.gutters.firstChild||!ga.options.fixedGutter)){return}var f6=dM(f8)-f8.scroller.scrollLeft+ga.doc.scrollLeft;var f2=f8.gutters.offsetWidth,f3=f6+"px";for(var f5=0;f5<f9.length;f5++){if(!f9[f5].hidden){if(ga.options.fixedGutter&&f9[f5].gutter){f9[f5].gutter.style.left=f3}var f7=f9[f5].alignable;if(f7){for(var f4=0;f4<f7.length;f4++){f7[f4].style.left=f3}}}}if(ga.options.fixedGutter){f8.gutters.style.left=(f6+f2)+"px"}}function dU(f2){if(!f2.options.lineNumbers){return false}var f7=f2.doc,f3=eg(f2.options,f7.first+f7.size-1),f6=f2.display;if(f3.length!=f6.lineNumChars){var f8=f6.measure.appendChild(fL("div",[fL("div",f3)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var f4=f8.firstChild.offsetWidth,f5=f8.offsetWidth-f4;f6.lineGutter.style.width="";f6.lineNumInnerWidth=Math.max(f4,f6.lineGutter.offsetWidth-f5);f6.lineNumWidth=f6.lineNumInnerWidth+f5;f6.lineNumChars=f6.lineNumInnerWidth?f3.length:-1;f6.lineGutter.style.width=f6.lineNumWidth+"px";cZ(f2);return true}return false}function eg(f2,f3){return String(f2.lineNumberFormatter(f3+f2.firstLineNumber))}function dM(f2){return f2.scroller.getBoundingClientRect().left-f2.sizer.getBoundingClientRect().left}function aH(f3,f2,f4){var f5=f3.display;this.viewport=f2;this.visible=b5(f5,f3.doc,f2);this.editorIsHidden=!f5.wrapper.offsetWidth;this.wrapperHeight=f5.wrapper.clientHeight;this.oldViewFrom=f5.viewFrom;this.oldViewTo=f5.viewTo;this.oldScrollerWidth=f5.scroller.clientWidth;this.force=f4;this.dims=e1(f3)}function D(gb,f5){var f6=gb.display,ga=gb.doc;if(f5.editorIsHidden){el(gb);return false}if(!f5.force&&f5.visible.from>=f6.viewFrom&&f5.visible.to<=f6.viewTo&&(f6.updateLineNumbers==null||f6.updateLineNumbers>=f6.viewTo)&&c6(gb)==0){return false}if(dU(gb)){el(gb);f5.dims=e1(gb)}var f4=ga.first+ga.size;var f8=Math.max(f5.visible.from-gb.options.viewportMargin,ga.first);var f9=Math.min(f4,f5.visible.to+gb.options.viewportMargin);if(f6.viewFrom<f8&&f8-f6.viewFrom<20){f8=Math.max(ga.first,f6.viewFrom)}if(f6.viewTo>f9&&f6.viewTo-f9<20){f9=Math.min(f4,f6.viewTo)}if(a4){f8=aT(gb.doc,f8);f9=dS(gb.doc,f9)}var f3=f8!=f6.viewFrom||f9!=f6.viewTo||f6.lastSizeC!=f5.wrapperHeight;cO(gb,f8,f9);f6.viewOffset=bL(e3(gb.doc,f6.viewFrom));gb.display.mover.style.top=f6.viewOffset+"px";var f2=c6(gb);if(!f3&&f2==0&&!f5.force&&(f6.updateLineNumbers==null||f6.updateLineNumbers>=f6.viewTo)){return false}var f7=dD();if(f2>4){f6.lineDiv.style.display="none"}cm(gb,f6.updateLineNumbers,f5.dims);if(f2>4){f6.lineDiv.style.display=""}if(f7&&dD()!=f7&&f7.offsetHeight){f7.focus()}dQ(f6.cursorDiv);dQ(f6.selectionDiv);if(f3){f6.lastSizeC=f5.wrapperHeight;d3(gb,400)}f6.updateLineNumbers=null;return true}function cj(f3,f7){var f5=f7.force,f2=f7.viewport;for(var f6=true;;f6=false){if(f6&&f3.options.lineWrapping&&f7.oldScrollerWidth!=f3.display.scroller.clientWidth){f5=true}else{f5=false;if(f2&&f2.top!=null){f2={top:Math.min(f3.doc.height+bH(f3.display)-bh-f3.display.scroller.clientHeight,f2.top)}}f7.visible=b5(f3.display,f3.doc,f2);if(f7.visible.from>=f3.display.viewFrom&&f7.visible.to<=f3.display.viewTo){break}}if(!D(f3,f7)){break}a6(f3);var f4=dr(f3);bB(f3);dq(f3,f4);eN(f3,f4)}ad(f3,"update",f3);if(f3.display.viewFrom!=f7.oldViewFrom||f3.display.viewTo!=f7.oldViewTo){ad(f3,"viewportChange",f3,f3.display.viewFrom,f3.display.viewTo)}}function dI(f3,f2){var f5=new aH(f3,f2);if(D(f3,f5)){a6(f3);cj(f3,f5);var f4=dr(f3);bB(f3);dq(f3,f4);eN(f3,f4)}}function dq(f2,f3){f2.display.sizer.style.minHeight=f2.display.heightForcer.style.top=f3.docHeight+"px";f2.display.gutters.style.height=Math.max(f3.docHeight,f3.clientHeight-bh)+"px"}function fO(f2,f3){if(f2.display.sizer.offsetWidth+f2.display.gutters.offsetWidth<f2.display.scroller.clientWidth-1){f2.display.sizer.style.minHeight=f2.display.heightForcer.style.top="0px";f2.display.gutters.style.height=f3.docHeight+"px"}}function a6(f9){var f7=f9.display;var f3=f7.lineDiv.offsetTop;for(var f4=0;f4<f7.view.length;f4++){var ga=f7.view[f4],gb;if(ga.hidden){continue}if(dA&&l<8){var f6=ga.node.offsetTop+ga.node.offsetHeight;gb=f6-f3;f3=f6}else{var f5=ga.node.getBoundingClientRect();gb=f5.bottom-f5.top}var f8=ga.line.height-gb;if(gb<2){gb=aU(f7)}if(f8>0.001||f8<-0.001){fP(ga.line,gb);ca(ga.line);if(ga.rest){for(var f2=0;f2<ga.rest.length;f2++){ca(ga.rest[f2])}}}}}function ca(f2){if(f2.widgets){for(var f3=0;f3<f2.widgets.length;++f3){f2.widgets[f3].height=f2.widgets[f3].node.offsetHeight}}}function e1(f2){var f6=f2.display,f5={},f4={};for(var f7=f6.gutters.firstChild,f3=0;f7;f7=f7.nextSibling,++f3){f5[f2.options.gutters[f3]]=f7.offsetLeft;f4[f2.options.gutters[f3]]=f7.offsetWidth}return{fixedPos:dM(f6),gutterTotalWidth:f6.gutters.offsetWidth,gutterLeft:f5,gutterWidth:f4,wrapperWidth:f6.wrapper.clientWidth}}function cm(gd,f4,gc){var f9=gd.display,gf=gd.options.lineNumbers;var f2=f9.lineDiv,ge=f2.firstChild;function f8(gh){var gg=gh.nextSibling;if(cV&&b6&&gd.display.currentWheelTarget==gh){gh.style.display="none"}else{gh.parentNode.removeChild(gh)}return gg}var ga=f9.view,f7=f9.viewFrom;for(var f5=0;f5<ga.length;f5++){var f6=ga[f5];if(f6.hidden){}else{if(!f6.node){var f3=aE(gd,f6,f7,gc);f2.insertBefore(f3,ge)}else{while(ge!=f6.node){ge=f8(ge)}var gb=gf&&f4!=null&&f4<=f7&&f6.lineNumber;if(f6.changes){if(dc(f6.changes,"gutter")>-1){gb=false}aa(gd,f6,f7,gc)}if(gb){dQ(f6.lineNumber);f6.lineNumber.appendChild(document.createTextNode(eg(gd.options,f7)))}ge=f6.node.nextSibling}}f7+=f6.size}while(ge){ge=f8(ge)}}function aa(f2,f4,f6,f7){for(var f3=0;f3<f4.changes.length;f3++){var f5=f4.changes[f3];if(f5=="text"){e9(f2,f4)}else{if(f5=="gutter"){da(f2,f4,f6,f7)}else{if(f5=="class"){dx(f4)}else{if(f5=="widget"){an(f4,f7)}}}}}f4.changes=null}function fx(f2){if(f2.node==f2.text){f2.node=fL("div",null,null,"position: relative");if(f2.text.parentNode){f2.text.parentNode.replaceChild(f2.node,f2.text)}f2.node.appendChild(f2.text);if(dA&&l<8){f2.node.style.zIndex=2}}return f2.node}function ei(f3){var f2=f3.bgClass?f3.bgClass+" "+(f3.line.bgClass||""):f3.line.bgClass;if(f2){f2+=" CodeMirror-linebackground"}if(f3.background){if(f2){f3.background.className=f2}else{f3.background.parentNode.removeChild(f3.background);f3.background=null}}else{if(f2){var f4=fx(f3);f3.background=f4.insertBefore(fL("div",null,f2),f4.firstChild)}}}function dK(f2,f3){var f4=f2.display.externalMeasured;if(f4&&f4.line==f3.line){f2.display.externalMeasured=null;f3.measure=f4.measure;return f4.built}return eG(f2,f3)}function e9(f2,f5){var f3=f5.text.className;var f4=dK(f2,f5);if(f5.text==f5.node){f5.node=f4.pre}f5.text.parentNode.replaceChild(f4.pre,f5.text);f5.text=f4.pre;if(f4.bgClass!=f5.bgClass||f4.textClass!=f5.textClass){f5.bgClass=f4.bgClass;f5.textClass=f4.textClass;dx(f5)}else{if(f3){f5.text.className=f3}}}function dx(f3){ei(f3);if(f3.line.wrapClass){fx(f3).className=f3.line.wrapClass}else{if(f3.node!=f3.text){f3.node.className=""}}var f2=f3.textClass?f3.textClass+" "+(f3.line.textClass||""):f3.line.textClass;f3.text.className=f2||""}function da(ga,f8,f7,f9){if(f8.gutter){f8.node.removeChild(f8.gutter);f8.gutter=null}var f5=f8.line.gutterMarkers;if(ga.options.lineNumbers||f5){var f3=fx(f8);var f6=f8.gutter=f3.insertBefore(fL("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(ga.options.fixedGutter?f9.fixedPos:-f9.gutterTotalWidth)+"px"),f8.text);if(ga.options.lineNumbers&&(!f5||!f5["CodeMirror-linenumbers"])){f8.lineNumber=f6.appendChild(fL("div",eg(ga.options,f7),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+f9.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+ga.display.lineNumInnerWidth+"px"))}if(f5){for(var f4=0;f4<ga.options.gutters.length;++f4){var f2=ga.options.gutters[f4],gb=f5.hasOwnProperty(f2)&&f5[f2];if(gb){f6.appendChild(fL("div",[gb],"CodeMirror-gutter-elt","left: "+f9.gutterLeft[f2]+"px; width: "+f9.gutterWidth[f2]+"px"))}}}}}function an(f2,f5){if(f2.alignable){f2.alignable=null}for(var f4=f2.node.firstChild,f3;f4;f4=f3){var f3=f4.nextSibling;if(f4.className=="CodeMirror-linewidget"){f2.node.removeChild(f4)}}fi(f2,f5)}function aE(f2,f4,f5,f6){var f3=dK(f2,f4);f4.text=f4.node=f3.pre;if(f3.bgClass){f4.bgClass=f3.bgClass}if(f3.textClass){f4.textClass=f3.textClass}dx(f4);da(f2,f4,f5,f6);fi(f4,f6);return f4.node}function fi(f3,f4){fQ(f3.line,f3,f4,true);if(f3.rest){for(var f2=0;f2<f3.rest.length;f2++){fQ(f3.rest[f2],f3,f4,false)}}}function fQ(ga,f7,f9,f5){if(!ga.widgets){return}var f2=fx(f7);for(var f4=0,f8=ga.widgets;f4<f8.length;++f4){var f6=f8[f4],f3=fL("div",[f6.node],"CodeMirror-linewidget");if(!f6.handleMouseEvents){f3.ignoreEvents=true}bE(f6,f3,f7,f9);if(f5&&f6.above){f2.insertBefore(f3,f7.gutter||f7.text)}else{f2.appendChild(f3)}ad(f6,"redraw")}}function bE(f5,f4,f2,f6){if(f5.noHScroll){(f2.alignable||(f2.alignable=[])).push(f4);var f3=f6.wrapperWidth;f4.style.left=f6.fixedPos+"px";if(!f5.coverGutter){f3-=f6.gutterTotalWidth;f4.style.paddingLeft=f6.gutterTotalWidth+"px"}f4.style.width=f3+"px"}if(f5.coverGutter){f4.style.zIndex=5;f4.style.position="relative";if(!f5.noHScroll){f4.style.marginLeft=-f6.gutterTotalWidth+"px"}}}var X=J.Pos=function(f2,f3){if(!(this instanceof X)){return new X(f2,f3)}this.line=f2;this.ch=f3};var ce=J.cmpPos=function(f3,f2){return f3.line-f2.line||f3.ch-f2.ch};function ci(f2){return X(f2.line,f2.ch)}function bw(f3,f2){return ce(f3,f2)<0?f2:f3}function aq(f3,f2){return ce(f3,f2)<0?f3:f2}function fM(f2,f3){this.ranges=f2;this.primIndex=f3}fM.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(f2){if(f2==this){return true}if(f2.primIndex!=this.primIndex||f2.ranges.length!=this.ranges.length){return false}for(var f4=0;f4<this.ranges.length;f4++){var f3=this.ranges[f4],f5=f2.ranges[f4];if(ce(f3.anchor,f5.anchor)!=0||ce(f3.head,f5.head)!=0){return false}}return true},deepCopy:function(){for(var f2=[],f3=0;f3<this.ranges.length;f3++){f2[f3]=new dN(ci(this.ranges[f3].anchor),ci(this.ranges[f3].head))}return new fM(f2,this.primIndex)},somethingSelected:function(){for(var f2=0;f2<this.ranges.length;f2++){if(!this.ranges[f2].empty()){return true}}return false},contains:function(f5,f2){if(!f2){f2=f5}for(var f4=0;f4<this.ranges.length;f4++){var f3=this.ranges[f4];if(ce(f2,f3.from())>=0&&ce(f5,f3.to())<=0){return f4}}return -1}};function dN(f2,f3){this.anchor=f2;this.head=f3}dN.prototype={from:function(){return aq(this.anchor,this.head)},to:function(){return bw(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};function cv(f2,f9){var f4=f2[f9];f2.sort(function(gc,gb){return ce(gc.from(),gb.from())});f9=dc(f2,f4);for(var f6=1;f6<f2.length;f6++){var ga=f2[f6],f3=f2[f6-1];if(ce(f3.to(),ga.from())>=0){var f7=aq(f3.from(),ga.from()),f8=bw(f3.to(),ga.to());var f5=f3.empty()?ga.from()==ga.head:f3.from()==f3.head;if(f6<=f9){--f9}f2.splice(--f6,2,new dN(f5?f8:f7,f5?f7:f8))}}return new fM(f2,f9)}function eH(f2,f3){return new fM([new dN(f2,f3||f2)],0)}function c0(f2,f3){return Math.max(f2.first,Math.min(f3,f2.first+f2.size-1))}function fy(f3,f4){if(f4.line<f3.first){return X(f3.first,0)}var f2=f3.first+f3.size-1;if(f4.line>f2){return X(f2,e3(f3,f2).text.length)}return fh(f4,e3(f3,f4.line).text.length)}function fh(f4,f3){var f2=f4.ch;if(f2==null||f2>f3){return X(f4.line,f3)}else{if(f2<0){return X(f4.line,0)}else{return f4}}}function b8(f3,f2){return f2>=f3.first&&f2<f3.first+f3.size}function dO(f4,f5){for(var f2=[],f3=0;f3<f5.length;f3++){f2[f3]=fy(f4,f5[f3])}return f2}function fk(f7,f3,f6,f2){if(f7.cm&&f7.cm.display.shift||f7.extend){var f5=f3.anchor;if(f2){var f4=ce(f6,f5)<0;if(f4!=(ce(f2,f5)<0)){f5=f6;f6=f2}else{if(f4!=(ce(f6,f2)<0)){f6=f2}}}return new dN(f5,f6)}else{return new dN(f2||f6,f6)}}function fI(f5,f4,f2,f3){bT(f5,new fM([fk(f5,f5.sel.primary(),f4,f2)],0),f3)}function ax(f7,f6,f4){for(var f3=[],f5=0;f5<f7.sel.ranges.length;f5++){f3[f5]=fk(f7,f7.sel.ranges[f5],f6[f5],null)}var f2=cv(f3,f7.sel.primIndex);bT(f7,f2,f4)}function e(f6,f5,f3,f4){var f2=f6.sel.ranges.slice(0);f2[f5]=f3;bT(f6,cv(f2,f6.sel.primIndex),f4)}function H(f5,f3,f4,f2){bT(f5,eH(f3,f4),f2)}function c(f4,f2){var f3={ranges:f2.ranges,update:function(f5){this.ranges=[];for(var f6=0;f6<f5.length;f6++){this.ranges[f6]=new dN(fy(f4,f5[f6].anchor),fy(f4,f5[f6].head))}}};aD(f4,"beforeSelectionChange",f4,f3);if(f4.cm){aD(f4.cm,"beforeSelectionChange",f4.cm,f3)}if(f3.ranges!=f2.ranges){return cv(f3.ranges,f3.ranges.length-1)}else{return f2}}function eV(f6,f5,f3){var f2=f6.history.done,f4=fw(f2);if(f4&&f4.ranges){f2[f2.length-1]=f5;ed(f6,f5,f3)}else{bT(f6,f5,f3)}}function bT(f4,f3,f2){ed(f4,f3,f2);fV(f4,f4.sel,f4.cm?f4.cm.curOp.id:NaN,f2)}function ed(f5,f4,f3){if(e6(f5,"beforeSelectionChange")||f5.cm&&e6(f5.cm,"beforeSelectionChange")){f4=c(f5,f4)}var f2=f3&&f3.bias||(ce(f4.primary().head,f5.sel.primary().head)<0?-1:1);c4(f5,o(f5,f4,f2,true));if(!(f3&&f3.scroll===false)&&f5.cm){fv(f5.cm)}}function c4(f3,f2){if(f2.equals(f3.sel)){return}f3.sel=f2;if(f3.cm){f3.cm.curOp.updateInput=f3.cm.curOp.selectionChanged=true;W(f3.cm)}ad(f3,"cursorActivity",f3)}function em(f2){c4(f2,o(f2,f2.sel,null,false),Z)}function o(ga,f2,f7,f8){var f4;for(var f5=0;f5<f2.ranges.length;f5++){var f6=f2.ranges[f5];var f9=bU(ga,f6.anchor,f7,f8);var f3=bU(ga,f6.head,f7,f8);if(f4||f9!=f6.anchor||f3!=f6.head){if(!f4){f4=f2.ranges.slice(0,f5)}f4[f5]=new dN(f9,f3)}}return f4?cv(f4,f2.primIndex):f2}function bU(gb,ga,f7,f8){var gc=false,f4=ga;var f5=f7||1;gb.cantEdit=false;search:for(;;){var gd=e3(gb,f4.line);if(gd.markedSpans){for(var f6=0;f6<gd.markedSpans.length;++f6){var f2=gd.markedSpans[f6],f3=f2.marker;if((f2.from==null||(f3.inclusiveLeft?f2.from<=f4.ch:f2.from<f4.ch))&&(f2.to==null||(f3.inclusiveRight?f2.to>=f4.ch:f2.to>f4.ch))){if(f8){aD(f3,"beforeCursorEnter");if(f3.explicitlyCleared){if(!gd.markedSpans){break}else{--f6;continue}}}if(!f3.atomic){continue}var f9=f3.find(f5<0?-1:1);if(ce(f9,f4)==0){f9.ch+=f5;if(f9.ch<0){if(f9.line>gb.first){f9=fy(gb,X(f9.line-1))}else{f9=null}}else{if(f9.ch>gd.text.length){if(f9.line<gb.first+gb.size-1){f9=X(f9.line+1,0)}else{f9=null}}}if(!f9){if(gc){if(!f8){return bU(gb,ga,f7,true)}gb.cantEdit=true;return X(gb.first,0)}gc=true;f9=ga;f5=-f5}}f4=f9;continue search}}}return f4}}function bk(gc){var f8=gc.display,gb=gc.doc,gd={};var ga=gd.cursors=document.createDocumentFragment();var f4=gd.selection=document.createDocumentFragment();for(var f6=0;f6<gb.sel.ranges.length;f6++){var f7=gb.sel.ranges[f6];var f5=f7.empty();if(f5||gc.options.showCursorWhenSelecting){B(gc,f7,ga)}if(!f5){bC(gc,f7,f4)}}if(gc.options.moveInputWithCursor){var f9=dJ(gc,gb.sel.primary().head,"div");var f2=f8.wrapper.getBoundingClientRect(),f3=f8.lineDiv.getBoundingClientRect();gd.teTop=Math.max(0,Math.min(f8.wrapper.clientHeight-10,f9.top+f3.top-f2.top));gd.teLeft=Math.max(0,Math.min(f8.wrapper.clientWidth-10,f9.left+f3.left-f2.left))}return gd}function ak(f2,f3){bQ(f2.display.cursorDiv,f3.cursors);bQ(f2.display.selectionDiv,f3.selection);if(f3.teTop!=null){f2.display.inputDiv.style.top=f3.teTop+"px";f2.display.inputDiv.style.left=f3.teLeft+"px"}}function bB(f2){ak(f2,bk(f2))}function B(f2,f5,f4){var f7=dJ(f2,f5.head,"div",null,null,!f2.options.singleCursorHeightPerLine);var f6=f4.appendChild(fL("div","\u00a0","CodeMirror-cursor"));f6.style.left=f7.left+"px";f6.style.top=f7.top+"px";f6.style.height=Math.max(0,f7.bottom-f7.top)*f2.options.cursorHeight+"px";if(f7.other){var f3=f4.appendChild(fL("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));f3.style.display="";f3.style.left=f7.other.left+"px";f3.style.top=f7.other.top+"px";f3.style.height=(f7.other.bottom-f7.other.top)*0.85+"px"}}function bC(f6,gc,f7){var gf=f6.display,gj=f6.doc;var f2=document.createDocumentFragment();var gb=eT(f6.display),f5=gb.left,gg=gf.lineSpace.offsetWidth-gb.right;function gd(gn,gm,gl,gk){if(gm<0){gm=0}gm=Math.round(gm);gk=Math.round(gk);f2.appendChild(fL("div",null,"CodeMirror-selected","position: absolute; left: "+gn+"px; top: "+gm+"px; width: "+(gl==null?gg-gn:gl)+"px; height: "+(gk-gm)+"px"))}function f3(gl,gn,gq){var gm=e3(gj,gl);var go=gm.text.length;var gr,gk;function gp(gt,gs){return cG(f6,X(gl,gt),"div",gm,gs)}dT(a(gm),gn||0,gq==null?go:gq,function(gz,gy,gs){var gv=gp(gz,"left"),gw,gx,gu;if(gz==gy){gw=gv;gx=gu=gv.left}else{gw=gp(gy-1,"right");if(gs=="rtl"){var gt=gv;gv=gw;gw=gt}gx=gv.left;gu=gw.right}if(gn==null&&gz==0){gx=f5}if(gw.top-gv.top>3){gd(gx,gv.top,null,gv.bottom);gx=f5;if(gv.bottom<gw.top){gd(gx,gv.bottom,null,gw.top)}}if(gq==null&&gy==go){gu=gg}if(!gr||gv.top<gr.top||gv.top==gr.top&&gv.left<gr.left){gr=gv}if(!gk||gw.bottom>gk.bottom||gw.bottom==gk.bottom&&gw.right>gk.right){gk=gw}if(gx<f5+1){gx=f5}gd(gx,gw.top,gu-gx,gw.bottom)});return{start:gr,end:gk}}var gi=gc.from(),gh=gc.to();if(gi.line==gh.line){f3(gi.line,gi.ch,gh.ch)}else{var f4=e3(gj,gi.line),f9=e3(gj,gh.line);var f8=z(f4)==z(f9);var ga=f3(gi.line,gi.ch,f8?f4.text.length+1:null).end;var ge=f3(gh.line,f8?0:null,gh.ch).start;if(f8){if(ga.top<ge.top-2){gd(ga.right,ga.top,null,ga.bottom);gd(f5,ge.top,ge.left,ge.bottom)}else{gd(ga.right,ga.top,ge.left-ga.right,ga.bottom)}}if(ga.bottom<ge.top){gd(f5,ga.bottom,null,ge.top)}}f7.appendChild(f2)}function p(f2){if(!f2.state.focused){return}var f4=f2.display;clearInterval(f4.blinker);var f3=true;f4.cursorDiv.style.visibility="";if(f2.options.cursorBlinkRate>0){f4.blinker=setInterval(function(){f4.cursorDiv.style.visibility=(f3=!f3)?"":"hidden"},f2.options.cursorBlinkRate)}else{if(f2.options.cursorBlinkRate<0){f4.cursorDiv.style.visibility="hidden"}}}function d3(f2,f3){if(f2.doc.mode.startState&&f2.doc.frontier<f2.display.viewTo){f2.state.highlight.set(f3,cu(cM,f2))}}function cM(f2){var f6=f2.doc;if(f6.frontier<f6.first){f6.frontier=f6.first}if(f6.frontier>=f2.display.viewTo){return}var f4=+new Date+f2.options.workTime;var f5=b2(f6.mode,ds(f2,f6.frontier));var f3=[];f6.iter(f6.frontier,Math.min(f6.first+f6.size,f2.display.viewTo+500),function(f7){if(f6.frontier>=f2.display.viewFrom){var ga=f7.styles;var gc=fo(f2,f7,f5,true);f7.styles=gc.styles;var f9=f7.styleClasses,gb=gc.classes;if(gb){f7.styleClasses=gb}else{if(f9){f7.styleClasses=null}}var gd=!ga||ga.length!=f7.styles.length||f9!=gb&&(!f9||!gb||f9.bgClass!=gb.bgClass||f9.textClass!=gb.textClass);for(var f8=0;!gd&&f8<ga.length;++f8){gd=ga[f8]!=f7.styles[f8]}if(gd){f3.push(f6.frontier)}f7.stateAfter=b2(f6.mode,f5)}else{dn(f2,f7.text,f5);f7.stateAfter=f6.frontier%5==0?b2(f6.mode,f5):null}++f6.frontier;if(+new Date>f4){d3(f2,f2.options.workDelay);return true}});if(f3.length){cJ(f2,function(){for(var f7=0;f7<f3.length;f7++){S(f2,f3[f7],"text")}})}}function cx(f8,f2,f5){var f3,f6,f7=f8.doc;var f4=f5?-1:f2-(f8.doc.mode.innerMode?1000:100);for(var gb=f2;gb>f4;--gb){if(gb<=f7.first){return f7.first}var ga=e3(f7,gb-1);if(ga.stateAfter&&(!f5||gb<=f7.frontier)){return gb}var f9=bS(ga.text,null,f8.options.tabSize);if(f6==null||f3>f9){f6=gb-1;f3=f9}}return f6}function ds(f2,f8,f3){var f6=f2.doc,f5=f2.display;if(!f6.mode.startState){return true}var f7=cx(f2,f8,f3),f4=f7>f6.first&&e3(f6,f7-1).stateAfter;if(!f4){f4=bZ(f6.mode)}else{f4=b2(f6.mode,f4)}f6.iter(f7,f8,function(f9){dn(f2,f9.text,f4);var ga=f7==f8-1||f7%5==0||f7>=f5.viewFrom&&f7<f5.viewTo;f9.stateAfter=ga?b2(f6.mode,f4):null;++f7});if(f3){f6.frontier=f7}return f4}function eW(f2){return f2.lineSpace.offsetTop}function bH(f2){return f2.mover.offsetHeight-f2.lineSpace.offsetHeight}function eT(f5){if(f5.cachedPaddingH){return f5.cachedPaddingH}var f4=bQ(f5.measure,fL("pre","x"));var f2=window.getComputedStyle?window.getComputedStyle(f4):f4.currentStyle;var f3={left:parseInt(f2.paddingLeft),right:parseInt(f2.paddingRight)};if(!isNaN(f3.left)&&!isNaN(f3.right)){f5.cachedPaddingH=f3}return f3}function ch(f9,f5,f8){var f4=f9.options.lineWrapping;var f6=f4&&f9.display.scroller.clientWidth;if(!f5.measure.heights||f4&&f5.measure.width!=f6){var f7=f5.measure.heights=[];if(f4){f5.measure.width=f6;var gb=f5.text.firstChild.getClientRects();for(var f2=0;f2<gb.length-1;f2++){var ga=gb[f2],f3=gb[f2+1];if(Math.abs(ga.bottom-f3.bottom)>2){f7.push((ga.bottom+f3.top)/2-f8.top)}}}f7.push(f8.bottom-f8.top)}}function cs(f4,f2,f5){if(f4.line==f2){return{map:f4.measure.map,cache:f4.measure.cache}}for(var f3=0;f3<f4.rest.length;f3++){if(f4.rest[f3]==f2){return{map:f4.measure.maps[f3],cache:f4.measure.caches[f3]}}}for(var f3=0;f3<f4.rest.length;f3++){if(bM(f4.rest[f3])>f5){return{map:f4.measure.maps[f3],cache:f4.measure.caches[f3],before:true}}}}function cW(f2,f4){f4=z(f4);var f6=bM(f4);var f3=f2.display.externalMeasured=new bu(f2.doc,f4,f6);f3.lineN=f6;var f5=f3.built=eG(f2,f3);f3.text=f5.pre;bQ(f2.display.lineMeasure,f5.pre);return f3}function d5(f2,f3,f5,f4){return E(f2,a1(f2,f3),f5,f4)}function eZ(f2,f4){if(f4>=f2.display.viewFrom&&f4<f2.display.viewTo){return f2.display.view[di(f2,f4)]}var f3=f2.display.externalMeasured;if(f3&&f4>=f3.lineN&&f4<f3.lineN+f3.size){return f3}}function a1(f2,f4){var f5=bM(f4);var f3=eZ(f2,f5);if(f3&&!f3.text){f3=null}else{if(f3&&f3.changes){aa(f2,f3,f5,e1(f2))}}if(!f3){f3=cW(f2,f4)}var f6=cs(f3,f4,f5);return{line:f4,view:f3,rect:null,map:f6.map,cache:f6.cache,before:f6.before,hasHeights:false}}function E(f2,f8,f6,f3,f5){if(f8.before){f6=-1}var f4=f6+(f3||""),f7;if(f8.cache.hasOwnProperty(f4)){f7=f8.cache[f4]}else{if(!f8.rect){f8.rect=f8.view.text.getBoundingClientRect()}if(!f8.hasHeights){ch(f2,f8.view,f8.rect);f8.hasHeights=true}f7=j(f2,f8,f6,f3);if(!f7.bogus){f8.cache[f4]=f7}}return{left:f7.left,right:f7.right,top:f5?f7.rtop:f7.top,bottom:f5?f7.rbottom:f7.bottom}}var ep={left:0,right:0,top:0,bottom:0};function j(f9,gj,gb,f7){var gn=gj.map;var gg,f6,f5,f2;for(var gi=0;gi<gn.length;gi+=3){var gl=gn[gi],gh=gn[gi+1];if(gb<gl){f6=0;f5=1;f2="left"}else{if(gb<gh){f6=gb-gl;f5=f6+1}else{if(gi==gn.length-3||gb==gh&&gn[gi+3]>gb){f5=gh-gl;f6=f5-1;if(gb>=gh){f2="right"}}}}if(f6!=null){gg=gn[gi+2];if(gl==gh&&f7==(gg.insertLeft?"left":"right")){f2=f7}if(f7=="left"&&f6==0){while(gi&&gn[gi-2]==gn[gi-3]&&gn[gi-1].insertLeft){gg=gn[(gi-=3)+2];f2="left"}}if(f7=="right"&&f6==gh-gl){while(gi<gn.length-3&&gn[gi+3]==gn[gi+4]&&!gn[gi+5].insertLeft){gg=gn[(gi+=3)+2];f2="right"}}break}}var f3;if(gg.nodeType==3){for(;;){while(f6&&fe(gj.line.text.charAt(gl+f6))){--f6}while(gl+f5<gh&&fe(gj.line.text.charAt(gl+f5))){++f5}if(dA&&l<9&&f6==0&&f5==gh-gl){f3=gg.parentNode.getBoundingClientRect()}else{if(dA&&f9.options.lineWrapping){var f4=cl(gg,f6,f5).getClientRects();if(f4.length){f3=f4[f7=="right"?f4.length-1:0]}else{f3=ep}}else{f3=cl(gg,f6,f5).getBoundingClientRect()||ep}}if(f3.left||f3.right||f6==0){break}f5=f6;f6=f6-1;f2="right"}}else{if(f6>0){f2=f7="right"}var f4;if(f9.options.lineWrapping&&(f4=gg.getClientRects()).length>1){f3=f4[f7=="right"?f4.length-1:0]}else{f3=gg.getBoundingClientRect()}}if(dA&&l<9&&!f6&&(!f3||!f3.left&&!f3.right)){var f8=gg.parentNode.getClientRects()[0];if(f8){f3={left:f8.left,right:f8.left+du(f9.display),top:f8.top,bottom:f8.bottom}}else{f3=ep}}if(dA&&l<11){f3=eC(f9.display.measure,f3)}var ge=f3.top-gj.rect.top,gc=f3.bottom-gj.rect.top;var gm=(ge+gc)/2;var gk=gj.view.measure.heights;for(var gi=0;gi<gk.length-1;gi++){if(gm<gk[gi]){break}}var gf=gi?gk[gi-1]:0,gd=gk[gi];var ga={left:(f2=="right"?f3.right:f3.left)-gj.rect.left,right:(f2=="left"?f3.left:f3.right)-gj.rect.left,top:gf,bottom:gd};if(!f3.left&&!f3.right){ga.bogus=true}if(!f9.options.singleCursorHeightPerLine){ga.rtop=ge;ga.rbottom=gc}return ga}function eC(f4,f5){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!aJ(f4)){return f5}var f3=screen.logicalXDPI/screen.deviceXDPI;var f2=screen.logicalYDPI/screen.deviceYDPI;return{left:f5.left*f3,right:f5.right*f3,top:f5.top*f2,bottom:f5.bottom*f2}}function au(f3){if(f3.measure){f3.measure.cache={};f3.measure.heights=null;if(f3.rest){for(var f2=0;f2<f3.rest.length;f2++){f3.measure.caches[f2]={}}}}}function aM(f2){f2.display.externalMeasure=null;dQ(f2.display.lineMeasure);for(var f3=0;f3<f2.display.view.length;f3++){au(f2.display.view[f3])}}function aj(f2){aM(f2);f2.display.cachedCharWidth=f2.display.cachedTextHeight=f2.display.cachedPaddingH=null;if(!f2.options.lineWrapping){f2.display.maxLineChanged=true}f2.display.lineNumChars=null}function ct(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function cr(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function eF(f8,f5,f7,f3){if(f5.widgets){for(var f4=0;f4<f5.widgets.length;++f4){if(f5.widgets[f4].above){var ga=cT(f5.widgets[f4]);f7.top+=ga;f7.bottom+=ga}}}if(f3=="line"){return f7}if(!f3){f3="local"}var f6=bL(f5);if(f3=="local"){f6+=eW(f8.display)}else{f6-=f8.display.viewOffset}if(f3=="page"||f3=="window"){var f2=f8.display.lineSpace.getBoundingClientRect();f6+=f2.top+(f3=="window"?0:cr());var f9=f2.left+(f3=="window"?0:ct());f7.left+=f9;f7.right+=f9}f7.top+=f6;f7.bottom+=f6;return f7}function fY(f3,f6,f4){if(f4=="div"){return f6}var f8=f6.left,f7=f6.top;if(f4=="page"){f8-=ct();f7-=cr()}else{if(f4=="local"||!f4){var f5=f3.display.sizer.getBoundingClientRect();f8+=f5.left;f7+=f5.top}}var f2=f3.display.lineSpace.getBoundingClientRect();return{left:f8-f2.left,top:f7-f2.top}}function cG(f2,f6,f5,f4,f3){if(!f4){f4=e3(f2.doc,f6.line)}return eF(f2,f4,d5(f2,f4,f6.ch,f3),f5)}function dJ(gb,ga,f4,f8,gd,f9){f8=f8||e3(gb.doc,ga.line);if(!gd){gd=a1(gb,f8)}function f6(gg,gf){var ge=E(gb,gd,gg,gf?"right":"left",f9);if(gf){ge.left=ge.right}else{ge.right=ge.left}return eF(gb,f8,ge,f4)}function gc(gh,ge){var gf=f7[ge],gg=gf.level%2;if(gh==dp(gf)&&ge&&gf.level<f7[ge-1].level){gf=f7[--ge];gh=fX(gf)-(gf.level%2?0:1);gg=true}else{if(gh==fX(gf)&&ge<f7.length-1&&gf.level<f7[ge+1].level){gf=f7[++ge];gh=dp(gf)-gf.level%2;gg=false}}if(gg&&gh==gf.to&&gh>gf.from){return f6(gh-1)}return f6(gh,gg)}var f7=a(f8),f2=ga.ch;if(!f7){return f6(f2)}var f3=aF(f7,f2);var f5=gc(f2,f3);if(eR!=null){f5.other=gc(f2,eR)}return f5}function dy(f2,f6){var f5=0,f6=fy(f2.doc,f6);if(!f2.options.lineWrapping){f5=du(f2.display)*f6.ch}var f3=e3(f2.doc,f6.line);var f4=bL(f3)+eW(f2.display);return{left:f5,right:f5,top:f4,bottom:f4+f3.height}}function fK(f2,f3,f4,f6){var f5=X(f2,f3);f5.xRel=f6;if(f4){f5.outside=true}return f5}function fD(f9,f6,f5){var f8=f9.doc;f5+=f9.display.viewOffset;if(f5<0){return fK(f8.first,0,true,-1)}var f4=bF(f8,f5),ga=f8.first+f8.size-1;if(f4>ga){return fK(f8.first+f8.size-1,e3(f8,ga).text.length,true,1)}if(f6<0){f6=0}var f3=e3(f8,f4);for(;;){var gb=cU(f9,f3,f4,f6,f5);var f7=ej(f3);var f2=f7&&f7.find(0,true);if(f7&&(gb.ch>f2.from.ch||gb.ch==f2.from.ch&&gb.xRel>0)){f4=bM(f3=f2.to.line)}else{return gb}}}function cU(gc,f4,gf,ge,gd){var gb=gd-bL(f4);var f8=false,gl=2*gc.display.wrapper.clientWidth;var gi=a1(gc,f4);function gp(gr){var gs=dJ(gc,X(gf,gr),"line",f4,gi);f8=true;if(gb>gs.bottom){return gs.left-gl}else{if(gb<gs.top){return gs.left+gl}else{f8=false}}return gs.left}var gh=a(f4),gk=f4.text.length;var gm=cC(f4),f5=cP(f4);var gj=gp(gm),f2=f8,f3=gp(f5),f7=f8;if(ge>f3){return fK(gf,f5,f7,1)}for(;;){if(gh?f5==gm||f5==v(f4,gm,1):f5-gm<=1){var gg=ge<gj||ge-gj<=f3-ge?gm:f5;var go=ge-(gg==gm?gj:f3);while(fe(f4.text.charAt(gg))){++gg}var ga=fK(gf,gg,gg==gm?f2:f7,go<-1?-1:go>1?1:0);return ga}var f9=Math.ceil(gk/2),gq=gm+f9;if(gh){gq=gm;for(var gn=0;gn<f9;++gn){gq=v(f4,gq,1)}}var f6=gp(gq);if(f6>ge){f5=gq;f3=f6;if(f7=f8){f3+=1000}gk=f9}else{gm=gq;gj=f6;f2=f8;gk-=f9}}}var aG;function aU(f4){if(f4.cachedTextHeight!=null){return f4.cachedTextHeight}if(aG==null){aG=fL("pre");for(var f3=0;f3<49;++f3){aG.appendChild(document.createTextNode("x"));aG.appendChild(fL("br"))}aG.appendChild(document.createTextNode("x"))}bQ(f4.measure,aG);var f2=aG.offsetHeight/50;if(f2>3){f4.cachedTextHeight=f2}dQ(f4.measure);return f2||1}function du(f6){if(f6.cachedCharWidth!=null){return f6.cachedCharWidth}var f2=fL("span","xxxxxxxxxx");var f5=fL("pre",[f2]);bQ(f6.measure,f5);var f4=f2.getBoundingClientRect(),f3=(f4.right-f4.left)/10;if(f3>2){f6.cachedCharWidth=f3}return f3||10}var bo=null;var dX=0;function cF(f2){f2.curOp={cm:f2,viewChanged:false,startHeight:f2.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++dX};if(bo){bo.ops.push(f2.curOp)}else{f2.curOp.ownsGroup=bo={ops:[f2.curOp],delayedCallbacks:[]}}}function cQ(f5){var f4=f5.delayedCallbacks,f3=0;do{for(;f3<f4.length;f3++){f4[f3]()}for(var f2=0;f2<f5.ops.length;f2++){var f6=f5.ops[f2];if(f6.cursorActivityHandlers){while(f6.cursorActivityCalled<f6.cursorActivityHandlers.length){f6.cursorActivityHandlers[f6.cursorActivityCalled++](f6.cm)}}}}while(f3<f4.length)}function al(f2){var f5=f2.curOp,f4=f5.ownsGroup;if(!f4){return}try{cQ(f4)}finally{bo=null;for(var f3=0;f3<f4.ops.length;f3++){f4.ops[f3].cm.curOp=null}cH(f4)}}function cH(f4){var f3=f4.ops;for(var f2=0;f2<f3.length;f2++){b4(f3[f2])}for(var f2=0;f2<f3.length;f2++){ap(f3[f2])}for(var f2=0;f2<f3.length;f2++){b1(f3[f2])}for(var f2=0;f2<f3.length;f2++){ao(f3[f2])}for(var f2=0;f2<f3.length;f2++){eP(f3[f2])}}function b4(f4){var f2=f4.cm,f3=f2.display;if(f4.updateMaxLine){g(f2)}f4.mustUpdate=f4.viewChanged||f4.forceUpdate||f4.scrollTop!=null||f4.scrollToPos&&(f4.scrollToPos.from.line<f3.viewFrom||f4.scrollToPos.to.line>=f3.viewTo)||f3.maxLineChanged&&f2.options.lineWrapping;f4.update=f4.mustUpdate&&new aH(f2,f4.mustUpdate&&{top:f4.scrollTop,ensure:f4.scrollToPos},f4.forceUpdate)}function ap(f2){f2.updatedDisplay=f2.mustUpdate&&D(f2.cm,f2.update)}function b1(f4){var f2=f4.cm,f3=f2.display;if(f4.updatedDisplay){a6(f2)}f4.barMeasure=dr(f2);if(f3.maxLineChanged&&!f2.options.lineWrapping){f4.adjustWidthTo=d5(f2,f3.maxLine,f3.maxLine.text.length).left+3;f4.maxScrollLeft=Math.max(0,f3.sizer.offsetLeft+f4.adjustWidthTo+bh-f3.scroller.clientWidth)}if(f4.updatedDisplay||f4.selectionChanged){f4.newSelectionNodes=bk(f2)}}function ao(f3){var f2=f3.cm;if(f3.adjustWidthTo!=null){f2.display.sizer.style.minWidth=f3.adjustWidthTo+"px";if(f3.maxScrollLeft<f2.doc.scrollLeft){bD(f2,Math.min(f2.display.scroller.scrollLeft,f3.maxScrollLeft),true)}f2.display.maxLineChanged=false}if(f3.newSelectionNodes){ak(f2,f3.newSelectionNodes)}if(f3.updatedDisplay){dq(f2,f3.barMeasure)}if(f3.updatedDisplay||f3.startHeight!=f2.doc.height){eN(f2,f3.barMeasure)}if(f3.selectionChanged){p(f2)}if(f2.state.focused&&f3.updateInput){fd(f2,f3.typing)}}function eP(f5){var gb=f5.cm,f7=gb.display,ga=gb.doc;if(f5.adjustWidthTo!=null&&Math.abs(f5.barMeasure.scrollWidth-gb.display.scroller.scrollWidth)>1){eN(gb)}if(f5.updatedDisplay){cj(gb,f5.update)}if(f7.wheelStartX!=null&&(f5.scrollTop!=null||f5.scrollLeft!=null||f5.scrollToPos)){f7.wheelStartX=f7.wheelStartY=null}if(f5.scrollTop!=null&&f7.scroller.scrollTop!=f5.scrollTop){var f8=Math.max(0,Math.min(f7.scroller.scrollHeight-f7.scroller.clientHeight,f5.scrollTop));f7.scroller.scrollTop=f7.scrollbarV.scrollTop=ga.scrollTop=f8}if(f5.scrollLeft!=null&&f7.scroller.scrollLeft!=f5.scrollLeft){var f3=Math.max(0,Math.min(f7.scroller.scrollWidth-f7.scroller.clientWidth,f5.scrollLeft));f7.scroller.scrollLeft=f7.scrollbarH.scrollLeft=ga.scrollLeft=f3;et(gb)}if(f5.scrollToPos){var f9=F(gb,fy(ga,f5.scrollToPos.from),fy(ga,f5.scrollToPos.to),f5.scrollToPos.margin);if(f5.scrollToPos.isCursor&&gb.state.focused){dV(gb,f9)}}var f6=f5.maybeHiddenMarkers,f2=f5.maybeUnhiddenMarkers;if(f6){for(var f4=0;f4<f6.length;++f4){if(!f6[f4].lines.length){aD(f6[f4],"hide")}}}if(f2){for(var f4=0;f4<f2.length;++f4){if(f2[f4].lines.length){aD(f2[f4],"unhide")}}}if(f7.wrapper.offsetHeight){ga.scrollTop=gb.display.scroller.scrollTop}if(f5.updatedDisplay&&cV){if(gb.options.lineWrapping){fO(gb,f5.barMeasure)}if(f5.barMeasure.scrollWidth>f5.barMeasure.clientWidth&&f5.barMeasure.scrollWidth<f5.barMeasure.clientWidth+1&&!cN(gb)){eN(gb)}}if(f5.changeObjs){aD(gb,"changes",gb,f5.changeObjs)}}function cJ(f2,f3){if(f2.curOp){return f3()}cF(f2);try{return f3()}finally{al(f2)}}function cX(f2,f3){return function(){if(f2.curOp){return f3.apply(f2,arguments)}cF(f2);try{return f3.apply(f2,arguments)}finally{al(f2)}}}function c3(f2){return function(){if(this.curOp){return f2.apply(this,arguments)}cF(this);try{return f2.apply(this,arguments)}finally{al(this)}}}function cB(f2){return function(){var f3=this.cm;if(!f3||f3.curOp){return f2.apply(this,arguments)}cF(f3);try{return f2.apply(this,arguments)}finally{al(f3)}}}function bu(f4,f2,f3){this.line=f2;this.rest=h(f2);this.size=this.rest?bM(fw(this.rest))-f3+1:1;this.node=this.text=null;this.hidden=fl(f4,f2)}function eK(f2,f8,f7){var f6=[],f4;for(var f5=f8;f5<f7;f5=f4){var f3=new bu(f2.doc,e3(f2.doc,f5),f5);f4=f5+f3.size;f6.push(f3)}return f6}function ag(f9,f7,f8,ga){if(f7==null){f7=f9.doc.first}if(f8==null){f8=f9.doc.first+f9.doc.size}if(!ga){ga=0}var f4=f9.display;if(ga&&f8<f4.viewTo&&(f4.updateLineNumbers==null||f4.updateLineNumbers>f7)){f4.updateLineNumbers=f7}f9.curOp.viewChanged=true;if(f7>=f4.viewTo){if(a4&&aT(f9.doc,f7)<f4.viewTo){el(f9)}}else{if(f8<=f4.viewFrom){if(a4&&dS(f9.doc,f8+ga)>f4.viewFrom){el(f9)}else{f4.viewFrom+=ga;f4.viewTo+=ga}}else{if(f7<=f4.viewFrom&&f8>=f4.viewTo){el(f9)}else{if(f7<=f4.viewFrom){var f6=c9(f9,f8,f8+ga,1);if(f6){f4.view=f4.view.slice(f6.index);f4.viewFrom=f6.lineN;f4.viewTo+=ga}else{el(f9)}}else{if(f8>=f4.viewTo){var f6=c9(f9,f7,f7,-1);if(f6){f4.view=f4.view.slice(0,f6.index);f4.viewTo=f6.lineN}else{el(f9)}}else{var f5=c9(f9,f7,f7,-1);var f3=c9(f9,f8,f8+ga,1);if(f5&&f3){f4.view=f4.view.slice(0,f5.index).concat(eK(f9,f5.lineN,f3.lineN)).concat(f4.view.slice(f3.index));f4.viewTo+=ga}else{el(f9)}}}}}}var f2=f4.externalMeasured;if(f2){if(f8<f2.lineN){f2.lineN+=ga}else{if(f7<f2.lineN+f2.size){f4.externalMeasured=null}}}}function S(f3,f4,f7){f3.curOp.viewChanged=true;var f8=f3.display,f6=f3.display.externalMeasured;if(f6&&f4>=f6.lineN&&f4<f6.lineN+f6.size){f8.externalMeasured=null}if(f4<f8.viewFrom||f4>=f8.viewTo){return}var f5=f8.view[di(f3,f4)];if(f5.node==null){return}var f2=f5.changes||(f5.changes=[]);if(dc(f2,f7)==-1){f2.push(f7)}}function el(f2){f2.display.viewFrom=f2.display.viewTo=f2.doc.first;f2.display.view=[];f2.display.viewOffset=0}function di(f2,f5){if(f5>=f2.display.viewTo){return null}f5-=f2.display.viewFrom;if(f5<0){return null}var f3=f2.display.view;for(var f4=0;f4<f3.length;f4++){f5-=f3[f4].size;if(f5<0){return f4}}}function c9(ga,f4,f6,f3){var f7=di(ga,f4),f9,f8=ga.display.view;if(!a4||f6==ga.doc.first+ga.doc.size){return{index:f7,lineN:f6}}for(var f5=0,f2=ga.display.viewFrom;f5<f7;f5++){f2+=f8[f5].size}if(f2!=f4){if(f3>0){if(f7==f8.length-1){return null}f9=(f2+f8[f7].size)-f4;f7++}else{f9=f2-f4}f4+=f9;f6+=f9}while(aT(ga.doc,f6)!=f6){if(f7==(f3<0?0:f8.length-1)){return null}f6+=f3*f8[f7-(f3<0?1:0)].size;f7+=f3}return{index:f7,lineN:f6}}function cO(f2,f6,f5){var f4=f2.display,f3=f4.view;if(f3.length==0||f6>=f4.viewTo||f5<=f4.viewFrom){f4.view=eK(f2,f6,f5);f4.viewFrom=f6}else{if(f4.viewFrom>f6){f4.view=eK(f2,f6,f4.viewFrom).concat(f4.view)}else{if(f4.viewFrom<f6){f4.view=f4.view.slice(di(f2,f6))}}f4.viewFrom=f6;if(f4.viewTo<f5){f4.view=f4.view.concat(eK(f2,f4.viewTo,f5))}else{if(f4.viewTo>f5){f4.view=f4.view.slice(0,di(f2,f5))}}}f4.viewTo=f5}function c6(f2){var f3=f2.display.view,f6=0;for(var f5=0;f5<f3.length;f5++){var f4=f3[f5];if(!f4.hidden&&(!f4.node||f4.changes)){++f6}}return f6}function bl(f2){if(f2.display.pollingFast){return}f2.display.poll.set(f2.options.pollInterval,function(){cg(f2);if(f2.state.focused){bl(f2)}})}function C(f2){var f3=false;f2.display.pollingFast=true;function f4(){var f5=cg(f2);if(!f5&&!f3){f3=true;f2.display.poll.set(60,f4)}else{f2.display.pollingFast=false;bl(f2)}}f2.display.poll.set(20,f4)}var bj=null;function cg(f6){var f7=f6.display.input,ga=f6.display.prevInput,gl=f6.doc;if(!f6.state.focused||(br(f7)&&!ga)||ai(f6)||f6.options.disableInput){return false}if(f6.state.pasteIncoming&&f6.state.fakedLastChar){f7.value=f7.value.substring(0,f7.value.length-1);f6.state.fakedLastChar=false}var f9=f7.value;if(f9==ga&&!f6.somethingSelected()){return false}if(dA&&l>=9&&f6.display.inputHasSelection===f9||b6&&/[\uf700-\uf7ff]/.test(f9)){fd(f6);return false}var gh=!f6.curOp;if(gh){cF(f6)}f6.display.shift=false;if(f9.charCodeAt(0)==8203&&gl.sel==f6.display.selForContextMenu&&!ga){ga="\u200b"}var gg=0,gd=Math.min(ga.length,f9.length);while(gg<gd&&ga.charCodeAt(gg)==f9.charCodeAt(gg)){++gg}var f3=f9.slice(gg),gb=aX(f3);var gk=null;if(f6.state.pasteIncoming&&gl.sel.ranges.length>1){if(bj&&bj.join("\n")==f3){gk=gl.sel.ranges.length%bj.length==0&&bR(bj,aX)}else{if(gb.length==gl.sel.ranges.length){gk=bR(gb,function(gm){return[gm]})}}}for(var gi=gl.sel.ranges.length-1;gi>=0;gi--){var gc=gl.sel.ranges[gi];var ge=gc.from(),f2=gc.to();if(gg<ga.length){ge=X(ge.line,ge.ch-(ga.length-gg))}else{if(f6.state.overwrite&&gc.empty()&&!f6.state.pasteIncoming){f2=X(f2.line,Math.min(e3(gl,f2.line).text.length,f2.ch+fw(gb).length))}}var f5=f6.curOp.updateInput;var gj={from:ge,to:f2,text:gk?gk[gi%gk.length]:gb,origin:f6.state.pasteIncoming?"paste":f6.state.cutIncoming?"cut":"+input"};bc(f6.doc,gj);ad(f6,"inputRead",f6,gj);if(f3&&!f6.state.pasteIncoming&&f6.options.electricChars&&f6.options.smartIndent&&gc.head.ch<100&&(!gi||gl.sel.ranges[gi-1].head.line!=gc.head.line)){var f8=f6.getModeAt(gc.head);if(f8.electricChars){for(var gf=0;gf<f8.electricChars.length;gf++){if(f3.indexOf(f8.electricChars.charAt(gf))>-1){ac(f6,gc.head.line,"smart");break}}}else{if(f8.electricInput){var f4=cS(gj);if(f8.electricInput.test(e3(gl,f4.line).text.slice(0,f4.ch))){ac(f6,gc.head.line,"smart")}}}}}fv(f6);f6.curOp.updateInput=f5;f6.curOp.typing=true;if(f9.length>1000||f9.indexOf("\n")>-1){f7.value=f6.display.prevInput=""}else{f6.display.prevInput=f9}if(gh){al(f6)}f6.state.pasteIncoming=f6.state.cutIncoming=false;return true}function fd(f2,f6){var f3,f5,f8=f2.doc;if(f2.somethingSelected()){f2.display.prevInput="";var f4=f8.sel.primary();f3=c5&&(f4.to().line-f4.from().line>100||(f5=f2.getSelection()).length>1000);var f7=f3?"-":f5||f2.getSelection();f2.display.input.value=f7;if(f2.state.focused){dB(f2.display.input)}if(dA&&l>=9){f2.display.inputHasSelection=f7}}else{if(!f6){f2.display.prevInput=f2.display.input.value="";if(dA&&l>=9){f2.display.inputHasSelection=null}}}f2.display.inaccurateSelection=f3}function eo(f2){if(f2.options.readOnly!="nocursor"&&(!d4||dD()!=f2.display.input)){f2.display.input.focus()}}function s(f2){if(!f2.state.focused){eo(f2);cz(f2)}}function ai(f2){return f2.options.readOnly||f2.doc.cantEdit}function fE(f2){var f4=f2.display;bW(f4.scroller,"mousedown",cX(f2,eh));if(dA&&l<11){bW(f4.scroller,"dblclick",cX(f2,function(f8){if(aP(f2,f8)){return}var f9=cn(f2,f8);if(!f9||m(f2,f8)||a7(f2.display,f8)){return}cD(f8);var f7=aw(f2,f9);fI(f2.doc,f7.anchor,f7.head)}))}else{bW(f4.scroller,"dblclick",function(f7){aP(f2,f7)||cD(f7)})}bW(f4.lineSpace,"selectstart",function(f7){if(!a7(f4,f7)){cD(f7)}});if(!fT){bW(f4.scroller,"contextmenu",function(f7){az(f2,f7)})}bW(f4.scroller,"scroll",function(){if(f4.scroller.clientHeight){O(f2,f4.scroller.scrollTop);bD(f2,f4.scroller.scrollLeft,true);aD(f2,"scroll",f2)}});bW(f4.scrollbarV,"scroll",function(){if(f4.scroller.clientHeight){O(f2,f4.scrollbarV.scrollTop)}});bW(f4.scrollbarH,"scroll",function(){if(f4.scroller.clientHeight){bD(f2,f4.scrollbarH.scrollLeft)}});bW(f4.scroller,"mousewheel",function(f7){b(f2,f7)});bW(f4.scroller,"DOMMouseScroll",function(f7){b(f2,f7)});function f6(){if(f2.state.focused){setTimeout(cu(eo,f2),0)}}bW(f4.scrollbarH,"mousedown",f6);bW(f4.scrollbarV,"mousedown",f6);bW(f4.wrapper,"scroll",function(){f4.wrapper.scrollTop=f4.wrapper.scrollLeft=0});bW(f4.input,"keyup",function(f7){be.call(f2,f7)});bW(f4.input,"input",function(){if(dA&&l>=9&&f2.display.inputHasSelection){f2.display.inputHasSelection=null}C(f2)});bW(f4.input,"keydown",cX(f2,q));bW(f4.input,"keypress",cX(f2,cw));bW(f4.input,"focus",cu(cz,f2));bW(f4.input,"blur",cu(aS,f2));function f3(f7){if(!aP(f2,f7)){ef(f7)}}if(f2.options.dragDrop){bW(f4.scroller,"dragstart",function(f7){R(f2,f7)});bW(f4.scroller,"dragenter",f3);bW(f4.scroller,"dragover",f3);bW(f4.scroller,"drop",cX(f2,bg))}bW(f4.scroller,"paste",function(f7){if(a7(f4,f7)){return}f2.state.pasteIncoming=true;eo(f2);C(f2)});bW(f4.input,"paste",function(){if(cV&&!f2.state.fakedLastChar&&!(new Date-f2.state.lastMiddleDown<200)){var f8=f4.input.selectionStart,f7=f4.input.selectionEnd;f4.input.value+="$";f4.input.selectionEnd=f7;f4.input.selectionStart=f8;f2.state.fakedLastChar=true}f2.state.pasteIncoming=true;C(f2)});function f5(gb){if(f2.somethingSelected()){bj=f2.getSelections();if(f4.inaccurateSelection){f4.prevInput="";f4.inaccurateSelection=false;f4.input.value=bj.join("\n");dB(f4.input)}}else{var gc=[],f8=[];for(var f9=0;f9<f2.doc.sel.ranges.length;f9++){var f7=f2.doc.sel.ranges[f9].head.line;var ga={anchor:X(f7,0),head:X(f7+1,0)};f8.push(ga);gc.push(f2.getRange(ga.anchor,ga.head))}if(gb.type=="cut"){f2.setSelections(f8,null,Z)}else{f4.prevInput="";f4.input.value=gc.join("\n");dB(f4.input)}bj=gc}if(gb.type=="cut"){f2.state.cutIncoming=true}}bW(f4.input,"cut",f5);bW(f4.input,"copy",f5);if(a8){bW(f4.sizer,"mouseup",function(){if(dD()==f4.input){f4.input.blur()}eo(f2)})}}function aR(f2){var f3=f2.display;f3.cachedCharWidth=f3.cachedTextHeight=f3.cachedPaddingH=null;f2.setSize()}function a7(f3,f2){for(var f4=M(f2);f4!=f3.wrapper;f4=f4.parentNode){if(!f4||f4.ignoreEvents||f4.parentNode==f3.sizer&&f4!=f3.mover){return true}}}function cn(gc,f6,f3,f4){var f8=gc.display;if(!f3){var f7=M(f6);if(f7==f8.scrollbarH||f7==f8.scrollbarV||f7==f8.scrollbarFiller||f7==f8.gutterFiller){return null}}var gb,f9,f2=f8.lineSpace.getBoundingClientRect();try{gb=f6.clientX-f2.left;f9=f6.clientY-f2.top}catch(f6){return null}var ga=fD(gc,gb,f9),gd;if(f4&&ga.xRel==1&&(gd=e3(gc.doc,ga.line).text).length==ga.ch){var f5=bS(gd,gd.length,gc.options.tabSize)-gd.length;ga=X(ga.line,Math.max(0,Math.round((gb-eT(gc.display).left)/du(gc.display))-f5))}return ga}function eh(f4){if(aP(this,f4)){return}var f2=this,f3=f2.display;f3.shift=f4.shiftKey;if(a7(f3,f4)){if(!cV){f3.scroller.draggable=false;setTimeout(function(){f3.scroller.draggable=true},100)}return}if(m(f2,f4)){return}var f5=cn(f2,f4);window.focus();switch(fC(f4)){case 1:if(f5){ay(f2,f4,f5)}else{if(M(f4)==f3.scroller){cD(f4)}}break;case 2:if(cV){f2.state.lastMiddleDown=+new Date}if(f5){fI(f2.doc,f5)}setTimeout(cu(eo,f2),20);cD(f4);break;case 3:if(fT){az(f2,f4)}break}}var df,c8;function ay(f3,f7,f8){setTimeout(cu(s,f3),0);var f4=+new Date,f5;if(c8&&c8.time>f4-400&&ce(c8.pos,f8)==0){f5="triple"}else{if(df&&df.time>f4-400&&ce(df.pos,f8)==0){f5="double";c8={time:f4,pos:f8}}else{f5="single";df={time:f4,pos:f8}}}var f6=f3.doc.sel,f2=b6?f7.metaKey:f7.ctrlKey;if(f3.options.dragDrop&&eA&&!ai(f3)&&f5=="single"&&f6.contains(f8)>-1&&f6.somethingSelected()){a0(f3,f7,f8,f2)}else{n(f3,f7,f8,f5,f2)}}function a0(f4,f6,f7,f3){var f5=f4.display;var f2=cX(f4,function(f8){if(cV){f5.scroller.draggable=false}f4.state.draggingText=false;d1(document,"mouseup",f2);d1(f5.scroller,"drop",f2);if(Math.abs(f6.clientX-f8.clientX)+Math.abs(f6.clientY-f8.clientY)<10){cD(f8);if(!f3){fI(f4.doc,f7)}eo(f4);if(dA&&l==9){setTimeout(function(){document.body.focus();eo(f4)},20)}}});if(cV){f5.scroller.draggable=true}f4.state.draggingText=f2;if(f5.scroller.dragDrop){f5.scroller.dragDrop()}bW(document,"mouseup",f2);bW(f5.scroller,"drop",f2)}function n(f5,gj,f4,f2,f7){var gg=f5.display,gl=f5.doc;cD(gj);var f3,gk,f6=gl.sel;if(f7&&!gj.shiftKey){gk=gl.sel.contains(f4);if(gk>-1){f3=gl.sel.ranges[gk]}else{f3=new dN(f4,f4)}}else{f3=gl.sel.primary()}if(gj.altKey){f2="rect";if(!f7){f3=new dN(f4,f4)}f4=cn(f5,gj,true,true);gk=-1}else{if(f2=="double"){var gh=aw(f5,f4);if(f5.display.shift||gl.extend){f3=fk(gl,f3,gh.anchor,gh.head)}else{f3=gh}}else{if(f2=="triple"){var ga=new dN(X(f4.line,0),fy(gl,X(f4.line+1,0)));if(f5.display.shift||gl.extend){f3=fk(gl,f3,ga.anchor,ga.head)}else{f3=ga}}else{f3=fk(gl,f3,f4)}}}if(!f7){gk=0;bT(gl,new fM([f3],0),N);f6=gl.sel}else{if(gk>-1){e(gl,gk,f3,N)}else{gk=gl.sel.ranges.length;bT(gl,cv(gl.sel.ranges.concat([f3]),gk),{scroll:false,origin:"*mouse"})}}var gf=f4;function ge(gw){if(ce(gf,gw)==0){return}gf=gw;if(f2=="rect"){var gn=[],gt=f5.options.tabSize;var gm=bS(e3(gl,f4.line).text,f4.ch,gt);var gz=bS(e3(gl,gw.line).text,gw.ch,gt);var go=Math.min(gm,gz),gx=Math.max(gm,gz);for(var gA=Math.min(f4.line,gw.line),gq=Math.min(f5.lastLine(),Math.max(f4.line,gw.line));gA<=gq;gA++){var gy=e3(gl,gA).text,gp=ee(gy,go,gt);if(go==gx){gn.push(new dN(X(gA,gp),X(gA,gp)))}else{if(gy.length>gp){gn.push(new dN(X(gA,gp),X(gA,ee(gy,gx,gt))))}}}if(!gn.length){gn.push(new dN(f4,f4))}bT(gl,cv(f6.ranges.slice(0,gk).concat(gn),gk),{origin:"*mouse",scroll:false});f5.scrollIntoView(gw)}else{var gu=f3;var gr=gu.anchor,gv=gw;if(f2!="single"){if(f2=="double"){var gs=aw(f5,gw)}else{var gs=new dN(X(gw.line,0),fy(gl,X(gw.line+1,0)))}if(ce(gs.anchor,gr)>0){gv=gs.head;gr=aq(gu.from(),gs.anchor)}else{gv=gs.anchor;gr=bw(gu.to(),gs.head)}}var gn=f6.ranges.slice(0);gn[gk]=new dN(fy(gl,gr),gv);bT(gl,cv(gn,gk),N)}}var gc=gg.wrapper.getBoundingClientRect();var f8=0;function gi(go){var gm=++f8;var gq=cn(f5,go,true,f2=="rect");if(!gq){return}if(ce(gq,gf)!=0){s(f5);ge(gq);var gp=b5(gg,gl);if(gq.line>=gp.to||gq.line<gp.from){setTimeout(cX(f5,function(){if(f8==gm){gi(go)}}),150)}}else{var gn=go.clientY<gc.top?-20:go.clientY>gc.bottom?20:0;if(gn){setTimeout(cX(f5,function(){if(f8!=gm){return}gg.scroller.scrollTop+=gn;gi(go)}),50)}}}function gb(gm){f8=Infinity;cD(gm);eo(f5);d1(document,"mousemove",gd);d1(document,"mouseup",f9);gl.history.lastSelOrigin=null}var gd=cX(f5,function(gm){if(!fC(gm)){gb(gm)}else{gi(gm)}});var f9=cX(f5,gb);bW(document,"mousemove",gd);bW(document,"mouseup",f9)}function f0(gd,f9,gb,gc,f5){try{var f3=f9.clientX,f2=f9.clientY}catch(f9){return false}if(f3>=Math.floor(gd.display.gutters.getBoundingClientRect().right)){return false}if(gc){cD(f9)}var ga=gd.display;var f8=ga.lineDiv.getBoundingClientRect();if(f2>f8.bottom||!e6(gd,gb)){return bK(f9)}f2-=f8.top-ga.viewOffset;for(var f6=0;f6<gd.options.gutters.length;++f6){var f7=ga.gutters.childNodes[f6];if(f7&&f7.getBoundingClientRect().right>=f3){var ge=bF(gd.doc,f2);var f4=gd.options.gutters[f6];f5(gd,gb,gd,ge,f4,f9);return bK(f9)}}}function m(f2,f3){return f0(f2,f3,"gutterClick",true,ad)}var af=0;function bg(f8){var ga=this;if(aP(ga,f8)||a7(ga.display,f8)){return}cD(f8);if(dA){af=+new Date}var f9=cn(ga,f8,true),f2=f8.dataTransfer.files;if(!f9||ai(ga)){return}if(f2&&f2.length&&window.FileReader&&window.File){var f4=f2.length,gb=Array(f4),f3=0;var f6=function(ge,gd){var gc=new FileReader;gc.onload=cX(ga,function(){gb[gd]=gc.result;if(++f3==f4){f9=fy(ga.doc,f9);var gf={from:f9,to:f9,text:aX(gb.join("\n")),origin:"paste"};bc(ga.doc,gf);eV(ga.doc,eH(f9,cS(gf)))}});gc.readAsText(ge)};for(var f7=0;f7<f4;++f7){f6(f2[f7],f7)}}else{if(ga.state.draggingText&&ga.doc.sel.contains(f9)>-1){ga.state.draggingText(f8);setTimeout(cu(eo,ga),20);return}try{var gb=f8.dataTransfer.getData("Text");if(gb){if(ga.state.draggingText&&!(b6?f8.metaKey:f8.ctrlKey)){var f5=ga.listSelections()}ed(ga.doc,eH(f9,f9));if(f5){for(var f7=0;f7<f5.length;++f7){aY(ga.doc,"",f5[f7].anchor,f5[f7].head,"drag")}}ga.replaceSelection(gb,"around","paste");eo(ga)}}catch(f8){}}}function R(f2,f4){if(dA&&(!f2.state.draggingText||+new Date-af<100)){ef(f4);return}if(aP(f2,f4)||a7(f2.display,f4)){return}f4.dataTransfer.setData("Text",f2.getSelection());if(f4.dataTransfer.setDragImage&&!aC){var f3=fL("img",null,null,"position: fixed; left: 0; top: 0;");f3.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(dR){f3.width=f3.height=1;f2.display.wrapper.appendChild(f3);f3._top=f3.offsetTop}f4.dataTransfer.setDragImage(f3,0,0);if(dR){f3.parentNode.removeChild(f3)}}}function O(f2,f3){if(Math.abs(f2.doc.scrollTop-f3)<2){return}f2.doc.scrollTop=f3;if(!co){dI(f2,{top:f3})}if(f2.display.scroller.scrollTop!=f3){f2.display.scroller.scrollTop=f3}if(f2.display.scrollbarV.scrollTop!=f3){f2.display.scrollbarV.scrollTop=f3}if(co){dI(f2)}d3(f2,100)}function bD(f2,f4,f3){if(f3?f4==f2.doc.scrollLeft:Math.abs(f2.doc.scrollLeft-f4)<2){return}f4=Math.min(f4,f2.display.scroller.scrollWidth-f2.display.scroller.clientWidth);f2.doc.scrollLeft=f4;et(f2);if(f2.display.scroller.scrollLeft!=f4){f2.display.scroller.scrollLeft=f4}if(f2.display.scrollbarH.scrollLeft!=f4){f2.display.scrollbarH.scrollLeft=f4}}var fa=0,cf=null;if(dA){cf=-0.53}else{if(co){cf=15}else{if(c7){cf=-0.7}else{if(aC){cf=-1/3}}}}function b(ga,f4){var gd=f4.wheelDeltaX,gc=f4.wheelDeltaY;if(gd==null&&f4.detail&&f4.axis==f4.HORIZONTAL_AXIS){gd=f4.detail}if(gc==null&&f4.detail&&f4.axis==f4.VERTICAL_AXIS){gc=f4.detail}else{if(gc==null){gc=f4.wheelDelta}}var f6=ga.display,f9=f6.scroller;if(!(gd&&f9.scrollWidth>f9.clientWidth||gc&&f9.scrollHeight>f9.clientHeight)){return}if(gc&&b6&&cV){outer:for(var gb=f4.target,f8=f6.view;gb!=f9;gb=gb.parentNode){for(var f3=0;f3<f8.length;f3++){if(f8[f3].node==gb){ga.display.currentWheelTarget=gb;break outer}}}}if(gd&&!co&&!dR&&cf!=null){if(gc){O(ga,Math.max(0,Math.min(f9.scrollTop+gc*cf,f9.scrollHeight-f9.clientHeight)))}bD(ga,Math.max(0,Math.min(f9.scrollLeft+gd*cf,f9.scrollWidth-f9.clientWidth)));cD(f4);f6.wheelStartX=null;return}if(gc&&cf!=null){var f2=gc*cf;var f7=ga.doc.scrollTop,f5=f7+f6.wrapper.clientHeight;if(f2<0){f7=Math.max(0,f7+f2-50)}else{f5=Math.min(ga.doc.height,f5+f2+50)}dI(ga,{top:f7,bottom:f5})}if(fa<20){if(f6.wheelStartX==null){f6.wheelStartX=f9.scrollLeft;f6.wheelStartY=f9.scrollTop;f6.wheelDX=gd;f6.wheelDY=gc;setTimeout(function(){if(f6.wheelStartX==null){return}var ge=f9.scrollLeft-f6.wheelStartX;var gg=f9.scrollTop-f6.wheelStartY;var gf=(gg&&f6.wheelDY&&gg/f6.wheelDY)||(ge&&f6.wheelDX&&ge/f6.wheelDX);f6.wheelStartX=f6.wheelStartY=null;if(!gf){return}cf=(cf*fa+gf)/(fa+1);++fa},200)}else{f6.wheelDX+=gd;f6.wheelDY+=gc}}}function fF(f3,f6,f2){if(typeof f6=="string"){f6=es[f6];if(!f6){return false}}if(f3.display.pollingFast&&cg(f3)){f3.display.pollingFast=false}var f5=f3.display.shift,f4=false;try{if(ai(f3)){f3.state.suppressEdits=true}if(f2){f3.display.shift=false}f4=f6(f3)!=b9}finally{f3.display.shift=f5;f3.state.suppressEdits=false}return f4}function dk(f2){var f3=f2.state.keyMaps.slice(0);if(f2.options.extraKeys){f3.push(f2.options.extraKeys)}f3.push(f2.options.keyMap);return f3}var ar;function e7(f2,f8){var f3=fJ(f2.options.keyMap),f6=f3.auto;clearTimeout(ar);if(f6&&!er(f8)){ar=setTimeout(function(){if(fJ(f2.options.keyMap)==f3){f2.options.keyMap=(f6.call?f6.call(null,f2):f6);fZ(f2)}},50)}var f5=fg(f8,true),f7=false;if(!f5){return false}var f4=dk(f2);if(f8.shiftKey){f7=i("Shift-"+f5,f4,function(f9){return fF(f2,f9,true)})||i(f5,f4,function(f9){if(typeof f9=="string"?/^go[A-Z]/.test(f9):f9.motion){return fF(f2,f9)}})}else{f7=i(f5,f4,function(f9){return fF(f2,f9)})}if(f7){cD(f8);p(f2);ad(f2,"keyHandled",f2,f5,f8)}return f7}function d7(f2,f5,f3){var f4=i("'"+f3+"'",dk(f2),function(f6){return fF(f2,f6,true)});if(f4){cD(f5);p(f2);ad(f2,"keyHandled",f2,"'"+f3+"'",f5)}return f4}var de=null;function q(f5){var f2=this;s(f2);if(aP(f2,f5)){return}if(dA&&l<11&&f5.keyCode==27){f5.returnValue=false}var f3=f5.keyCode;f2.display.shift=f3==16||f5.shiftKey;var f4=e7(f2,f5);if(dR){de=f4?f3:null;if(!f4&&f3==88&&!c5&&(b6?f5.metaKey:f5.ctrlKey)){f2.replaceSelection("",null,"cut")}}if(f3==18&&!/\bCodeMirror-crosshair\b/.test(f2.display.lineDiv.className)){av(f2)}}function av(f3){var f4=f3.display.lineDiv;fp(f4,"CodeMirror-crosshair");function f2(f5){if(f5.keyCode==18||!f5.altKey){f(f4,"CodeMirror-crosshair");d1(document,"keyup",f2);d1(document,"mouseover",f2)}}bW(document,"keyup",f2);bW(document,"mouseover",f2)}function be(f2){if(f2.keyCode==16){this.doc.sel.shift=false}aP(this,f2)}function cw(f6){var f2=this;if(aP(f2,f6)||f6.ctrlKey&&!f6.altKey||b6&&f6.metaKey){return}var f5=f6.keyCode,f3=f6.charCode;if(dR&&f5==de){de=null;cD(f6);return}if(((dR&&(!f6.which||f6.which<10))||a8)&&e7(f2,f6)){return}var f4=String.fromCharCode(f3==null?f5:f3);if(d7(f2,f6,f4)){return}if(dA&&l>=9){f2.display.inputHasSelection=null}C(f2)}function cz(f2){if(f2.options.readOnly=="nocursor"){return}if(!f2.state.focused){aD(f2,"focus",f2);f2.state.focused=true;fp(f2.display.wrapper,"CodeMirror-focused");if(!f2.curOp&&f2.display.selForContextMenu!=f2.doc.sel){fd(f2);if(cV){setTimeout(cu(fd,f2,true),0)}}}bl(f2);p(f2)}function aS(f2){if(f2.state.focused){aD(f2,"blur",f2);f2.state.focused=false;f(f2.display.wrapper,"CodeMirror-focused")}clearInterval(f2.display.blinker);setTimeout(function(){if(!f2.state.focused){f2.display.shift=false}},150)}function az(gb,f6){if(aP(gb,f6,"contextmenu")){return}var f8=gb.display;if(a7(f8,f6)||db(gb,f6)){return}var ga=cn(gb,f6),f2=f8.scroller.scrollTop;if(!ga||dR){return}var f5=gb.options.resetSelectionOnContextMenu;if(f5&&gb.doc.sel.contains(ga)==-1){cX(gb,bT)(gb.doc,eH(ga),Z)}var f7=f8.input.style.cssText;f8.inputDiv.style.position="absolute";f8.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(f6.clientY-5)+"px; left: "+(f6.clientX-5)+"px; z-index: 1000; background: "+(dA?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(cV){var gc=window.scrollY}eo(gb);if(cV){window.scrollTo(null,gc)}fd(gb);if(!gb.somethingSelected()){f8.input.value=f8.prevInput=" "}f8.selForContextMenu=gb.doc.sel;clearTimeout(f8.detectingSelectAll);function f4(){if(f8.input.selectionStart!=null){var gd=gb.somethingSelected();var ge=f8.input.value="\u200b"+(gd?f8.input.value:"");f8.prevInput=gd?"":"\u200b";f8.input.selectionStart=1;f8.input.selectionEnd=ge.length;f8.selForContextMenu=gb.doc.sel}}function f9(){f8.inputDiv.style.position="relative";f8.input.style.cssText=f7;if(dA&&l<9){f8.scrollbarV.scrollTop=f8.scroller.scrollTop=f2}bl(gb);if(f8.input.selectionStart!=null){if(!dA||(dA&&l<9)){f4()}var gd=0,ge=function(){if(f8.selForContextMenu==gb.doc.sel&&f8.input.selectionStart==0){cX(gb,es.selectAll)(gb)}else{if(gd++<10){f8.detectingSelectAll=setTimeout(ge,500)}else{fd(gb)}}};f8.detectingSelectAll=setTimeout(ge,200)}}if(dA&&l>=9){f4()}if(fT){ef(f6);var f3=function(){d1(window,"mouseup",f3);setTimeout(f9,20)};bW(window,"mouseup",f3)}else{setTimeout(f9,50)}}function db(f2,f3){if(!e6(f2,"gutterContextMenu")){return false}return f0(f2,f3,"gutterContextMenu",false,aD)}var cS=J.changeEnd=function(f2){if(!f2.text){return f2.to}return X(f2.from.line+f2.text.length-1,fw(f2.text).length+(f2.text.length==1?f2.from.ch:0))};function bY(f5,f4){if(ce(f5,f4.from)<0){return f5}if(ce(f5,f4.to)<=0){return cS(f4)}var f2=f5.line+f4.text.length-(f4.to.line-f4.from.line)-1,f3=f5.ch;if(f5.line==f4.to.line){f3+=cS(f4).ch-f4.to.ch}return X(f2,f3)}function e8(f5,f6){var f3=[];for(var f4=0;f4<f5.sel.ranges.length;f4++){var f2=f5.sel.ranges[f4];f3.push(new dN(bY(f2.anchor,f6),bY(f2.head,f6)))}return cv(f3,f5.sel.primIndex)}function bt(f4,f3,f2){if(f4.line==f3.line){return X(f2.line,f4.ch-f3.ch+f2.ch)}else{return X(f2.line+(f4.line-f3.line),f4.ch)}}function ae(gc,f9,f3){var f4=[];var f2=X(gc.first,0),gd=f2;for(var f6=0;f6<f9.length;f6++){var f8=f9[f6];var gb=bt(f8.from,f2,gd);var ga=bt(cS(f8),f2,gd);f2=f8.to;gd=ga;if(f3=="around"){var f7=gc.sel.ranges[f6],f5=ce(f7.head,f7.anchor)<0;f4[f6]=new dN(f5?ga:gb,f5?gb:ga)}else{f4[f6]=new dN(gb,gb)}}return new fM(f4,gc.sel.primIndex)}function dG(f3,f5,f4){var f2={canceled:false,from:f5.from,to:f5.to,text:f5.text,origin:f5.origin,cancel:function(){this.canceled=true}};if(f4){f2.update=function(f9,f8,f7,f6){if(f9){this.from=fy(f3,f9)}if(f8){this.to=fy(f3,f8)}if(f7){this.text=f7}if(f6!==undefined){this.origin=f6}}}aD(f3,"beforeChange",f3,f2);if(f3.cm){aD(f3.cm,"beforeChange",f3.cm,f2)}if(f2.canceled){return null}return{from:f2.from,to:f2.to,text:f2.text,origin:f2.origin}}function bc(f5,f6,f4){if(f5.cm){if(!f5.cm.curOp){return cX(f5.cm,bc)(f5,f6,f4)}if(f5.cm.state.suppressEdits){return}}if(e6(f5,"beforeChange")||f5.cm&&e6(f5.cm,"beforeChange")){f6=dG(f5,f6,true);if(!f6){return}}var f3=fW&&!f4&&cE(f5,f6.from,f6.to);if(f3){for(var f2=f3.length-1;f2>=0;--f2){L(f5,{from:f3[f2].from,to:f3[f2].to,text:f2?[""]:f6.text})}}else{L(f5,f6)}}function L(f4,f5){if(f5.text.length==1&&f5.text[0]==""&&ce(f5.from,f5.to)==0){return}var f3=e8(f4,f5);fB(f4,f5,f3,f4.cm?f4.cm.curOp.id:NaN);d2(f4,f5,f3,d8(f4,f5));var f2=[];dW(f4,function(f7,f6){if(!f6&&dc(f2,f7.history)==-1){dv(f7.history,f5);f2.push(f7.history)}d2(f7,f5,null,d8(f7,f5))})}function b7(gd,gb,gf){if(gd.cm&&gd.cm.state.suppressEdits){return}var ga=gd.history,f4,f6=gd.sel;var f2=gb=="undo"?ga.done:ga.undone,ge=gb=="undo"?ga.undone:ga.done;for(var f7=0;f7<f2.length;f7++){f4=f2[f7];if(gf?f4.ranges&&!f4.equals(gd.sel):!f4.ranges){break}}if(f7==f2.length){return}ga.lastOrigin=ga.lastSelOrigin=null;for(;;){f4=f2.pop();if(f4.ranges){cK(f4,ge);if(gf&&!f4.equals(gd.sel)){bT(gd,f4,{clearRedo:false});return}f6=f4}else{break}}var f9=[];cK(f6,ge);ge.push({changes:f9,generation:ga.generation});ga.generation=f4.generation||++ga.maxGeneration;var f5=e6(gd,"beforeChange")||gd.cm&&e6(gd.cm,"beforeChange");for(var f7=f4.changes.length-1;f7>=0;--f7){var gc=f4.changes[f7];gc.origin=gb;if(f5&&!dG(gd,gc,false)){f2.length=0;return}f9.push(dl(gd,gc));var f3=f7?e8(gd,gc):fw(f2);d2(gd,gc,f3,dY(gd,gc));if(!f7&&gd.cm){gd.cm.scrollIntoView({from:gc.from,to:cS(gc)})}var f8=[];dW(gd,function(gh,gg){if(!gg&&dc(f8,gh.history)==-1){dv(gh.history,gc);f8.push(gh.history)}d2(gh,gc,null,dY(gh,gc))})}}function fb(f3,f5){if(f5==0){return}f3.first+=f5;f3.sel=new fM(bR(f3.sel.ranges,function(f6){return new dN(X(f6.anchor.line+f5,f6.anchor.ch),X(f6.head.line+f5,f6.head.ch))}),f3.sel.primIndex);if(f3.cm){ag(f3.cm,f3.first,f3.first-f5,f5);for(var f4=f3.cm.display,f2=f4.viewFrom;f2<f4.viewTo;f2++){S(f3.cm,f2,"gutter")}}}function d2(f6,f7,f5,f3){if(f6.cm&&!f6.cm.curOp){return cX(f6.cm,d2)(f6,f7,f5,f3)}if(f7.to.line<f6.first){fb(f6,f7.text.length-1-(f7.to.line-f7.from.line));return}if(f7.from.line>f6.lastLine()){return}if(f7.from.line<f6.first){var f2=f7.text.length-1-(f6.first-f7.from.line);fb(f6,f2);f7={from:X(f6.first,0),to:X(f7.to.line+f2,f7.to.ch),text:[fw(f7.text)],origin:f7.origin}}var f4=f6.lastLine();if(f7.to.line>f4){f7={from:f7.from,to:X(f4,e3(f6,f4).text.length),text:[f7.text[0]],origin:f7.origin}}f7.removed=fN(f6,f7.from,f7.to);if(!f5){f5=e8(f6,f7)}if(f6.cm){aI(f6.cm,f7,f3)}else{fn(f6,f7,f3)}ed(f6,f5,Z)}function aI(gd,f9,f7){var gc=gd.doc,f8=gd.display,ga=f9.from,gb=f9.to;var f2=false,f6=ga.line;if(!gd.options.lineWrapping){f6=bM(z(e3(gc,ga.line)));gc.iter(f6,gb.line+1,function(gf){if(gf==f8.maxLine){f2=true;return true}})}if(gc.sel.contains(f9.from,f9.to)>-1){W(gd)}fn(gc,f9,f7,ba(gd));if(!gd.options.lineWrapping){gc.iter(f6,ga.line+f9.text.length,function(gg){var gf=ea(gg);if(gf>f8.maxLineLength){f8.maxLine=gg;f8.maxLineLength=gf;f8.maxLineChanged=true;f2=false}});if(f2){gd.curOp.updateMaxLine=true}}gc.frontier=Math.min(gc.frontier,ga.line);d3(gd,400);var ge=f9.text.length-(gb.line-ga.line)-1;if(ga.line==gb.line&&f9.text.length==1&&!dH(gd.doc,f9)){S(gd,ga.line,"text")}else{ag(gd,ga.line,gb.line+1,ge)}var f4=e6(gd,"changes"),f5=e6(gd,"change");if(f5||f4){var f3={from:ga,to:gb,text:f9.text,removed:f9.removed,origin:f9.origin};if(f5){ad(gd,"change",gd,f3)}if(f4){(gd.curOp.changeObjs||(gd.curOp.changeObjs=[])).push(f3)}}gd.display.selForContextMenu=null}function aY(f5,f4,f7,f6,f2){if(!f6){f6=f7}if(ce(f6,f7)<0){var f3=f6;f6=f7;f7=f3}if(typeof f4=="string"){f4=aX(f4)}bc(f5,{from:f7,to:f6,text:f4,origin:f2})}function dV(f3,f6){var f7=f3.display,f4=f7.sizer.getBoundingClientRect(),f2=null;if(f6.top+f4.top<0){f2=true}else{if(f6.bottom+f4.top>(window.innerHeight||document.documentElement.clientHeight)){f2=false}}if(f2!=null&&!fj){var f5=fL("div","\u200b",null,"position: absolute; top: "+(f6.top-f7.viewOffset-eW(f3.display))+"px; height: "+(f6.bottom-f6.top+bh)+"px; left: "+f6.left+"px; width: 2px;");f3.display.lineSpace.appendChild(f5);f5.scrollIntoView(f2);f3.display.lineSpace.removeChild(f5)}}function F(gb,f9,f6,f5){if(f5==null){f5=0}for(;;){var f7=false,ga=dJ(gb,f9);var f2=!f6||f6==f9?ga:dJ(gb,f6);var f4=I(gb,Math.min(ga.left,f2.left),Math.min(ga.top,f2.top)-f5,Math.max(ga.left,f2.left),Math.max(ga.bottom,f2.bottom)+f5);var f8=gb.doc.scrollTop,f3=gb.doc.scrollLeft;if(f4.scrollTop!=null){O(gb,f4.scrollTop);if(Math.abs(gb.doc.scrollTop-f8)>1){f7=true}}if(f4.scrollLeft!=null){bD(gb,f4.scrollLeft);if(Math.abs(gb.doc.scrollLeft-f3)>1){f7=true}}if(!f7){return ga}}}function G(f2,f4,f6,f3,f5){var f7=I(f2,f4,f6,f3,f5);if(f7.scrollTop!=null){O(f2,f7.scrollTop)}if(f7.scrollLeft!=null){bD(f2,f7.scrollLeft)}}function I(ge,f5,gd,f3,gc){var ga=ge.display,f8=aU(ge.display);if(gd<0){gd=0}var f6=ge.curOp&&ge.curOp.scrollTop!=null?ge.curOp.scrollTop:ga.scroller.scrollTop;var gg=ga.scroller.clientHeight-bh,gi={};if(gc-gd>gg){gc=gd+gg}var f4=ge.doc.height+bH(ga);var f2=gd<f8,f9=gc>f4-f8;if(gd<f6){gi.scrollTop=f2?0:gd}else{if(gc>f6+gg){var gb=Math.min(gd,(f9?f4:gc)-gg);if(gb!=f6){gi.scrollTop=gb}}}var gh=ge.curOp&&ge.curOp.scrollLeft!=null?ge.curOp.scrollLeft:ga.scroller.scrollLeft;var gf=ga.scroller.clientWidth-bh-ga.gutters.offsetWidth;var f7=f3-f5>gf;if(f7){f3=gd+gg}if(f5<10){gi.scrollLeft=0}else{if(f5<gh){gi.scrollLeft=Math.max(0,f5-(f7?0:10))}else{if(f3>gf+gh-3){gi.scrollLeft=f3+(f7?0:10)-gf}}}return gi}function cI(f2,f4,f3){if(f4!=null||f3!=null){fr(f2)}if(f4!=null){f2.curOp.scrollLeft=(f2.curOp.scrollLeft==null?f2.doc.scrollLeft:f2.curOp.scrollLeft)+f4}if(f3!=null){f2.curOp.scrollTop=(f2.curOp.scrollTop==null?f2.doc.scrollTop:f2.curOp.scrollTop)+f3}}function fv(f2){fr(f2);var f3=f2.getCursor(),f5=f3,f4=f3;if(!f2.options.lineWrapping){f5=f3.ch?X(f3.line,f3.ch-1):f3;f4=X(f3.line,f3.ch+1)}f2.curOp.scrollToPos={from:f5,to:f4,margin:f2.options.cursorScrollMargin,isCursor:true}}function fr(f2){var f4=f2.curOp.scrollToPos;if(f4){f2.curOp.scrollToPos=null;var f6=dy(f2,f4.from),f5=dy(f2,f4.to);var f3=I(f2,Math.min(f6.left,f5.left),Math.min(f6.top,f5.top)-f4.margin,Math.max(f6.right,f5.right),Math.max(f6.bottom,f5.bottom)+f4.margin);f2.scrollTo(f3.scrollLeft,f3.scrollTop)}}function ac(gf,f5,ge,f4){var gd=gf.doc,f3;if(ge==null){ge="add"}if(ge=="smart"){if(!gd.mode.indent){ge="prev"}else{f3=ds(gf,f5)}}var f9=gf.options.tabSize;var gg=e3(gd,f5),f8=bS(gg.text,null,f9);if(gg.stateAfter){gg.stateAfter=null}var f2=gg.text.match(/^\s*/)[0],gb;if(!f4&&!/\S/.test(gg.text)){gb=0;ge="not"}else{if(ge=="smart"){gb=gd.mode.indent(f3,gg.text.slice(f2.length),gg.text);if(gb==b9||gb>150){if(!f4){return}ge="prev"}}}if(ge=="prev"){if(f5>gd.first){gb=bS(e3(gd,f5-1).text,null,f9)}else{gb=0}}else{if(ge=="add"){gb=f8+gf.options.indentUnit}else{if(ge=="subtract"){gb=f8-gf.options.indentUnit}else{if(typeof ge=="number"){gb=f8+ge}}}}gb=Math.max(0,gb);var gc="",ga=0;if(gf.options.indentWithTabs){for(var f6=Math.floor(gb/f9);f6;--f6){ga+=f9;gc+="\t"}}if(ga<gb){gc+=cp(gb-ga)}if(gc!=f2){aY(gd,gc,X(f5,0),X(f5,f2.length),"+input")}else{for(var f6=0;f6<gd.sel.ranges.length;f6++){var f7=gd.sel.ranges[f6];if(f7.head.line==f5&&f7.head.ch<f2.length){var ga=X(f5,f2.length);e(gd,f6,new dN(ga,ga));break}}}gg.stateAfter=null}function en(f5,f4,f2,f7){var f6=f4,f3=f4;if(typeof f4=="number"){f3=e3(f5,c0(f5,f4))}else{f6=bM(f4)}if(f6==null){return null}if(f7(f3,f6)&&f5.cm){S(f5.cm,f6,f2)}return f3}function eM(f2,f8){var f3=f2.doc.sel.ranges,f6=[];for(var f5=0;f5<f3.length;f5++){var f4=f8(f3[f5]);while(f6.length&&ce(f4.from,fw(f6).to)<=0){var f7=f6.pop();if(ce(f7.from,f4.from)<0){f4.from=f7.from;break}}f6.push(f4)}cJ(f2,function(){for(var f9=f6.length-1;f9>=0;f9--){aY(f2.doc,"",f6[f9].from,f6[f9].to,"+delete")}fv(f2)})}function bv(gk,f6,ge,gd,f8){var gb=f6.line,gc=f6.ch,gj=ge;var f3=e3(gk,gb);var gh=true;function gi(){var gl=gb+ge;if(gl<gk.first||gl>=gk.first+gk.size){return(gh=false)}gb=gl;return f3=e3(gk,gl)}function gg(gm){var gl=(f8?v:ah)(f3,gc,ge,true);if(gl==null){if(!gm&&gi()){if(f8){gc=(ge<0?cP:cC)(f3)}else{gc=ge<0?f3.text.length:0}}else{return(gh=false)}}else{gc=gl}return true}if(gd=="char"){gg()}else{if(gd=="column"){gg(true)}else{if(gd=="word"||gd=="group"){var gf=null,f9=gd=="group";var f2=gk.cm&&gk.cm.getHelper(f6,"wordChars");for(var f7=true;;f7=false){if(ge<0&&!gg(!f7)){break}var f4=f3.text.charAt(gc)||"\n";var f5=cy(f4,f2)?"w":f9&&f4=="\n"?"n":!f9||/\s/.test(f4)?null:"p";if(f9&&!f7&&!f5){f5="s"}if(gf&&gf!=f5){if(ge<0){ge=1;gg()}break}if(f5){gf=f5}if(ge>0&&!gg(!f7)){break}}}}}var ga=bU(gk,X(gb,gc),gj,true);if(!gh){ga.hitSide=true}return ga}function bp(ga,f5,f2,f9){var f8=ga.doc,f7=f5.left,f6;if(f9=="page"){var f4=Math.min(ga.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);f6=f5.top+f2*(f4-(f2<0?1.5:0.5)*aU(ga.display))}else{if(f9=="line"){f6=f2>0?f5.bottom+3:f5.top-3}}for(;;){var f3=fD(ga,f7,f6);if(!f3.outside){break}if(f2<0?f6<=0:f6>=f8.height){f3.hitSide=true;break}f6+=f2*5}return f3}function aw(f8,f6){var f7=f8.doc,f9=e3(f7,f6.line).text;var f3=f6.ch,f5=f6.ch;if(f9){var f4=f8.getHelper(f6,"wordChars");if((f6.xRel<0||f5==f9.length)&&f3){--f3}else{++f5}var ga=f9.charAt(f3);var f2=cy(ga,f4)?function(gb){return cy(gb,f4)}:/\s/.test(ga)?function(gb){return/\s/.test(gb)}:function(gb){return !/\s/.test(gb)&&!cy(gb)};while(f3>0&&f2(f9.charAt(f3-1))){--f3}while(f5<f9.length&&f2(f9.charAt(f5))){++f5}}return new dN(X(f6.line,f3),X(f6.line,f5))}J.prototype={constructor:J,focus:function(){window.focus();eo(this);C(this)},setOption:function(f4,f5){var f3=this.options,f2=f3[f4];if(f3[f4]==f5&&f4!="mode"){return}f3[f4]=f5;if(bb.hasOwnProperty(f4)){cX(this,bb[f4])(this,f5,f2)}},getOption:function(f2){return this.options[f2]},getDoc:function(){return this.doc},addKeyMap:function(f3,f2){this.state.keyMaps[f2?"push":"unshift"](f3)},removeKeyMap:function(f3){var f4=this.state.keyMaps;for(var f2=0;f2<f4.length;++f2){if(f4[f2]==f3||(typeof f4[f2]!="string"&&f4[f2].name==f3)){f4.splice(f2,1);return true}}},addOverlay:c3(function(f2,f3){var f4=f2.token?f2:J.getMode(this.options,f2);if(f4.startState){throw new Error("Overlays may not be stateful.")}this.state.overlays.push({mode:f4,modeSpec:f2,opaque:f3&&f3.opaque});this.state.modeGen++;ag(this)}),removeOverlay:c3(function(f2){var f4=this.state.overlays;for(var f3=0;f3<f4.length;++f3){var f5=f4[f3].modeSpec;if(f5==f2||typeof f2=="string"&&f5.name==f2){f4.splice(f3,1);this.state.modeGen++;ag(this);return}}}),indentLine:c3(function(f4,f2,f3){if(typeof f2!="string"&&typeof f2!="number"){if(f2==null){f2=this.options.smartIndent?"smart":"prev"}else{f2=f2?"add":"subtract"}}if(b8(this.doc,f4)){ac(this,f4,f2,f3)}}),indentSelection:c3(function(gb){var f2=this.doc.sel.ranges,f5=-1;for(var f7=0;f7<f2.length;f7++){var f8=f2[f7];if(!f8.empty()){var f9=f8.from(),ga=f8.to();var f3=Math.max(f5,f9.line);f5=Math.min(this.lastLine(),ga.line-(ga.ch?0:1))+1;for(var f6=f3;f6<f5;++f6){ac(this,f6,gb)}var f4=this.doc.sel.ranges;if(f9.ch==0&&f2.length==f4.length&&f4[f7].from().ch>0){e(this.doc,f7,new dN(f9,f4[f7].to()),Z)}}else{if(f8.head.line>f5){ac(this,f8.head.line,gb,true);f5=f8.head.line;if(f7==this.doc.sel.primIndex){fv(this)}}}}}),getTokenAt:function(f9,f3){var f6=this.doc;f9=fy(f6,f9);var f5=ds(this,f9.line,f3),f8=this.doc.mode;var f2=e3(f6,f9.line);var f7=new eI(f2.text,this.options.tabSize);while(f7.pos<f9.ch&&!f7.eol()){f7.start=f7.pos;var f4=eq(f8,f7,f5)}return{start:f7.start,end:f7.pos,string:f7.current(),type:f4||null,state:f5}},getTokenTypeAt:function(f9){f9=fy(this.doc,f9);var f5=c1(this,e3(this.doc,f9.line));var f7=0,f8=(f5.length-1)/2,f4=f9.ch;var f3;if(f4==0){f3=f5[2]}else{for(;;){var f2=(f7+f8)>>1;if((f2?f5[f2*2-1]:0)>=f4){f8=f2}else{if(f5[f2*2+1]<f4){f7=f2+1}else{f3=f5[f2*2+2];break}}}}var f6=f3?f3.indexOf("cm-overlay "):-1;return f6<0?f3:f6==0?null:f3.slice(0,f6-1)},getModeAt:function(f3){var f2=this.doc.mode;if(!f2.innerMode){return f2}return J.innerMode(f2,this.getTokenAt(f3).state).mode},getHelper:function(f3,f2){return this.getHelpers(f3,f2)[0]},getHelpers:function(f9,f4){var f5=[];if(!fc.hasOwnProperty(f4)){return fc}var f2=fc[f4],f8=this.getModeAt(f9);if(typeof f8[f4]=="string"){if(f2[f8[f4]]){f5.push(f2[f8[f4]])}}else{if(f8[f4]){for(var f3=0;f3<f8[f4].length;f3++){var f7=f2[f8[f4][f3]];if(f7){f5.push(f7)}}}else{if(f8.helperType&&f2[f8.helperType]){f5.push(f2[f8.helperType])}else{if(f2[f8.name]){f5.push(f2[f8.name])}}}}for(var f3=0;f3<f2._global.length;f3++){var f6=f2._global[f3];if(f6.pred(f8,this)&&dc(f5,f6.val)==-1){f5.push(f6.val)}}return f5},getStateAfter:function(f3,f2){var f4=this.doc;f3=c0(f4,f3==null?f4.first+f4.size-1:f3);return ds(this,f3+1,f2)},cursorCoords:function(f5,f3){var f4,f2=this.doc.sel.primary();if(f5==null){f4=f2.head}else{if(typeof f5=="object"){f4=fy(this.doc,f5)}else{f4=f5?f2.from():f2.to()}}return dJ(this,f4,f3||"page")},charCoords:function(f3,f2){return cG(this,fy(this.doc,f3),f2||"page")},coordsChar:function(f2,f3){f2=fY(this,f2,f3||"page");return fD(this,f2.left,f2.top)},lineAtHeight:function(f2,f3){f2=fY(this,{top:f2,left:0},f3||"page").top;return bF(this.doc,f2+this.display.viewOffset)},heightAtLine:function(f3,f6){var f2=false,f5=this.doc.first+this.doc.size-1;if(f3<this.doc.first){f3=this.doc.first}else{if(f3>f5){f3=f5;f2=true}}var f4=e3(this.doc,f3);return eF(this,f4,{top:0,left:0},f6||"page").top+(f2?this.doc.height-bL(f4):0)},defaultTextHeight:function(){return aU(this.display)},defaultCharWidth:function(){return du(this.display)},setGutterMarker:c3(function(f2,f3,f4){return en(this.doc,f2,"gutter",function(f5){var f6=f5.gutterMarkers||(f5.gutterMarkers={});f6[f3]=f4;if(!f4&&eJ(f6)){f5.gutterMarkers=null}return true})}),clearGutter:c3(function(f4){var f2=this,f5=f2.doc,f3=f5.first;f5.iter(function(f6){if(f6.gutterMarkers&&f6.gutterMarkers[f4]){f6.gutterMarkers[f4]=null;S(f2,f3,"gutter");if(eJ(f6.gutterMarkers)){f6.gutterMarkers=null}}++f3})}),addLineWidget:c3(function(f4,f3,f2){return bG(this,f4,f3,f2)}),removeLineWidget:function(f2){f2.clear()},lineInfo:function(f2){if(typeof f2=="number"){if(!b8(this.doc,f2)){return null}var f3=f2;f2=e3(this.doc,f2);if(!f2){return null}}else{var f3=bM(f2);if(f3==null){return null}}return{line:f3,handle:f2,text:f2.text,gutterMarkers:f2.gutterMarkers,textClass:f2.textClass,bgClass:f2.bgClass,wrapClass:f2.wrapClass,widgets:f2.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(f7,f4,f9,f5,gb){var f6=this.display;f7=dJ(this,fy(this.doc,f7));var f8=f7.bottom,f3=f7.left;f4.style.position="absolute";f6.sizer.appendChild(f4);if(f5=="over"){f8=f7.top}else{if(f5=="above"||f5=="near"){var f2=Math.max(f6.wrapper.clientHeight,this.doc.height),ga=Math.max(f6.sizer.clientWidth,f6.lineSpace.clientWidth);if((f5=="above"||f7.bottom+f4.offsetHeight>f2)&&f7.top>f4.offsetHeight){f8=f7.top-f4.offsetHeight}else{if(f7.bottom+f4.offsetHeight<=f2){f8=f7.bottom}}if(f3+f4.offsetWidth>ga){f3=ga-f4.offsetWidth}}}f4.style.top=f8+"px";f4.style.left=f4.style.right="";if(gb=="right"){f3=f6.sizer.clientWidth-f4.offsetWidth;f4.style.right="0px"}else{if(gb=="left"){f3=0}else{if(gb=="middle"){f3=(f6.sizer.clientWidth-f4.offsetWidth)/2}}f4.style.left=f3+"px"}if(f9){G(this,f3,f8,f3+f4.offsetWidth,f8+f4.offsetHeight)}},triggerOnKeyDown:c3(q),triggerOnKeyPress:c3(cw),triggerOnKeyUp:be,execCommand:function(f2){if(es.hasOwnProperty(f2)){return es[f2](this)}},findPosH:function(f8,f5,f6,f3){var f2=1;if(f5<0){f2=-1;f5=-f5}for(var f4=0,f7=fy(this.doc,f8);f4<f5;++f4){f7=bv(this.doc,f7,f2,f6,f3);if(f7.hitSide){break}}return f7},moveH:c3(function(f3,f4){var f2=this;f2.extendSelectionsBy(function(f5){if(f2.display.shift||f2.doc.extend||f5.empty()){return bv(f2.doc,f5.head,f3,f4,f2.options.rtlMoveVisually)}else{return f3<0?f5.from():f5.to()}},cR)}),deleteH:c3(function(f2,f3){var f4=this.doc.sel,f5=this.doc;if(f4.somethingSelected()){f5.replaceSelection("",null,"+delete")}else{eM(this,function(f7){var f6=bv(f5,f7.head,f2,f3,false);return f2<0?{from:f6,to:f7.head}:{from:f7.head,to:f6}})}}),findPosV:function(f7,f4,f8,ga){var f2=1,f6=ga;if(f4<0){f2=-1;f4=-f4}for(var f3=0,f9=fy(this.doc,f7);f3<f4;++f3){var f5=dJ(this,f9,"div");if(f6==null){f6=f5.left}else{f5.left=f6}f9=bp(this,f5,f2,f8);if(f9.hitSide){break}}return f9},moveV:c3(function(f3,f5){var f2=this,f7=this.doc,f6=[];var f8=!f2.display.shift&&!f7.extend&&f7.sel.somethingSelected();f7.extendSelectionsBy(function(f9){if(f8){return f3<0?f9.from():f9.to()}var gb=dJ(f2,f9.head,"div");if(f9.goalColumn!=null){gb.left=f9.goalColumn}f6.push(gb.left);var ga=bp(f2,gb,f3,f5);if(f5=="page"&&f9==f7.sel.primary()){cI(f2,null,cG(f2,ga,"div").top-gb.top)}return ga},cR);if(f6.length){for(var f4=0;f4<f7.sel.ranges.length;f4++){f7.sel.ranges[f4].goalColumn=f6[f4]}}}),toggleOverwrite:function(f2){if(f2!=null&&f2==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){fp(this.display.cursorDiv,"CodeMirror-overwrite")}else{f(this.display.cursorDiv,"CodeMirror-overwrite")}aD(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return dD()==this.display.input},scrollTo:c3(function(f2,f3){if(f2!=null||f3!=null){fr(this)}if(f2!=null){this.curOp.scrollLeft=f2}if(f3!=null){this.curOp.scrollTop=f3}}),getScrollInfo:function(){var f2=this.display.scroller,f3=bh;return{left:f2.scrollLeft,top:f2.scrollTop,height:f2.scrollHeight-f3,width:f2.scrollWidth-f3,clientHeight:f2.clientHeight-f3,clientWidth:f2.clientWidth-f3}},scrollIntoView:c3(function(f3,f4){if(f3==null){f3={from:this.doc.sel.primary().head,to:null};if(f4==null){f4=this.options.cursorScrollMargin}}else{if(typeof f3=="number"){f3={from:X(f3,0),to:null}}else{if(f3.from==null){f3={from:f3,to:null}}}}if(!f3.to){f3.to=f3.from}f3.margin=f4||0;if(f3.from.line!=null){fr(this);this.curOp.scrollToPos=f3}else{var f2=I(this,Math.min(f3.from.left,f3.to.left),Math.min(f3.from.top,f3.to.top)-f3.margin,Math.max(f3.from.right,f3.to.right),Math.max(f3.from.bottom,f3.to.bottom)+f3.margin);this.scrollTo(f2.scrollLeft,f2.scrollTop)}}),setSize:c3(function(f5,f3){var f2=this;function f4(f7){return typeof f7=="number"||/^\d+$/.test(String(f7))?f7+"px":f7}if(f5!=null){f2.display.wrapper.style.width=f4(f5)}if(f3!=null){f2.display.wrapper.style.height=f4(f3)}if(f2.options.lineWrapping){aM(this)}var f6=f2.display.viewFrom;f2.doc.iter(f6,f2.display.viewTo,function(f7){if(f7.widgets){for(var f8=0;f8<f7.widgets.length;f8++){if(f7.widgets[f8].noHScroll){S(f2,f6,"widget");break}}}++f6});f2.curOp.forceUpdate=true;aD(f2,"refresh",this)}),operation:function(f2){return cJ(this,f2)},refresh:c3(function(){var f2=this.display.cachedTextHeight;ag(this);this.curOp.forceUpdate=true;aj(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);cZ(this);if(f2==null||Math.abs(f2-aU(this.display))>0.5){Y(this)}aD(this,"refresh",this)}),swapDoc:c3(function(f3){var f2=this.doc;f2.cm=null;dZ(this,f3);aj(this);fd(this);this.scrollTo(f3.scrollLeft,f3.scrollTop);ad(this,"swapDoc",this,f2);return f2}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};bx(J);var eS=J.defaults={};var bb=J.optionHandlers={};function t(f2,f5,f4,f3){J.defaults[f2]=f5;if(f4){bb[f2]=f3?function(f6,f8,f7){if(f7!=cb){f4(f6,f8,f7)}}:f4}}var cb=J.Init={toString:function(){return"CodeMirror.Init"}};t("value","",function(f2,f3){f2.setValue(f3)},true);t("mode",null,function(f2,f3){f2.doc.modeOption=f3;bq(f2)},true);t("indentUnit",2,bq,true);t("indentWithTabs",false);t("smartIndent",true);t("tabSize",4,function(f2){d9(f2);aj(f2);ag(f2)},true);t("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(f2,f3){f2.options.specialChars=new RegExp(f3.source+(f3.test("\t")?"":"|\t"),"g");f2.refresh()},true);t("specialCharPlaceholder",e0,function(f2){f2.refresh()},true);t("electricChars",true);t("rtlMoveVisually",!aN);t("wholeLineUpdateBefore",true);t("theme","default",function(f2){cL(f2);dm(f2)},true);t("keyMap","default",fZ);t("extraKeys",null);t("lineWrapping",false,ev,true);t("gutters",[],function(f2){cd(f2.options);dm(f2)},true);t("fixedGutter",true,function(f2,f3){f2.display.gutters.style.left=f3?dM(f2.display)+"px":"0";f2.refresh()},true);t("coverGutterNextToScrollbar",false,eN,true);t("lineNumbers",false,function(f2){cd(f2.options);dm(f2)},true);t("firstLineNumber",1,dm,true);t("lineNumberFormatter",function(f2){return f2},dm,true);t("showCursorWhenSelecting",false,bB,true);t("resetSelectionOnContextMenu",true);t("readOnly",false,function(f2,f3){if(f3=="nocursor"){aS(f2);f2.display.input.blur();f2.display.disabled=true}else{f2.display.disabled=false;if(!f3){fd(f2)}}});t("disableInput",false,function(f2,f3){if(!f3){fd(f2)}},true);t("dragDrop",true);t("cursorBlinkRate",530);t("cursorScrollMargin",0);t("cursorHeight",1,bB,true);t("singleCursorHeightPerLine",true,bB,true);t("workTime",100);t("workDelay",100);t("flattenSpans",true,d9,true);t("addModeClass",false,d9,true);t("pollInterval",100);t("undoDepth",200,function(f2,f3){f2.doc.history.undoDepth=f3});t("historyEventDelay",1250);t("viewportMargin",10,function(f2){f2.refresh()},true);t("maxHighlightLength",10000,d9,true);t("moveInputWithCursor",true,function(f2,f3){if(!f3){f2.display.inputDiv.style.top=f2.display.inputDiv.style.left=0}});t("tabindex",null,function(f2,f3){f2.display.input.tabIndex=f3||""});t("autofocus",null);var dj=J.modes={},aQ=J.mimeModes={};J.defineMode=function(f2,f4){if(!J.defaults.mode&&f2!="null"){J.defaults.mode=f2}if(arguments.length>2){f4.dependencies=[];for(var f3=2;f3<arguments.length;++f3){f4.dependencies.push(arguments[f3])}}dj[f2]=f4};J.defineMIME=function(f3,f2){aQ[f3]=f2};J.resolveMode=function(f2){if(typeof f2=="string"&&aQ.hasOwnProperty(f2)){f2=aQ[f2]}else{if(f2&&typeof f2.name=="string"&&aQ.hasOwnProperty(f2.name)){var f3=aQ[f2.name];if(typeof f3=="string"){f3={name:f3}}f2=ck(f3,f2);f2.name=f3.name}else{if(typeof f2=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(f2)){return J.resolveMode("application/xml")}}}if(typeof f2=="string"){return{name:f2}}else{return f2||{name:"null"}}};J.getMode=function(f3,f2){var f2=J.resolveMode(f2);var f5=dj[f2.name];if(!f5){return J.getMode(f3,"text/plain")}var f6=f5(f3,f2);if(dg.hasOwnProperty(f2.name)){var f4=dg[f2.name];for(var f7 in f4){if(!f4.hasOwnProperty(f7)){continue}if(f6.hasOwnProperty(f7)){f6["_"+f7]=f6[f7]}f6[f7]=f4[f7]}}f6.name=f2.name;if(f2.helperType){f6.helperType=f2.helperType}if(f2.modeProps){for(var f7 in f2.modeProps){f6[f7]=f2.modeProps[f7]}}return f6};J.defineMode("null",function(){return{token:function(f2){f2.skipToEnd()}}});J.defineMIME("text/plain","null");var dg=J.modeExtensions={};J.extendMode=function(f4,f3){var f2=dg.hasOwnProperty(f4)?dg[f4]:(dg[f4]={});aL(f3,f2)};J.defineExtension=function(f2,f3){J.prototype[f2]=f3};J.defineDocExtension=function(f2,f3){at.prototype[f2]=f3};J.defineOption=t;var a5=[];J.defineInitHook=function(f2){a5.push(f2)};var fc=J.helpers={};J.registerHelper=function(f3,f2,f4){if(!fc.hasOwnProperty(f3)){fc[f3]=J[f3]={_global:[]}}fc[f3][f2]=f4};J.registerGlobalHelper=function(f4,f3,f2,f5){J.registerHelper(f4,f3,f5);fc[f4]._global.push({pred:f2,val:f5})};var b2=J.copyState=function(f5,f2){if(f2===true){return f2}if(f5.copyState){return f5.copyState(f2)}var f4={};for(var f6 in f2){var f3=f2[f6];if(f3 instanceof Array){f3=f3.concat([])}f4[f6]=f3}return f4};var bZ=J.startState=function(f4,f3,f2){return f4.startState?f4.startState(f3,f2):true};J.innerMode=function(f4,f2){while(f4.innerMode){var f3=f4.innerMode(f2);if(!f3||f3.mode==f4){break}f2=f3.state;f4=f3.mode}return f3||{mode:f4,state:f2}};var es=J.commands={selectAll:function(f2){f2.setSelection(X(f2.firstLine(),0),X(f2.lastLine()),Z)},singleSelection:function(f2){f2.setSelection(f2.getCursor("anchor"),f2.getCursor("head"),Z)},killLine:function(f2){eM(f2,function(f4){if(f4.empty()){var f3=e3(f2.doc,f4.head.line).text.length;if(f4.head.ch==f3&&f4.head.line<f2.lastLine()){return{from:f4.head,to:X(f4.head.line+1,0)}}else{return{from:f4.head,to:X(f4.head.line,f3)}}}else{return{from:f4.from(),to:f4.to()}}})},deleteLine:function(f2){eM(f2,function(f3){return{from:X(f3.from().line,0),to:fy(f2.doc,X(f3.to().line+1,0))}})},delLineLeft:function(f2){eM(f2,function(f3){return{from:X(f3.from().line,0),to:f3.from()}})},delWrappedLineLeft:function(f2){eM(f2,function(f3){var f5=f2.charCoords(f3.head,"div").top+5;var f4=f2.coordsChar({left:0,top:f5},"div");return{from:f4,to:f3.from()}})},delWrappedLineRight:function(f2){eM(f2,function(f3){var f5=f2.charCoords(f3.head,"div").top+5;var f4=f2.coordsChar({left:f2.display.lineDiv.offsetWidth+100,top:f5},"div");return{from:f3.from(),to:f4}})},undo:function(f2){f2.undo()},redo:function(f2){f2.redo()},undoSelection:function(f2){f2.undoSelection()},redoSelection:function(f2){f2.redoSelection()},goDocStart:function(f2){f2.extendSelection(X(f2.firstLine(),0))},goDocEnd:function(f2){f2.extendSelection(X(f2.lastLine()))},goLineStart:function(f2){f2.extendSelectionsBy(function(f3){return bs(f2,f3.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(f2){f2.extendSelectionsBy(function(f3){return dz(f2,f3.head)},{origin:"+move",bias:1})},goLineEnd:function(f2){f2.extendSelectionsBy(function(f3){return dE(f2,f3.head.line)},{origin:"+move",bias:-1})},goLineRight:function(f2){f2.extendSelectionsBy(function(f3){var f4=f2.charCoords(f3.head,"div").top+5;return f2.coordsChar({left:f2.display.lineDiv.offsetWidth+100,top:f4},"div")},cR)},goLineLeft:function(f2){f2.extendSelectionsBy(function(f3){var f4=f2.charCoords(f3.head,"div").top+5;return f2.coordsChar({left:0,top:f4},"div")},cR)},goLineLeftSmart:function(f2){f2.extendSelectionsBy(function(f3){var f4=f2.charCoords(f3.head,"div").top+5;var f5=f2.coordsChar({left:0,top:f4},"div");if(f5.ch<f2.getLine(f5.line).search(/\S/)){return dz(f2,f3.head)}return f5},cR)},goLineUp:function(f2){f2.moveV(-1,"line")},goLineDown:function(f2){f2.moveV(1,"line")},goPageUp:function(f2){f2.moveV(-1,"page")},goPageDown:function(f2){f2.moveV(1,"page")},goCharLeft:function(f2){f2.moveH(-1,"char")},goCharRight:function(f2){f2.moveH(1,"char")},goColumnLeft:function(f2){f2.moveH(-1,"column")},goColumnRight:function(f2){f2.moveH(1,"column")},goWordLeft:function(f2){f2.moveH(-1,"word")},goGroupRight:function(f2){f2.moveH(1,"group")},goGroupLeft:function(f2){f2.moveH(-1,"group")},goWordRight:function(f2){f2.moveH(1,"word")},delCharBefore:function(f2){f2.deleteH(-1,"char")},delCharAfter:function(f2){f2.deleteH(1,"char")},delWordBefore:function(f2){f2.deleteH(-1,"word")},delWordAfter:function(f2){f2.deleteH(1,"word")},delGroupBefore:function(f2){f2.deleteH(-1,"group")},delGroupAfter:function(f2){f2.deleteH(1,"group")},indentAuto:function(f2){f2.indentSelection("smart")},indentMore:function(f2){f2.indentSelection("add")},indentLess:function(f2){f2.indentSelection("subtract")},insertTab:function(f2){f2.replaceSelection("\t")},insertSoftTab:function(f2){var f4=[],f3=f2.listSelections(),f7=f2.options.tabSize;for(var f6=0;f6<f3.length;f6++){var f8=f3[f6].from();var f5=bS(f2.getLine(f8.line),f8.ch,f7);f4.push(new Array(f7-f5%f7+1).join(" "))}f2.replaceSelections(f4)},defaultTab:function(f2){if(f2.somethingSelected()){f2.indentSelection("add")}else{f2.execCommand("insertTab")}},transposeChars:function(f2){cJ(f2,function(){var f5=f2.listSelections(),f4=[];for(var f6=0;f6<f5.length;f6++){var f8=f5[f6].head,f3=e3(f2.doc,f8.line).text;if(f3){if(f8.ch==f3.length){f8=new X(f8.line,f8.ch-1)}if(f8.ch>0){f8=new X(f8.line,f8.ch+1);f2.replaceRange(f3.charAt(f8.ch-1)+f3.charAt(f8.ch-2),X(f8.line,f8.ch-2),f8,"+transpose")}else{if(f8.line>f2.doc.first){var f7=e3(f2.doc,f8.line-1).text;if(f7){f2.replaceRange(f3.charAt(0)+"\n"+f7.charAt(f7.length-1),X(f8.line-1,f7.length-1),X(f8.line,1),"+transpose")}}}}f4.push(new dN(f8,f8))}f2.setSelections(f4)})},newlineAndIndent:function(f2){cJ(f2,function(){var f3=f2.listSelections().length;for(var f5=0;f5<f3;f5++){var f4=f2.listSelections()[f5];f2.replaceRange("\n",f4.anchor,f4.head,"+input");f2.indentLine(f4.from().line+1,null,true);fv(f2)}})},toggleOverwrite:function(f2){f2.toggleOverwrite()}};var eY=J.keyMap={};eY.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};eY.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};eY.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection",fallthrough:["basic","emacsy"]};eY.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};eY["default"]=b6?eY.macDefault:eY.pcDefault;function fJ(f2){if(typeof f2=="string"){return eY[f2]}else{return f2}}var i=J.lookupKey=function(f3,f7,f5){function f6(gc){gc=fJ(gc);var gb=gc[f3];if(gb===false){return"stop"}if(gb!=null&&f5(gb)){return true}if(gc.nofallthrough){return"stop"}var ga=gc.fallthrough;if(ga==null){return false}if(Object.prototype.toString.call(ga)!="[object Array]"){return f6(ga)}for(var f9=0;f9<ga.length;++f9){var f8=f6(ga[f9]);if(f8){return f8}}return false}for(var f4=0;f4<f7.length;++f4){var f2=f6(f7[f4]);if(f2){return f2!="stop"}}};var er=J.isModifierKey=function(f3){var f2=e4[f3.keyCode];return f2=="Ctrl"||f2=="Alt"||f2=="Shift"||f2=="Mod"};var fg=J.keyName=function(f3,f4){if(dR&&f3.keyCode==34&&f3["char"]){return false}var f2=e4[f3.keyCode];if(f2==null||f3.altGraphKey){return false}if(f3.altKey){f2="Alt-"+f2}if(bP?f3.metaKey:f3.ctrlKey){f2="Ctrl-"+f2}if(bP?f3.ctrlKey:f3.metaKey){f2="Cmd-"+f2}if(!f4&&f3.shiftKey){f2="Shift-"+f2}return f2};J.fromTextArea=function(f9,ga){if(!ga){ga={}}ga.value=f9.value;if(!ga.tabindex&&f9.tabindex){ga.tabindex=f9.tabindex}if(!ga.placeholder&&f9.placeholder){ga.placeholder=f9.placeholder}if(ga.autofocus==null){var f2=dD();ga.autofocus=f2==f9||f9.getAttribute("autofocus")!=null&&f2==document.body}function f6(){f9.value=f8.getValue()}if(f9.form){bW(f9.form,"submit",f6);if(!ga.leaveSubmitMethodAlone){var f3=f9.form,f7=f3.submit;try{var f5=f3.submit=function(){f6();f3.submit=f7;f3.submit();f3.submit=f5}}catch(f4){}}}f9.style.display="none";var f8=J(function(gb){f9.parentNode.insertBefore(gb,f9.nextSibling)},ga);f8.save=f6;f8.getTextArea=function(){return f9};f8.toTextArea=function(){f6();f9.parentNode.removeChild(f8.getWrapperElement());f9.style.display="";if(f9.form){d1(f9.form,"submit",f6);if(typeof f9.form.submit=="function"){f9.form.submit=f7}}};return f8};var eI=J.StringStream=function(f2,f3){this.pos=this.start=0;this.string=f2;this.tabSize=f3||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0};eI.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(f2){var f4=this.string.charAt(this.pos);if(typeof f2=="string"){var f3=f4==f2}else{var f3=f4&&(f2.test?f2.test(f4):f2(f4))}if(f3){++this.pos;return f4}},eatWhile:function(f2){var f3=this.pos;while(this.eat(f2)){}return this.pos>f3},eatSpace:function(){var f2=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>f2},skipToEnd:function(){this.pos=this.string.length},skipTo:function(f2){var f3=this.string.indexOf(f2,this.pos);if(f3>-1){this.pos=f3;return true}},backUp:function(f2){this.pos-=f2},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=bS(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?bS(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return bS(this.string,null,this.tabSize)-(this.lineStart?bS(this.string,this.lineStart,this.tabSize):0)},match:function(f6,f3,f2){if(typeof f6=="string"){var f7=function(f8){return f2?f8.toLowerCase():f8};var f5=this.string.substr(this.pos,f6.length);if(f7(f5)==f7(f6)){if(f3!==false){this.pos+=f6.length}return true}}else{var f4=this.string.slice(this.pos).match(f6);if(f4&&f4.index>0){return null}if(f4&&f3!==false){this.pos+=f4[0].length}return f4}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(f3,f2){this.lineStart+=f3;try{return f2()}finally{this.lineStart-=f3}}};var Q=J.TextMarker=function(f3,f2){this.lines=[];this.type=f2;this.doc=f3};bx(Q);Q.prototype.clear=function(){if(this.explicitlyCleared){return}var f9=this.doc.cm,f3=f9&&!f9.curOp;if(f3){cF(f9)}if(e6(this,"clear")){var ga=this.find();if(ga){ad(this,"clear",ga.from,ga.to)}}var f4=null,f7=null;for(var f5=0;f5<this.lines.length;++f5){var gb=this.lines[f5];var f8=eX(gb.markedSpans,this);if(f9&&!this.collapsed){S(f9,bM(gb),"text")}else{if(f9){if(f8.to!=null){f7=bM(gb)}if(f8.from!=null){f4=bM(gb)}}}gb.markedSpans=ew(gb.markedSpans,f8);if(f8.from==null&&this.collapsed&&!fl(this.doc,gb)&&f9){fP(gb,aU(f9.display))}}if(f9&&this.collapsed&&!f9.options.lineWrapping){for(var f5=0;f5<this.lines.length;++f5){var f2=z(this.lines[f5]),f6=ea(f2);if(f6>f9.display.maxLineLength){f9.display.maxLine=f2;f9.display.maxLineLength=f6;f9.display.maxLineChanged=true}}}if(f4!=null&&f9&&this.collapsed){ag(f9,f4,f7+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(f9){em(f9.doc)}}if(f9){ad(f9,"markerCleared",f9,this)}if(f3){al(f9)}if(this.parent){this.parent.clear()}};Q.prototype.find=function(f5,f3){if(f5==null&&this.type=="bookmark"){f5=1}var f8,f7;for(var f4=0;f4<this.lines.length;++f4){var f2=this.lines[f4];var f6=eX(f2.markedSpans,this);if(f6.from!=null){f8=X(f3?f2:bM(f2),f6.from);if(f5==-1){return f8}}if(f6.to!=null){f7=X(f3?f2:bM(f2),f6.to);if(f5==1){return f7}}}return f8&&{from:f8,to:f7}};Q.prototype.changed=function(){var f4=this.find(-1,true),f3=this,f2=this.doc.cm;if(!f4||!f2){return}cJ(f2,function(){var f6=f4.line,f7=bM(f4.line);var f5=eZ(f2,f7);if(f5){au(f5);f2.curOp.selectionChanged=f2.curOp.forceUpdate=true}f2.curOp.updateMaxLine=true;if(!fl(f3.doc,f6)&&f3.height!=null){var f9=f3.height;f3.height=null;var f8=cT(f3)-f9;if(f8){fP(f6,f6.height+f8)}}})};Q.prototype.attachLine=function(f2){if(!this.lines.length&&this.doc.cm){var f3=this.doc.cm.curOp;if(!f3.maybeHiddenMarkers||dc(f3.maybeHiddenMarkers,this)==-1){(f3.maybeUnhiddenMarkers||(f3.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(f2)};Q.prototype.detachLine=function(f2){this.lines.splice(dc(this.lines,f2),1);if(!this.lines.length&&this.doc.cm){var f3=this.doc.cm.curOp;(f3.maybeHiddenMarkers||(f3.maybeHiddenMarkers=[])).push(this)}};var a2=0;function eu(ga,f8,f9,gc,f6){if(gc&&gc.shared){return P(ga,f8,f9,gc,f6)}if(ga.cm&&!ga.cm.curOp){return cX(ga.cm,eu)(ga,f8,f9,gc,f6)}var f5=new Q(ga,f6),gb=ce(f8,f9);if(gc){aL(gc,f5,false)}if(gb>0||gb==0&&f5.clearWhenEmpty!==false){return f5}if(f5.replacedWith){f5.collapsed=true;f5.widgetNode=fL("span",[f5.replacedWith],"CodeMirror-widget");if(!gc.handleMouseEvents){f5.widgetNode.ignoreEvents=true}if(gc.insertLeft){f5.widgetNode.insertLeft=true}}if(f5.collapsed){if(A(ga,f8.line,f8,f9,f5)||f8.line!=f9.line&&A(ga,f9.line,f8,f9,f5)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}a4=true}if(f5.addToHistory){fB(ga,{from:f8,to:f9,origin:"markText"},ga.sel,NaN)}var f3=f8.line,f7=ga.cm,f2;ga.iter(f3,f9.line+1,function(gd){if(f7&&f5.collapsed&&!f7.options.lineWrapping&&z(gd)==f7.display.maxLine){f2=true}if(f5.collapsed&&f3!=f8.line){fP(gd,0)}cc(gd,new d6(f5,f3==f8.line?f8.ch:null,f3==f9.line?f9.ch:null));++f3});if(f5.collapsed){ga.iter(f8.line,f9.line+1,function(gd){if(fl(ga,gd)){fP(gd,0)}})}if(f5.clearOnEnter){bW(f5,"beforeCursorEnter",function(){f5.clear()})}if(f5.readOnly){fW=true;if(ga.history.done.length||ga.history.undone.length){ga.clearHistory()}}if(f5.collapsed){f5.id=++a2;f5.atomic=true}if(f7){if(f2){f7.curOp.updateMaxLine=true}if(f5.collapsed){ag(f7,f8.line,f9.line+1)}else{if(f5.className||f5.title||f5.startStyle||f5.endStyle){for(var f4=f8.line;f4<=f9.line;f4++){S(f7,f4,"text")}}}if(f5.atomic){em(f7.doc)}ad(f7,"markerAdded",f7,f5)}return f5}var y=J.SharedTextMarker=function(f4,f3){this.markers=f4;this.primary=f3;for(var f2=0;f2<f4.length;++f2){f4[f2].parent=this}};bx(y);y.prototype.clear=function(){if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var f2=0;f2<this.markers.length;++f2){this.markers[f2].clear()}ad(this,"clear")};y.prototype.find=function(f3,f2){return this.primary.find(f3,f2)};function P(f6,f9,f8,f2,f4){f2=aL(f2);f2.shared=false;var f7=[eu(f6,f9,f8,f2,f4)],f3=f7[0];var f5=f2.widgetNode;dW(f6,function(gb){if(f5){f2.widgetNode=f5.cloneNode(true)}f7.push(eu(gb,fy(gb,f9),fy(gb,f8),f2,f4));for(var ga=0;ga<gb.linked.length;++ga){if(gb.linked[ga].isParent){return}}f3=fw(f7)});return new y(f7,f3)}function eE(f2){return f2.findMarks(X(f2.first,0),f2.clipPos(X(f2.lastLine())),function(f3){return f3.parent})}function dw(f7,f8){for(var f5=0;f5<f8.length;f5++){var f3=f8[f5],f9=f3.find();var f2=f7.clipPos(f9.from),f6=f7.clipPos(f9.to);if(ce(f2,f6)){var f4=eu(f7,f2,f6,f3.primary,f3.primary.type);f3.markers.push(f4);f4.parent=f3}}}function ec(f5){for(var f4=0;f4<f5.length;f4++){var f2=f5[f4],f7=[f2.primary.doc];dW(f2.primary.doc,function(f8){f7.push(f8)});for(var f3=0;f3<f2.markers.length;f3++){var f6=f2.markers[f3];if(dc(f7,f6.doc)==-1){f6.parent=null;f2.markers.splice(f3--,1)}}}}function d6(f2,f4,f3){this.marker=f2;this.from=f4;this.to=f3}function eX(f4,f2){if(f4){for(var f3=0;f3<f4.length;++f3){var f5=f4[f3];if(f5.marker==f2){return f5}}}}function ew(f3,f4){for(var f5,f2=0;f2<f3.length;++f2){if(f3[f2]!=f4){(f5||(f5=[])).push(f3[f2])}}return f5}function cc(f2,f3){f2.markedSpans=f2.markedSpans?f2.markedSpans.concat([f3]):[f3];f3.marker.attachLine(f2)}function aO(f3,f4,f8){if(f3){for(var f6=0,f9;f6<f3.length;++f6){var ga=f3[f6],f7=ga.marker;var f2=ga.from==null||(f7.inclusiveLeft?ga.from<=f4:ga.from<f4);if(f2||ga.from==f4&&f7.type=="bookmark"&&(!f8||!ga.marker.insertLeft)){var f5=ga.to==null||(f7.inclusiveRight?ga.to>=f4:ga.to>f4);(f9||(f9=[])).push(new d6(f7,ga.from,f5?null:ga.to))}}}return f9}function aB(f3,f5,f8){if(f3){for(var f6=0,f9;f6<f3.length;++f6){var ga=f3[f6],f7=ga.marker;var f4=ga.to==null||(f7.inclusiveRight?ga.to>=f5:ga.to>f5);if(f4||ga.from==f5&&f7.type=="bookmark"&&(!f8||ga.marker.insertLeft)){var f2=ga.from==null||(f7.inclusiveLeft?ga.from<=f5:ga.from<f5);(f9||(f9=[])).push(new d6(f7,f2?null:ga.from-f5,ga.to==null?null:ga.to-f5))}}}return f9}function d8(ge,gb){var ga=b8(ge,gb.from.line)&&e3(ge,gb.from.line).markedSpans;var gh=b8(ge,gb.to.line)&&e3(ge,gb.to.line).markedSpans;if(!ga&&!gh){return null}var f3=gb.from.ch,f6=gb.to.ch,f9=ce(gb.from,gb.to)==0;var f8=aO(ga,f3,f9);var gg=aB(gh,f6,f9);var gf=gb.text.length==1,f4=fw(gb.text).length+(gf?f3:0);if(f8){for(var f5=0;f5<f8.length;++f5){var gd=f8[f5];if(gd.to==null){var gi=eX(gg,gd.marker);if(!gi){gd.to=f3}else{if(gf){gd.to=gi.to==null?null:gi.to+f4}}}}}if(gg){for(var f5=0;f5<gg.length;++f5){var gd=gg[f5];if(gd.to!=null){gd.to+=f4}if(gd.from==null){var gi=eX(f8,gd.marker);if(!gi){gd.from=f4;if(gf){(f8||(f8=[])).push(gd)}}}else{gd.from+=f4;if(gf){(f8||(f8=[])).push(gd)}}}}if(f8){f8=r(f8)}if(gg&&gg!=f8){gg=r(gg)}var f7=[f8];if(!gf){var gc=gb.text.length-2,f2;if(gc>0&&f8){for(var f5=0;f5<f8.length;++f5){if(f8[f5].to==null){(f2||(f2=[])).push(new d6(f8[f5].marker,null,null))}}}for(var f5=0;f5<gc;++f5){f7.push(f2)}f7.push(gg)}return f7}function r(f3){for(var f2=0;f2<f3.length;++f2){var f4=f3[f2];if(f4.from!=null&&f4.from==f4.to&&f4.marker.clearWhenEmpty!==false){f3.splice(f2--,1)}}if(!f3.length){return null}return f3}function dY(ga,f8){var f2=b3(ga,f8);var gb=d8(ga,f8);if(!f2){return gb}if(!gb){return f2}for(var f5=0;f5<f2.length;++f5){var f6=f2[f5],f7=gb[f5];if(f6&&f7){spans:for(var f4=0;f4<f7.length;++f4){var f9=f7[f4];for(var f3=0;f3<f6.length;++f3){if(f6[f3].marker==f9.marker){continue spans}}f6.push(f9)}}else{if(f7){f2[f5]=f7}}}return f2}function cE(ge,gc,gd){var f6=null;ge.iter(gc.line,gd.line+1,function(gf){if(gf.markedSpans){for(var gg=0;gg<gf.markedSpans.length;++gg){var gh=gf.markedSpans[gg].marker;if(gh.readOnly&&(!f6||dc(f6,gh)==-1)){(f6||(f6=[])).push(gh)}}}});if(!f6){return null}var f7=[{from:gc,to:gd}];for(var f8=0;f8<f6.length;++f8){var f9=f6[f8],f4=f9.find(0);for(var f5=0;f5<f7.length;++f5){var f3=f7[f5];if(ce(f3.to,f4.from)<0||ce(f3.from,f4.to)>0){continue}var gb=[f5,1],f2=ce(f3.from,f4.from),ga=ce(f3.to,f4.to);if(f2<0||!f9.inclusiveLeft&&!f2){gb.push({from:f3.from,to:f4.from})}if(ga>0||!f9.inclusiveRight&&!ga){gb.push({from:f4.to,to:f3.to})}f7.splice.apply(f7,gb);f5+=gb.length-1}}return f7}function fS(f2){var f4=f2.markedSpans;if(!f4){return}for(var f3=0;f3<f4.length;++f3){f4[f3].marker.detachLine(f2)}f2.markedSpans=null}function cY(f2,f4){if(!f4){return}for(var f3=0;f3<f4.length;++f3){f4[f3].marker.attachLine(f2)}f2.markedSpans=f4}function w(f2){return f2.inclusiveLeft?-1:0}function bV(f2){return f2.inclusiveRight?1:0}function dF(f5,f3){var f7=f5.lines.length-f3.lines.length;if(f7!=0){return f7}var f4=f5.find(),f8=f3.find();var f2=ce(f4.from,f8.from)||w(f5)-w(f3);if(f2){return -f2}var f6=ce(f4.to,f8.to)||bV(f5)-bV(f3);if(f6){return f6}return f3.id-f5.id}function a3(f3,f7){var f2=a4&&f3.markedSpans,f6;if(f2){for(var f5,f4=0;f4<f2.length;++f4){f5=f2[f4];if(f5.marker.collapsed&&(f7?f5.from:f5.to)==null&&(!f6||dF(f6,f5.marker)<0)){f6=f5.marker}}}return f6}function eD(f2){return a3(f2,true)}function ej(f2){return a3(f2,false)}function A(ga,f4,f8,f9,f6){var gd=e3(ga,f4);var f2=a4&&gd.markedSpans;if(f2){for(var f5=0;f5<f2.length;++f5){var f3=f2[f5];if(!f3.marker.collapsed){continue}var gc=f3.marker.find(0);var gb=ce(gc.from,f8)||w(f3.marker)-w(f6);var f7=ce(gc.to,f9)||bV(f3.marker)-bV(f6);if(gb>=0&&f7<=0||gb<=0&&f7>=0){continue}if(gb<=0&&(ce(gc.to,f8)>0||(f3.marker.inclusiveRight&&f6.inclusiveLeft))||gb>=0&&(ce(gc.from,f9)<0||(f3.marker.inclusiveLeft&&f6.inclusiveRight))){return true}}}}function z(f3){var f2;while(f2=eD(f3)){f3=f2.find(-1,true).line}return f3}function h(f4){var f2,f3;while(f2=ej(f4)){f4=f2.find(1,true).line;(f3||(f3=[])).push(f4)}return f3}function aT(f5,f3){var f2=e3(f5,f3),f4=z(f2);if(f2==f4){return f3}return bM(f4)}function dS(f5,f4){if(f4>f5.lastLine()){return f4}var f3=e3(f5,f4),f2;if(!fl(f5,f3)){return f4}while(f2=ej(f3)){f3=f2.find(1,true).line}return bM(f3)+1}function fl(f6,f3){var f2=a4&&f3.markedSpans;if(f2){for(var f5,f4=0;f4<f2.length;++f4){f5=f2[f4];if(!f5.marker.collapsed){continue}if(f5.from==null){return true}if(f5.marker.widgetNode){continue}if(f5.from==0&&f5.marker.inclusiveLeft&&U(f6,f3,f5)){return true}}}}function U(f7,f3,f5){if(f5.to==null){var f2=f5.marker.find(1,true);return U(f7,f2.line,eX(f2.line.markedSpans,f5.marker))}if(f5.marker.inclusiveRight&&f5.to==f3.text.length){return true}for(var f6,f4=0;f4<f3.markedSpans.length;++f4){f6=f3.markedSpans[f4];if(f6.marker.collapsed&&!f6.marker.widgetNode&&f6.from==f5.to&&(f6.to==null||f6.to!=f5.from)&&(f6.marker.inclusiveLeft||f5.marker.inclusiveRight)&&U(f7,f3,f6)){return true}}}var dt=J.LineWidget=function(f2,f5,f3){if(f3){for(var f4 in f3){if(f3.hasOwnProperty(f4)){this[f4]=f3[f4]}}}this.cm=f2;this.node=f5};bx(dt);function dP(f2,f3,f4){if(bL(f3)<((f2.curOp&&f2.curOp.scrollTop)||f2.doc.scrollTop)){cI(f2,null,f4)}}dt.prototype.clear=function(){var f3=this.cm,f5=this.line.widgets,f4=this.line,f7=bM(f4);if(f7==null||!f5){return}for(var f6=0;f6<f5.length;++f6){if(f5[f6]==this){f5.splice(f6--,1)}}if(!f5.length){f4.widgets=null}var f2=cT(this);cJ(f3,function(){dP(f3,f4,-f2);S(f3,f7,"widget");fP(f4,Math.max(0,f4.height-f2))})};dt.prototype.changed=function(){var f3=this.height,f2=this.cm,f4=this.line;this.height=null;var f5=cT(this)-f3;if(!f5){return}cJ(f2,function(){f2.curOp.forceUpdate=true;dP(f2,f4,f5);fP(f4,f4.height+f5)})};function cT(f3){if(f3.height!=null){return f3.height}if(!fU(document.body,f3.node)){var f2="position: relative;";if(f3.coverGutter){f2+="margin-left: -"+f3.cm.getGutterElement().offsetWidth+"px;"}bQ(f3.cm.display.measure,fL("div",[f3.node],null,f2))}return f3.height=f3.node.offsetHeight}function bG(f2,f6,f4,f3){var f5=new dt(f2,f4,f3);if(f5.noHScroll){f2.display.alignWidgets=true}en(f2.doc,f6,"widget",function(f8){var f9=f8.widgets||(f8.widgets=[]);if(f5.insertAt==null){f9.push(f5)}else{f9.splice(Math.min(f9.length-1,Math.max(0,f5.insertAt)),0,f5)}f5.line=f8;if(!fl(f2.doc,f8)){var f7=bL(f8)<f2.doc.scrollTop;fP(f8,f8.height+cT(f5));if(f7){cI(f2,null,f5.height)}f2.curOp.forceUpdate=true}return true});return f5}var fR=J.Line=function(f4,f3,f2){this.text=f4;cY(this,f3);this.height=f2?f2(this):1};bx(fR);fR.prototype.lineNo=function(){return bM(this)};function eb(f3,f6,f4,f2){f3.text=f6;if(f3.stateAfter){f3.stateAfter=null}if(f3.styles){f3.styles=null}if(f3.order!=null){f3.order=null}fS(f3);cY(f3,f4);var f5=f2?f2(f3):1;if(f5!=f3.height){fP(f3,f5)}}function bA(f2){f2.parent=null;fS(f2)}function dd(f4,f3){if(f4){for(;;){var f2=f4.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!f2){break}f4=f4.slice(0,f2.index)+f4.slice(f2.index+f2[0].length);var f5=f2[1]?"bgClass":"textClass";if(f3[f5]==null){f3[f5]=f2[2]}else{if(!(new RegExp("(?:^|s)"+f2[2]+"(?:$|s)")).test(f3[f5])){f3[f5]+=" "+f2[2]}}}}return f4}function ff(f4,f3){if(f4.blankLine){return f4.blankLine(f3)}if(!f4.innerMode){return}var f2=J.innerMode(f4,f3);if(f2.mode.blankLine){return f2.mode.blankLine(f2.state)}}function eq(f6,f5,f4){for(var f2=0;f2<10;f2++){var f3=f6.token(f5,f4);if(f5.pos>f5.start){return f3}}throw new Error("Mode "+f6.name+" failed to advance stream.")}function x(gc,ge,f7,f3,f8,f5,f6){var f4=f7.flattenSpans;if(f4==null){f4=gc.options.flattenSpans}var ga=0,f9=null;var gd=new eI(ge,gc.options.tabSize),f2;if(ge==""){dd(ff(f7,f3),f5)}while(!gd.eol()){if(gd.pos>gc.options.maxHighlightLength){f4=false;if(f6){dn(gc,ge,f3,gd.pos)}gd.pos=ge.length;f2=null}else{f2=dd(eq(f7,gd,f3),f5)}if(gc.options.addModeClass){var gf=J.innerMode(f7,f3).mode.name;if(gf){f2="m-"+(f2?gf+" "+f2:gf)}}if(!f4||f9!=f2){if(ga<gd.start){f8(gd.start,f9)}ga=gd.start;f9=f2}gd.start=gd.pos}while(ga<gd.pos){var gb=Math.min(gd.pos,ga+50000);f8(gb,f9);ga=gb}}function fo(f9,gb,f2,f6){var ga=[f9.state.modeGen],f5={};x(f9,gb.text,f9.doc.mode,f2,function(gc,gd){ga.push(gc,gd)},f5,f6);for(var f3=0;f3<f9.state.overlays.length;++f3){var f7=f9.state.overlays[f3],f8=1,f4=0;x(f9,gb.text,f7.mode,true,function(gc,ge){var gg=f8;while(f4<gc){var gd=ga[f8];if(gd>gc){ga.splice(f8,1,gc,ga[f8+1],gd)}f8+=2;f4=Math.min(gc,gd)}if(!ge){return}if(f7.opaque){ga.splice(gg,f8-gg,gc,"cm-overlay "+ge);f8=gg+2}else{for(;gg<f8;gg+=2){var gf=ga[gg+1];ga[gg+1]=(gf?gf+" ":"")+"cm-overlay "+ge}}},f5)}return{styles:ga,classes:f5.bgClass||f5.textClass?f5:null}}function c1(f3,f4){if(!f4.styles||f4.styles[0]!=f3.state.modeGen){var f2=fo(f3,f4,f4.stateAfter=ds(f3,bM(f4)));f4.styles=f2.styles;if(f2.classes){f4.styleClasses=f2.classes}else{if(f4.styleClasses){f4.styleClasses=null}}}return f4.styles}function dn(f2,f7,f4,f3){var f6=f2.doc.mode;var f5=new eI(f7,f2.options.tabSize);f5.start=f5.pos=f3||0;if(f7==""){ff(f6,f4)}while(!f5.eol()&&f5.pos<=f2.options.maxHighlightLength){eq(f6,f5,f4);f5.start=f5.pos}}var dL={},b0={};function eL(f4,f3){if(!f4||/^\s*$/.test(f4)){return null}var f2=f3.addModeClass?b0:dL;return f2[f4]||(f2[f4]=f4.replace(/\S+/g,"cm-$&"))}function eG(f3,f7){var f8=fL("span",null,null,cV?"padding-right: .1px":null);var f5={pre:fL("pre",[f8]),content:f8,col:0,pos:0,cm:f3};f7.measure={};for(var f6=0;f6<=(f7.rest?f7.rest.length:0);f6++){var f4=f6?f7.rest[f6-1]:f7.line,f2;f5.pos=0;f5.addToken=u;if((dA||cV)&&f3.getOption("lineWrapping")){f5.addToken=fu(f5.addToken)}if(bN(f3.display.measure)&&(f2=a(f4))){f5.addToken=V(f5.addToken,f2)}f5.map=[];bn(f4,f5,c1(f3,f4));if(f4.styleClasses){if(f4.styleClasses.bgClass){f5.bgClass=fG(f4.styleClasses.bgClass,f5.bgClass||"")}if(f4.styleClasses.textClass){f5.textClass=fG(f4.styleClasses.textClass,f5.textClass||"")}}if(f5.map.length==0){f5.map.push(0,0,f5.content.appendChild(bm(f3.display.measure)))}if(f6==0){f7.measure.map=f5.map;f7.measure.cache={}}else{(f7.measure.maps||(f7.measure.maps=[])).push(f5.map);(f7.measure.caches||(f7.measure.caches=[])).push({})}}aD(f3,"renderLine",f3,f7.line,f5.pre);if(f5.pre.className){f5.textClass=fG(f5.pre.className,f5.textClass||"")}return f5}function e0(f3){var f2=fL("span","\u2022","cm-invalidchar");f2.title="\\u"+f3.charCodeAt(0).toString(16);return f2}function u(f7,gh,f2,f5,gi,gg){if(!gh){return}var gc=f7.cm.options.specialChars,gb=false;if(!gc.test(gh)){f7.col+=gh.length;var ga=document.createTextNode(gh);f7.map.push(f7.pos,f7.pos+gh.length,ga);if(dA&&l<9){gb=true}f7.pos+=gh.length}else{var ga=document.createDocumentFragment(),ge=0;while(true){gc.lastIndex=ge;var f3=gc.exec(gh);var f9=f3?f3.index-ge:gh.length-ge;if(f9){var f6=document.createTextNode(gh.slice(ge,ge+f9));if(dA&&l<9){ga.appendChild(fL("span",[f6]))}else{ga.appendChild(f6)}f7.map.push(f7.pos,f7.pos+f9,f6);f7.col+=f9;f7.pos+=f9}if(!f3){break}ge+=f9+1;if(f3[0]=="\t"){var f8=f7.cm.options.tabSize,gd=f8-f7.col%f8;var f6=ga.appendChild(fL("span",cp(gd),"cm-tab"));f7.col+=gd}else{var f6=f7.cm.options.specialCharPlaceholder(f3[0]);if(dA&&l<9){ga.appendChild(fL("span",[f6]))}else{ga.appendChild(f6)}f7.col+=1}f7.map.push(f7.pos,f7.pos+1,f6);f7.pos++}}if(f2||f5||gi||gb){var gf=f2||"";if(f5){gf+=f5}if(gi){gf+=gi}var f4=fL("span",[ga],gf);if(gg){f4.title=gg}return f7.content.appendChild(f4)}f7.content.appendChild(ga)}function fu(f2){function f3(f4){var f5=" ";for(var f6=0;f6<f4.length-2;++f6){f5+=f6%2?" ":"\u00a0"}f5+=" ";return f5}return function(f5,f9,f6,f4,f8,f7){f2(f5,f9.replace(/ {3,}/g,f3),f6,f4,f8,f7)}}function V(f3,f2){return function(ga,gc,f4,f8,gd,gb){f4=f4?f4+" cm-force-border":"cm-force-border";var f5=ga.pos,f7=f5+gc.length;for(;;){for(var f9=0;f9<f2.length;f9++){var f6=f2[f9];if(f6.to>f5&&f6.from<=f5){break}}if(f6.to>=f7){return f3(ga,gc,f4,f8,gd,gb)}f3(ga,gc.slice(0,f6.to-f5),f4,f8,null,gb);f8=null;gc=gc.slice(f6.to-f5);f5=f6.to}}}function ab(f3,f5,f2,f4){var f6=!f4&&f2.widgetNode;if(f6){f3.map.push(f3.pos,f3.pos+f5,f6);f3.content.appendChild(f6)}f3.pos+=f5}function bn(gb,gh,ga){var f7=gb.markedSpans,f9=gb.text,gf=0;if(!f7){for(var gk=1;gk<ga.length;gk+=2){gh.addToken(gh,f9.slice(gf,gf=ga[gk]),eL(ga[gk+1],gh.cm.options))}return}var gl=f9.length,f6=0,gk=1,gd="",gm;var go=0,f2,gn,ge,gp,f4;for(;;){if(go==f6){f2=gn=ge=gp="";f4=null;go=Infinity;var f8=[];for(var gi=0;gi<f7.length;++gi){var gj=f7[gi],gg=gj.marker;if(gj.from<=f6&&(gj.to==null||gj.to>f6)){if(gj.to!=null&&go>gj.to){go=gj.to;gn=""}if(gg.className){f2+=" "+gg.className}if(gg.startStyle&&gj.from==f6){ge+=" "+gg.startStyle}if(gg.endStyle&&gj.to==go){gn+=" "+gg.endStyle}if(gg.title&&!gp){gp=gg.title}if(gg.collapsed&&(!f4||dF(f4.marker,gg)<0)){f4=gj}}else{if(gj.from>f6&&go>gj.from){go=gj.from}}if(gg.type=="bookmark"&&gj.from==f6&&gg.widgetNode){f8.push(gg)}}if(f4&&(f4.from||0)==f6){ab(gh,(f4.to==null?gl+1:f4.to)-f6,f4.marker,f4.from==null);if(f4.to==null){return}}if(!f4&&f8.length){for(var gi=0;gi<f8.length;++gi){ab(gh,0,f8[gi])}}}if(f6>=gl){break}var gc=Math.min(gl,go);while(true){if(gd){var f3=f6+gd.length;if(!f4){var f5=f3>gc?gd.slice(0,gc-f6):gd;gh.addToken(gh,f5,gm?gm+f2:f2,ge,f6+f5.length==go?gn:"",gp)}if(f3>=gc){gd=gd.slice(gc-f6);f6=gc;break}f6=f3;ge=""}gd=f9.slice(gf,gf=ga[gk++]);gm=eL(ga[gk++],gh.cm.options)}}}function dH(f2,f3){return f3.from.ch==0&&f3.to.ch==0&&fw(f3.text)==""&&(!f2.cm||f2.cm.options.wholeLineUpdateBefore)}function fn(gf,ga,f2,f6){function gg(gi){return f2?f2[gi]:null}function f3(gi,gk,gj){eb(gi,gk,gj,f6);ad(gi,"change",gi,ga)}var gd=ga.from,ge=ga.to,gh=ga.text;var gb=e3(gf,gd.line),gc=e3(gf,ge.line);var f9=fw(gh),f5=gg(gh.length-1),f8=ge.line-gd.line;if(dH(gf,ga)){for(var f4=0,f7=[];f4<gh.length-1;++f4){f7.push(new fR(gh[f4],gg(f4),f6))}f3(gc,gc.text,f5);if(f8){gf.remove(gd.line,f8)}if(f7.length){gf.insert(gd.line,f7)}}else{if(gb==gc){if(gh.length==1){f3(gb,gb.text.slice(0,gd.ch)+f9+gb.text.slice(ge.ch),f5)}else{for(var f7=[],f4=1;f4<gh.length-1;++f4){f7.push(new fR(gh[f4],gg(f4),f6))}f7.push(new fR(f9+gb.text.slice(ge.ch),f5,f6));f3(gb,gb.text.slice(0,gd.ch)+gh[0],gg(0));gf.insert(gd.line+1,f7)}}else{if(gh.length==1){f3(gb,gb.text.slice(0,gd.ch)+gh[0]+gc.text.slice(ge.ch),gg(0));gf.remove(gd.line+1,f8)}else{f3(gb,gb.text.slice(0,gd.ch)+gh[0],gg(0));f3(gc,f9+gc.text.slice(ge.ch),f5);for(var f4=1,f7=[];f4<gh.length-1;++f4){f7.push(new fR(gh[f4],gg(f4),f6))}if(f8>1){gf.remove(gd.line+1,f8-1)}gf.insert(gd.line+1,f7)}}}ad(gf,"change",gf,ga)}function eO(f3){this.lines=f3;this.parent=null;for(var f4=0,f2=0;f4<f3.length;++f4){f3[f4].parent=this;f2+=f3[f4].height}this.height=f2}eO.prototype={chunkSize:function(){return this.lines.length},removeInner:function(f2,f6){for(var f4=f2,f5=f2+f6;f4<f5;++f4){var f3=this.lines[f4];this.height-=f3.height;bA(f3);ad(f3,"delete")}this.lines.splice(f2,f6)},collapse:function(f2){f2.push.apply(f2,this.lines)},insertInner:function(f3,f4,f2){this.height+=f2;this.lines=this.lines.slice(0,f3).concat(f4).concat(this.lines.slice(f3));for(var f5=0;f5<f4.length;++f5){f4[f5].parent=this}},iterN:function(f2,f5,f4){for(var f3=f2+f5;f2<f3;++f2){if(f4(this.lines[f2])){return true}}}};function fm(f5){this.children=f5;var f4=0,f2=0;for(var f3=0;f3<f5.length;++f3){var f6=f5[f3];f4+=f6.chunkSize();f2+=f6.height;f6.parent=this}this.size=f4;this.height=f2;this.parent=null}fm.prototype={chunkSize:function(){return this.size},removeInner:function(f2,f9){this.size-=f9;for(var f4=0;f4<this.children.length;++f4){var f8=this.children[f4],f6=f8.chunkSize();if(f2<f6){var f5=Math.min(f9,f6-f2),f7=f8.height;f8.removeInner(f2,f5);this.height-=f7-f8.height;if(f6==f5){this.children.splice(f4--,1);f8.parent=null}if((f9-=f5)==0){break}f2=0}else{f2-=f6}}if(this.size-f9<25&&(this.children.length>1||!(this.children[0] instanceof eO))){var f3=[];this.collapse(f3);this.children=[new eO(f3)];this.children[0].parent=this}},collapse:function(f2){for(var f3=0;f3<this.children.length;++f3){this.children[f3].collapse(f2)}},insertInner:function(f3,f4,f2){this.size+=f4.length;this.height+=f2;for(var f7=0;f7<this.children.length;++f7){var f9=this.children[f7],f8=f9.chunkSize();if(f3<=f8){f9.insertInner(f3,f4,f2);if(f9.lines&&f9.lines.length>50){while(f9.lines.length>50){var f6=f9.lines.splice(f9.lines.length-25,25);var f5=new eO(f6);f9.height-=f5.height;this.children.splice(f7+1,0,f5);f5.parent=this}this.maybeSpill()}break}f3-=f8}},maybeSpill:function(){if(this.children.length<=10){return}var f5=this;do{var f3=f5.children.splice(f5.children.length-5,5);var f4=new fm(f3);if(!f5.parent){var f6=new fm(f5.children);f6.parent=f5;f5.children=[f6,f4];f5=f6}else{f5.size-=f4.size;f5.height-=f4.height;var f2=dc(f5.parent.children,f5);f5.parent.children.splice(f2+1,0,f4)}f4.parent=f5.parent}while(f5.children.length>10);f5.parent.maybeSpill()},iterN:function(f2,f8,f7){for(var f3=0;f3<this.children.length;++f3){var f6=this.children[f3],f5=f6.chunkSize();if(f2<f5){var f4=Math.min(f8,f5-f2);if(f6.iterN(f2,f4,f7)){return true}if((f8-=f4)==0){break}f2=0}else{f2-=f5}}}};var cq=0;var at=J.Doc=function(f4,f3,f2){if(!(this instanceof at)){return new at(f4,f3,f2)}if(f2==null){f2=0}fm.call(this,[new eO([new fR("",null)])]);this.first=f2;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=f2;var f5=X(f2,0);this.sel=eH(f5);this.history=new fH(null);this.id=++cq;this.modeOption=f3;if(typeof f4=="string"){f4=aX(f4)}fn(this,{from:f5,to:f5,text:f4});bT(this,eH(f5),Z)};at.prototype=ck(fm.prototype,{constructor:at,iter:function(f4,f3,f2){if(f2){this.iterN(f4-this.first,f3-f4,f2)}else{this.iterN(this.first,this.first+this.size,f4)}},insert:function(f3,f4){var f2=0;for(var f5=0;f5<f4.length;++f5){f2+=f4[f5].height}this.insertInner(f3-this.first,f4,f2)},remove:function(f2,f3){this.removeInner(f2-this.first,f3)},getValue:function(f3){var f2=aZ(this,this.first,this.first+this.size);if(f3===false){return f2}return f2.join(f3||"\n")},setValue:cB(function(f3){var f4=X(this.first,0),f2=this.first+this.size-1;bc(this,{from:f4,to:X(f2,e3(this,f2).text.length),text:aX(f3),origin:"setValue"},true);bT(this,eH(f4))}),replaceRange:function(f3,f5,f4,f2){f5=fy(this,f5);f4=f4?fy(this,f4):f5;aY(this,f3,f5,f4,f2)},getRange:function(f5,f4,f3){var f2=fN(this,fy(this,f5),fy(this,f4));if(f3===false){return f2}return f2.join(f3||"\n")},getLine:function(f3){var f2=this.getLineHandle(f3);return f2&&f2.text},getLineHandle:function(f2){if(b8(this,f2)){return e3(this,f2)}},getLineNumber:function(f2){return bM(f2)},getLineHandleVisualStart:function(f2){if(typeof f2=="number"){f2=e3(this,f2)}return z(f2)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(f2){return fy(this,f2)},getCursor:function(f4){var f2=this.sel.primary(),f3;if(f4==null||f4=="head"){f3=f2.head}else{if(f4=="anchor"){f3=f2.anchor}else{if(f4=="end"||f4=="to"||f4===false){f3=f2.to()}else{f3=f2.from()}}}return f3},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:cB(function(f2,f4,f3){H(this,fy(this,typeof f2=="number"?X(f2,f4||0):f2),null,f3)}),setSelection:cB(function(f3,f4,f2){H(this,fy(this,f3),fy(this,f4||f3),f2)}),extendSelection:cB(function(f4,f2,f3){fI(this,fy(this,f4),f2&&fy(this,f2),f3)}),extendSelections:cB(function(f3,f2){ax(this,dO(this,f3,f2))}),extendSelectionsBy:cB(function(f3,f2){ax(this,bR(this.sel.ranges,f3),f2)}),setSelections:cB(function(f2,f6,f4){if(!f2.length){return}for(var f5=0,f3=[];f5<f2.length;f5++){f3[f5]=new dN(fy(this,f2[f5].anchor),fy(this,f2[f5].head))}if(f6==null){f6=Math.min(f2.length-1,this.sel.primIndex)}bT(this,cv(f3,f6),f4)}),addSelection:cB(function(f4,f5,f3){var f2=this.sel.ranges.slice(0);f2.push(new dN(fy(this,f4),fy(this,f5||f4)));bT(this,cv(f2,f2.length-1),f3)}),getSelection:function(f6){var f3=this.sel.ranges,f2;for(var f4=0;f4<f3.length;f4++){var f5=fN(this,f3[f4].from(),f3[f4].to());f2=f2?f2.concat(f5):f5}if(f6===false){return f2}else{return f2.join(f6||"\n")}},getSelections:function(f6){var f5=[],f2=this.sel.ranges;for(var f3=0;f3<f2.length;f3++){var f4=fN(this,f2[f3].from(),f2[f3].to());if(f6!==false){f4=f4.join(f6||"\n")}f5[f3]=f4}return f5},replaceSelection:function(f4,f6,f2){var f5=[];for(var f3=0;f3<this.sel.ranges.length;f3++){f5[f3]=f4}this.replaceSelections(f5,f6,f2||"+input")},replaceSelections:cB(function(f7,f9,f4){var f6=[],f8=this.sel;for(var f5=0;f5<f8.ranges.length;f5++){var f3=f8.ranges[f5];f6[f5]={from:f3.from(),to:f3.to(),text:aX(f7[f5]),origin:f4}}var f2=f9&&f9!="end"&&ae(this,f6,f9);for(var f5=f6.length-1;f5>=0;f5--){bc(this,f6[f5])}if(f2){eV(this,f2)}else{if(this.cm){fv(this.cm)}}}),undo:cB(function(){b7(this,"undo")}),redo:cB(function(){b7(this,"redo")}),undoSelection:cB(function(){b7(this,"undo",true)}),redoSelection:cB(function(){b7(this,"redo",true)}),setExtending:function(f2){this.extend=f2},getExtending:function(){return this.extend},historySize:function(){var f5=this.history,f2=0,f4=0;for(var f3=0;f3<f5.done.length;f3++){if(!f5.done[f3].ranges){++f2}}for(var f3=0;f3<f5.undone.length;f3++){if(!f5.undone[f3].ranges){++f4}}return{undo:f2,redo:f4}},clearHistory:function(){this.history=new fH(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(f2){if(f2){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(f2){return this.history.generation==(f2||this.cleanGeneration)},getHistory:function(){return{done:bO(this.history.done),undone:bO(this.history.undone)}},setHistory:function(f3){var f2=this.history=new fH(this.history.maxGeneration);f2.done=bO(f3.done.slice(0),null,true);f2.undone=bO(f3.undone.slice(0),null,true)},addLineClass:cB(function(f4,f3,f2){return en(this,f4,"class",function(f5){var f6=f3=="text"?"textClass":f3=="background"?"bgClass":"wrapClass";if(!f5[f6]){f5[f6]=f2}else{if(new RegExp("(?:^|\\s)"+f2+"(?:$|\\s)").test(f5[f6])){return false}else{f5[f6]+=" "+f2}}return true})}),removeLineClass:cB(function(f4,f3,f2){return en(this,f4,"class",function(f6){var f9=f3=="text"?"textClass":f3=="background"?"bgClass":"wrapClass";var f8=f6[f9];if(!f8){return false}else{if(f2==null){f6[f9]=null}else{var f7=f8.match(new RegExp("(?:^|\\s+)"+f2+"(?:$|\\s+)"));if(!f7){return false}var f5=f7.index+f7[0].length;f6[f9]=f8.slice(0,f7.index)+(!f7.index||f5==f8.length?"":" ")+f8.slice(f5)||null}}return true})}),markText:function(f4,f3,f2){return eu(this,fy(this,f4),fy(this,f3),f2,"range")},setBookmark:function(f4,f2){var f3={replacedWith:f2&&(f2.nodeType==null?f2.widget:f2),insertLeft:f2&&f2.insertLeft,clearWhenEmpty:false,shared:f2&&f2.shared};f4=fy(this,f4);return eu(this,f4,f4,f3,"bookmark")},findMarksAt:function(f6){f6=fy(this,f6);var f5=[],f3=e3(this,f6.line).markedSpans;if(f3){for(var f2=0;f2<f3.length;++f2){var f4=f3[f2];if((f4.from==null||f4.from<=f6.ch)&&(f4.to==null||f4.to>=f6.ch)){f5.push(f4.marker.parent||f4.marker)}}}return f5},findMarks:function(f6,f5,f2){f6=fy(this,f6);f5=fy(this,f5);var f3=[],f4=f6.line;this.iter(f6.line,f5.line+1,function(f7){var f9=f7.markedSpans;if(f9){for(var f8=0;f8<f9.length;f8++){var ga=f9[f8];if(!(f4==f6.line&&f6.ch>ga.to||ga.from==null&&f4!=f6.line||f4==f5.line&&ga.from>f5.ch)&&(!f2||f2(ga.marker))){f3.push(ga.marker.parent||ga.marker)}}}++f4});return f3},getAllMarks:function(){var f2=[];this.iter(function(f4){var f3=f4.markedSpans;if(f3){for(var f5=0;f5<f3.length;++f5){if(f3[f5].from!=null){f2.push(f3[f5].marker)}}}});return f2},posFromIndex:function(f3){var f2,f4=this.first;this.iter(function(f5){var f6=f5.text.length+1;if(f6>f3){f2=f3;return true}f3-=f6;++f4});return fy(this,X(f4,f2))},indexFromPos:function(f3){f3=fy(this,f3);var f2=f3.ch;if(f3.line<this.first||f3.ch<0){return 0}this.iter(this.first,f3.line,function(f4){f2+=f4.text.length+1});return f2},copy:function(f2){var f3=new at(aZ(this,this.first,this.first+this.size),this.modeOption,this.first);f3.scrollTop=this.scrollTop;f3.scrollLeft=this.scrollLeft;f3.sel=this.sel;f3.extend=false;if(f2){f3.history.undoDepth=this.history.undoDepth;f3.setHistory(this.getHistory())}return f3},linkedDoc:function(f2){if(!f2){f2={}}var f5=this.first,f4=this.first+this.size;if(f2.from!=null&&f2.from>f5){f5=f2.from}if(f2.to!=null&&f2.to<f4){f4=f2.to}var f3=new at(aZ(this,f5,f4),f2.mode||this.modeOption,f5);if(f2.sharedHist){f3.history=this.history}(this.linked||(this.linked=[])).push({doc:f3,sharedHist:f2.sharedHist});f3.linked=[{doc:this,isParent:true,sharedHist:f2.sharedHist}];dw(f3,eE(this));return f3},unlinkDoc:function(f3){if(f3 instanceof J){f3=f3.doc}if(this.linked){for(var f4=0;f4<this.linked.length;++f4){var f5=this.linked[f4];if(f5.doc!=f3){continue}this.linked.splice(f4,1);f3.unlinkDoc(this);ec(eE(this));break}}if(f3.history==this.history){var f2=[f3.id];dW(f3,function(f6){f2.push(f6.id)},true);f3.history=new fH(null);f3.history.done=bO(this.history.done,f2);f3.history.undone=bO(this.history.undone,f2)}},iterLinkedDocs:function(f2){dW(this,f2)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});at.prototype.eachLine=at.prototype.iter;var d="iter insert remove copy getEditor".split(" ");for(var bJ in at.prototype){if(at.prototype.hasOwnProperty(bJ)&&dc(d,bJ)<0){J.prototype[bJ]=(function(f2){return function(){return f2.apply(this.doc,arguments)}})(at.prototype[bJ])}}bx(at);function dW(f5,f4,f3){function f2(gb,f9,f7){if(gb.linked){for(var f8=0;f8<gb.linked.length;++f8){var f6=gb.linked[f8];if(f6.doc==f9){continue}var ga=f7&&f6.sharedHist;if(f3&&!ga){continue}f4(f6.doc,ga);f2(f6.doc,gb,ga)}}}f2(f5,null,true)}function dZ(f2,f3){if(f3.cm){throw new Error("This document is already in use.")}f2.doc=f3;f3.cm=f2;Y(f2);bq(f2);if(!f2.options.lineWrapping){g(f2)}f2.options.mode=f3.modeOption;ag(f2)}function e3(f5,f7){f7-=f5.first;if(f7<0||f7>=f5.size){throw new Error("There is no line "+(f7+f5.first)+" in the document.")}for(var f2=f5;!f2.lines;){for(var f3=0;;++f3){var f6=f2.children[f3],f4=f6.chunkSize();if(f7<f4){f2=f6;break}f7-=f4}}return f2.lines[f7]}function fN(f4,f6,f2){var f3=[],f5=f6.line;f4.iter(f6.line,f2.line+1,function(f7){var f8=f7.text;if(f5==f2.line){f8=f8.slice(0,f2.ch)}if(f5==f6.line){f8=f8.slice(f6.ch)}f3.push(f8);++f5});return f3}function aZ(f3,f5,f4){var f2=[];f3.iter(f5,f4,function(f6){f2.push(f6.text)});return f2}function fP(f3,f2){var f4=f2-f3.height;if(f4){for(var f5=f3;f5;f5=f5.parent){f5.height+=f4}}}function bM(f2){if(f2.parent==null){return null}var f6=f2.parent,f5=dc(f6.lines,f2);for(var f3=f6.parent;f3;f6=f3,f3=f3.parent){for(var f4=0;;++f4){if(f3.children[f4]==f6){break}f5+=f3.children[f4].chunkSize()}}return f5+f6.first}function bF(f4,f7){var f9=f4.first;outer:do{for(var f5=0;f5<f4.children.length;++f5){var f8=f4.children[f5],f6=f8.height;if(f7<f6){f4=f8;continue outer}f7-=f6;f9+=f8.chunkSize()}return f9}while(!f4.lines);for(var f5=0;f5<f4.lines.length;++f5){var f3=f4.lines[f5],f2=f3.height;if(f7<f2){break}f7-=f2}return f9+f5}function bL(f4){f4=z(f4);var f6=0,f3=f4.parent;for(var f5=0;f5<f3.lines.length;++f5){var f2=f3.lines[f5];if(f2==f4){break}else{f6+=f2.height}}for(var f7=f3.parent;f7;f3=f7,f7=f3.parent){for(var f5=0;f5<f7.children.length;++f5){var f8=f7.children[f5];if(f8==f3){break}else{f6+=f8.height}}}return f6}function a(f3){var f2=f3.order;if(f2==null){f2=f3.order=bd(f3.text)}return f2}function fH(f2){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=f2||1}function dl(f2,f4){var f3={from:ci(f4.from),to:cS(f4),text:fN(f2,f4.from,f4.to)};bX(f2,f3,f4.from.line,f4.to.line+1);dW(f2,function(f5){bX(f5,f3,f4.from.line,f4.to.line+1)},true);return f3}function fq(f3){while(f3.length){var f2=fw(f3);if(f2.ranges){f3.pop()}else{break}}}function eB(f3,f2){if(f2){fq(f3.done);return fw(f3.done)}else{if(f3.done.length&&!fw(f3.done).ranges){return fw(f3.done)}else{if(f3.done.length>1&&!f3.done[f3.done.length-2].ranges){f3.done.pop();return fw(f3.done)}}}}function fB(f8,f6,f2,f5){var f4=f8.history;f4.undone.length=0;var f3=+new Date,f9;if((f4.lastOp==f5||f4.lastOrigin==f6.origin&&f6.origin&&((f6.origin.charAt(0)=="+"&&f8.cm&&f4.lastModTime>f3-f8.cm.options.historyEventDelay)||f6.origin.charAt(0)=="*"))&&(f9=eB(f4,f4.lastOp==f5))){var ga=fw(f9.changes);if(ce(f6.from,f6.to)==0&&ce(f6.from,ga.to)==0){ga.to=cS(f6)}else{f9.changes.push(dl(f8,f6))}}else{var f7=fw(f4.done);if(!f7||!f7.ranges){cK(f8.sel,f4.done)}f9={changes:[dl(f8,f6)],generation:f4.generation};f4.done.push(f9);while(f4.done.length>f4.undoDepth){f4.done.shift();if(!f4.done[0].ranges){f4.done.shift()}}}f4.done.push(f2);f4.generation=++f4.maxGeneration;f4.lastModTime=f4.lastSelTime=f3;f4.lastOp=f4.lastSelOp=f5;f4.lastOrigin=f4.lastSelOrigin=f6.origin;if(!ga){aD(f8,"historyAdded")}}function bz(f6,f2,f4,f5){var f3=f2.charAt(0);return f3=="*"||f3=="+"&&f4.ranges.length==f5.ranges.length&&f4.somethingSelected()==f5.somethingSelected()&&new Date-f6.history.lastSelTime<=(f6.cm?f6.cm.options.historyEventDelay:500)}function fV(f7,f5,f2,f4){var f6=f7.history,f3=f4&&f4.origin;if(f2==f6.lastSelOp||(f3&&f6.lastSelOrigin==f3&&(f6.lastModTime==f6.lastSelTime&&f6.lastOrigin==f3||bz(f7,f3,fw(f6.done),f5)))){f6.done[f6.done.length-1]=f5}else{cK(f5,f6.done)}f6.lastSelTime=+new Date;f6.lastSelOrigin=f3;f6.lastSelOp=f2;if(f4&&f4.clearRedo!==false){fq(f6.undone)}}function cK(f3,f2){var f4=fw(f2);if(!(f4&&f4.ranges&&f4.equals(f3))){f2.push(f3)}}function bX(f3,f7,f6,f5){var f2=f7["spans_"+f3.id],f4=0;f3.iter(Math.max(f3.first,f6),Math.min(f3.first+f3.size,f5),function(f8){if(f8.markedSpans){(f2||(f2=f7["spans_"+f3.id]={}))[f4]=f8.markedSpans}++f4})}function bi(f4){if(!f4){return null}for(var f3=0,f2;f3<f4.length;++f3){if(f4[f3].marker.explicitlyCleared){if(!f2){f2=f4.slice(0,f3)}}else{if(f2){f2.push(f4[f3])}}}return !f2?f4:f2.length?f2:null}function b3(f5,f6){var f4=f6["spans_"+f5.id];if(!f4){return null}for(var f3=0,f2=[];f3<f6.text.length;++f3){f2.push(bi(f4[f3]))}return f2}function bO(gd,f5,gc){for(var f8=0,f3=[];f8<gd.length;++f8){var f4=gd[f8];if(f4.ranges){f3.push(gc?fM.prototype.deepCopy.call(f4):f4);continue}var ga=f4.changes,gb=[];f3.push({changes:gb});for(var f7=0;f7<ga.length;++f7){var f9=ga[f7],f6;gb.push({from:f9.from,to:f9.to,text:f9.text});if(f5){for(var f2 in f9){if(f6=f2.match(/^spans_(\d+)$/)){if(dc(f5,Number(f6[1]))>-1){fw(gb)[f2]=f9[f2];delete f9[f2]}}}}}}return f3}function K(f5,f4,f3,f2){if(f3<f5.line){f5.line+=f2}else{if(f4<f5.line){f5.line=f4;f5.ch=0}}}function e5(f5,f7,f8,f9){for(var f4=0;f4<f5.length;++f4){var f2=f5[f4],f6=true;if(f2.ranges){if(!f2.copied){f2=f5[f4]=f2.deepCopy();f2.copied=true}for(var f3=0;f3<f2.ranges.length;f3++){K(f2.ranges[f3].anchor,f7,f8,f9);K(f2.ranges[f3].head,f7,f8,f9)}continue}for(var f3=0;f3<f2.changes.length;++f3){var ga=f2.changes[f3];if(f8<ga.from.line){ga.from=X(ga.from.line+f9,ga.from.ch);ga.to=X(ga.to.line+f9,ga.to.ch)}else{if(f7<=ga.to.line){f6=false;break}}}if(!f6){f5.splice(0,f4+1);f4=0}}}function dv(f3,f6){var f5=f6.from.line,f4=f6.to.line,f2=f6.text.length-(f4-f5)-1;e5(f3.done,f5,f4,f2);e5(f3.undone,f5,f4,f2)}var cD=J.e_preventDefault=function(f2){if(f2.preventDefault){f2.preventDefault()}else{f2.returnValue=false}};var dh=J.e_stopPropagation=function(f2){if(f2.stopPropagation){f2.stopPropagation()}else{f2.cancelBubble=true}};function bK(f2){return f2.defaultPrevented!=null?f2.defaultPrevented:f2.returnValue==false}var ef=J.e_stop=function(f2){cD(f2);dh(f2)};function M(f2){return f2.target||f2.srcElement}function fC(f3){var f2=f3.which;if(f2==null){if(f3.button&1){f2=1}else{if(f3.button&2){f2=3}else{if(f3.button&4){f2=2}}}}if(b6&&f3.ctrlKey&&f2==1){f2=3}return f2}var bW=J.on=function(f5,f3,f4){if(f5.addEventListener){f5.addEventListener(f3,f4,false)}else{if(f5.attachEvent){f5.attachEvent("on"+f3,f4)}else{var f6=f5._handlers||(f5._handlers={});var f2=f6[f3]||(f6[f3]=[]);f2.push(f4)}}};var d1=J.off=function(f6,f4,f5){if(f6.removeEventListener){f6.removeEventListener(f4,f5,false)}else{if(f6.detachEvent){f6.detachEvent("on"+f4,f5)}else{var f2=f6._handlers&&f6._handlers[f4];if(!f2){return}for(var f3=0;f3<f2.length;++f3){if(f2[f3]==f5){f2.splice(f3,1);break}}}}};var aD=J.signal=function(f6,f5){var f2=f6._handlers&&f6._handlers[f5];if(!f2){return}var f3=Array.prototype.slice.call(arguments,2);for(var f4=0;f4<f2.length;++f4){f2[f4].apply(null,f3)}};var by=null;function ad(f8,f6){var f2=f8._handlers&&f8._handlers[f6];if(!f2){return}var f4=Array.prototype.slice.call(arguments,2),f7;if(bo){f7=bo.delayedCallbacks}else{if(by){f7=by}else{f7=by=[];setTimeout(aK,0)}}function f3(f9){return function(){f9.apply(null,f4)}}for(var f5=0;f5<f2.length;++f5){f7.push(f3(f2[f5]))}}function aK(){var f2=by;by=null;for(var f3=0;f3<f2.length;++f3){f2[f3]()}}function aP(f2,f4,f3){aD(f2,f3||f4.type,f2,f4);return bK(f4)||f4.codemirrorIgnore}function W(f3){var f2=f3._handlers&&f3._handlers.cursorActivity;if(!f2){return}var f5=f3.curOp.cursorActivityHandlers||(f3.curOp.cursorActivityHandlers=[]);for(var f4=0;f4<f2.length;++f4){if(dc(f5,f2[f4])==-1){f5.push(f2[f4])}}}function e6(f4,f3){var f2=f4._handlers&&f4._handlers[f3];return f2&&f2.length>0}function bx(f2){f2.prototype.on=function(f3,f4){bW(this,f3,f4)};f2.prototype.off=function(f3,f4){d1(this,f3,f4)}}var bh=30;var b9=J.Pass={toString:function(){return"CodeMirror.Pass"}};var Z={scroll:false},N={origin:"*mouse"},cR={origin:"+move"};function f1(){this.id=null}f1.prototype.set=function(f2,f3){clearTimeout(this.id);this.id=setTimeout(f3,f2)};var bS=J.countColumn=function(f5,f3,f7,f8,f4){if(f3==null){f3=f5.search(/[^\s\u00a0]/);if(f3==-1){f3=f5.length}}for(var f6=f8||0,f9=f4||0;;){var f2=f5.indexOf("\t",f6);if(f2<0||f2>=f3){return f9+(f3-f6)}f9+=f2-f6;f9+=f7-(f9%f7);f6=f2+1}};function ee(f6,f5,f7){for(var f8=0,f4=0;;){var f3=f6.indexOf("\t",f8);if(f3==-1){f3=f6.length}var f2=f3-f8;if(f3==f6.length||f4+f2>=f5){return f8+Math.min(f2,f5-f4)}f4+=f3-f8;f4+=f7-(f4%f7);f8=f3+1;if(f4>=f5){return f8}}}var aW=[""];function cp(f2){while(aW.length<=f2){aW.push(fw(aW)+" ")}return aW[f2]}function fw(f2){return f2[f2.length-1]}var dB=function(f2){f2.select()};if(eQ){dB=function(f2){f2.selectionStart=0;f2.selectionEnd=f2.value.length}}else{if(dA){dB=function(f3){try{f3.select()}catch(f2){}}}}function dc(f4,f2){for(var f3=0;f3<f4.length;++f3){if(f4[f3]==f2){return f3}}return -1}if([].indexOf){dc=function(f3,f2){return f3.indexOf(f2)}}function bR(f5,f4){var f2=[];for(var f3=0;f3<f5.length;f3++){f2[f3]=f4(f5[f3],f3)}return f2}if([].map){bR=function(f3,f2){return f3.map(f2)}}function ck(f5,f2){var f4;if(Object.create){f4=Object.create(f5)}else{var f3=function(){};f3.prototype=f5;f4=new f3()}if(f2){aL(f2,f4)}return f4}function aL(f4,f3,f2){if(!f3){f3={}}for(var f5 in f4){if(f4.hasOwnProperty(f5)&&(f2!==false||!f3.hasOwnProperty(f5))){f3[f5]=f4[f5]}}return f3}function cu(f3){var f2=Array.prototype.slice.call(arguments,1);return function(){return f3.apply(null,f2)}}var a9=/[\u00df\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;var fs=J.isWordChar=function(f2){return/\w/.test(f2)||f2>"\x80"&&(f2.toUpperCase()!=f2.toLowerCase()||a9.test(f2))};function cy(f2,f3){if(!f3){return fs(f2)}if(f3.source.indexOf("\\w")>-1&&fs(f2)){return true}return f3.test(f2)}function eJ(f2){for(var f3 in f2){if(f2.hasOwnProperty(f3)&&f2[f3]){return false}}return true}var ey=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function fe(f2){return f2.charCodeAt(0)>=768&&ey.test(f2)}function fL(f2,f6,f5,f4){var f7=document.createElement(f2);if(f5){f7.className=f5}if(f4){f7.style.cssText=f4}if(typeof f6=="string"){f7.appendChild(document.createTextNode(f6))}else{if(f6){for(var f3=0;f3<f6.length;++f3){f7.appendChild(f6[f3])}}}return f7}var cl;if(document.createRange){cl=function(f4,f5,f2){var f3=document.createRange();f3.setEnd(f4,f2);f3.setStart(f4,f5);return f3}}else{cl=function(f4,f5,f2){var f3=document.body.createTextRange();f3.moveToElementText(f4.parentNode);f3.collapse(true);f3.moveEnd("character",f2);f3.moveStart("character",f5);return f3}}function dQ(f3){for(var f2=f3.childNodes.length;f2>0;--f2){f3.removeChild(f3.firstChild)}return f3}function bQ(f2,f3){return dQ(f2).appendChild(f3)}function fU(f2,f3){if(f2.contains){return f2.contains(f3)}while(f3=f3.parentNode){if(f3==f2){return true}}}function dD(){return document.activeElement}if(dA&&l<11){dD=function(){try{return document.activeElement}catch(f2){return document.body}}}function T(f2){return new RegExp("\\b"+f2+"\\b\\s*")}function f(f3,f2){var f4=T(f2);if(f4.test(f3.className)){f3.className=f3.className.replace(f4,"")}}function fp(f3,f2){if(!T(f2).test(f3.className)){f3.className+=" "+f2}}function fG(f4,f2){var f3=f4.split(" ");for(var f5=0;f5<f3.length;f5++){if(f3[f5]&&!T(f3[f5]).test(f2)){f2+=" "+f3[f5]}}return f2}function aA(f5){if(!document.body.getElementsByClassName){return}var f4=document.body.getElementsByClassName("CodeMirror");for(var f3=0;f3<f4.length;f3++){var f2=f4[f3].CodeMirror;if(f2){f5(f2)}}}var cA=false;function bf(){if(cA){return}ft();cA=true}function ft(){var f2;bW(window,"resize",function(){if(f2==null){f2=setTimeout(function(){f2=null;ek=null;aA(aR)},100)}});bW(window,"blur",function(){aA(aS)})}var eA=function(){if(dA&&l<9){return false}var f2=fL("div");return"draggable" in f2||"dragDrop" in f2}();var ek;function k(f2){if(ek!=null){return ek}var f3=fL("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");bQ(f2,f3);if(f3.offsetWidth){ek=f3.offsetHeight-f3.clientHeight}return ek||0}var fA;function bm(f2){if(fA==null){var f3=fL("span","\u200b");bQ(f2,fL("span",[f3,document.createTextNode("x")]));if(f2.firstChild.offsetHeight!=0){fA=f3.offsetWidth<=1&&f3.offsetHeight>2&&!(dA&&l<8)}}if(fA){return fL("span","\u200b")}else{return fL("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px")}}var fz;function bN(f5){if(fz!=null){return fz}var f2=bQ(f5,document.createTextNode("A\u062eA"));var f4=cl(f2,0,1).getBoundingClientRect();if(f4.left==f4.right){return false}var f3=cl(f2,1,2).getBoundingClientRect();return fz=(f3.right-f4.right<3)}var aX=J.splitLines="\n\nb".split(/\n/).length!=3?function(f7){var f8=0,f2=[],f6=f7.length;while(f8<=f6){var f5=f7.indexOf("\n",f8);if(f5==-1){f5=f7.length}var f4=f7.slice(f8,f7.charAt(f5-1)=="\r"?f5-1:f5);var f3=f4.indexOf("\r");if(f3!=-1){f2.push(f4.slice(0,f3));f8+=f3+1}else{f2.push(f4);f8=f5+1}}return f2}:function(f2){return f2.split(/\r\n?|\n/)};var br=window.getSelection?function(f3){try{return f3.selectionStart!=f3.selectionEnd}catch(f2){return false}}:function(f4){try{var f2=f4.ownerDocument.selection.createRange()}catch(f3){}if(!f2||f2.parentElement()!=f4){return false}return f2.compareEndPoints("StartToEnd",f2)!=0};var c5=(function(){var f2=fL("div");if("oncopy" in f2){return true}f2.setAttribute("oncopy","return;");return typeof f2.oncopy=="function"})();var eU=null;function aJ(f3){if(eU!=null){return eU}var f4=bQ(f3,fL("span","x"));var f5=f4.getBoundingClientRect();var f2=cl(f4,0,1).getBoundingClientRect();return eU=Math.abs(f5.left-f2.left)>1}var e4={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};J.keyNames=e4;(function(){for(var f2=0;f2<10;f2++){e4[f2+48]=e4[f2+96]=String(f2)}for(var f2=65;f2<=90;f2++){e4[f2]=String.fromCharCode(f2)}for(var f2=1;f2<=12;f2++){e4[f2+111]=e4[f2+63235]="F"+f2}})();function dT(f2,f8,f7,f6){if(!f2){return f6(f8,f7,"ltr")}var f5=false;for(var f4=0;f4<f2.length;++f4){var f3=f2[f4];if(f3.from<f7&&f3.to>f8||f8==f7&&f3.to==f8){f6(Math.max(f3.from,f8),Math.min(f3.to,f7),f3.level==1?"rtl":"ltr");f5=true}}if(!f5){f6(f8,f7,"ltr")}}function dp(f2){return f2.level%2?f2.to:f2.from}function fX(f2){return f2.level%2?f2.from:f2.to}function cC(f3){var f2=a(f3);return f2?dp(f2[0]):0}function cP(f3){var f2=a(f3);if(!f2){return f3.text.length}return fX(fw(f2))}function bs(f3,f6){var f4=e3(f3.doc,f6);var f7=z(f4);if(f7!=f4){f6=bM(f7)}var f2=a(f7);var f5=!f2?0:f2[0].level%2?cP(f7):cC(f7);return X(f6,f5)}function dE(f4,f7){var f3,f5=e3(f4.doc,f7);while(f3=ej(f5)){f5=f3.find(1,true).line;f7=null}var f2=a(f5);var f6=!f2?f5.text.length:f2[0].level%2?cC(f5):cP(f5);return X(f7==null?bM(f5):f7,f6)}function dz(f3,f8){var f7=bs(f3,f8.line);var f4=e3(f3.doc,f7.line);var f2=a(f4);if(!f2||f2[0].level==0){var f6=Math.max(0,f4.text.search(/\S/));var f5=f8.line==f7.line&&f8.ch<=f6&&f8.ch;return X(f7.line,f5?0:f6)}return f7}function am(f3,f4,f2){var f5=f3[0].level;if(f4==f5){return true}if(f2==f5){return false}return f4<f2}var eR;function aF(f2,f6){eR=null;for(var f3=0,f4;f3<f2.length;++f3){var f5=f2[f3];if(f5.from<f6&&f5.to>f6){return f3}if((f5.from==f6||f5.to==f6)){if(f4==null){f4=f3}else{if(am(f2,f5.level,f2[f4].level)){if(f5.from!=f5.to){eR=f4}return f3}else{if(f5.from!=f5.to){eR=f3}return f4}}}}return f4}function e2(f2,f5,f3,f4){if(!f4){return f5+f3}do{f5+=f3}while(f5>0&&fe(f2.text.charAt(f5)));return f5}function v(f2,f9,f4,f5){var f6=a(f2);if(!f6){return ah(f2,f9,f4,f5)}var f8=aF(f6,f9),f3=f6[f8];var f7=e2(f2,f9,f3.level%2?-f4:f4,f5);for(;;){if(f7>f3.from&&f7<f3.to){return f7}if(f7==f3.from||f7==f3.to){if(aF(f6,f7)==f8){return f7}f3=f6[f8+=f4];return(f4>0)==f3.level%2?f3.to:f3.from}else{f3=f6[f8+=f4];if(!f3){return null}if((f4>0)==f3.level%2){f7=e2(f2,f3.to,-1,f5)}else{f7=e2(f2,f3.from,1,f5)}}}}function ah(f2,f6,f3,f4){var f5=f6+f3;if(f4){while(f5>0&&fe(f2.text.charAt(f5))){f5+=f3}}return f5<0||f5>f2.text.length?null:f5}var bd=(function(){var f8="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var f6="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";function f5(gc){if(gc<=247){return f8.charAt(gc)}else{if(1424<=gc&&gc<=1524){return"R"}else{if(1536<=gc&&gc<=1773){return f6.charAt(gc-1536)}else{if(1774<=gc&&gc<=2220){return"r"}else{if(8192<=gc&&gc<=8203){return"w"}else{if(gc==8204){return"b"}else{return"L"}}}}}}}var f2=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var gb=/[stwN]/,f4=/[LRr]/,f3=/[Lb1n]/,f7=/[1n]/;var ga="L";function f9(ge,gd,gc){this.level=ge;this.from=gd;this.to=gc}return function(gm){if(!f2.test(gm)){return false}var gs=gm.length,gi=[];for(var gr=0,ge;gr<gs;++gr){gi.push(ge=f5(gm.charCodeAt(gr)))}for(var gr=0,gl=ga;gr<gs;++gr){var ge=gi[gr];if(ge=="m"){gi[gr]=gl}else{gl=ge}}for(var gr=0,gc=ga;gr<gs;++gr){var ge=gi[gr];if(ge=="1"&&gc=="r"){gi[gr]="n"}else{if(f4.test(ge)){gc=ge;if(ge=="r"){gi[gr]="R"}}}}for(var gr=1,gl=gi[0];gr<gs-1;++gr){var ge=gi[gr];if(ge=="+"&&gl=="1"&&gi[gr+1]=="1"){gi[gr]="1"}else{if(ge==","&&gl==gi[gr+1]&&(gl=="1"||gl=="n")){gi[gr]=gl}}gl=ge}for(var gr=0;gr<gs;++gr){var ge=gi[gr];if(ge==","){gi[gr]="N"}else{if(ge=="%"){for(var gf=gr+1;gf<gs&&gi[gf]=="%";++gf){}var gt=(gr&&gi[gr-1]=="!")||(gf<gs&&gi[gf]=="1")?"1":"N";for(var gp=gr;gp<gf;++gp){gi[gp]=gt}gr=gf-1}}}for(var gr=0,gc=ga;gr<gs;++gr){var ge=gi[gr];if(gc=="L"&&ge=="1"){gi[gr]="L"}else{if(f4.test(ge)){gc=ge}}}for(var gr=0;gr<gs;++gr){if(gb.test(gi[gr])){for(var gf=gr+1;gf<gs&&gb.test(gi[gf]);++gf){}var gj=(gr?gi[gr-1]:ga)=="L";var gd=(gf<gs?gi[gf]:ga)=="L";var gt=gj||gd?"L":"R";for(var gp=gr;gp<gf;++gp){gi[gp]=gt}gr=gf-1}}var gq=[],gn;for(var gr=0;gr<gs;){if(f3.test(gi[gr])){var gg=gr;for(++gr;gr<gs&&f3.test(gi[gr]);++gr){}gq.push(new f9(0,gg,gr))}else{var gh=gr,gk=gq.length;for(++gr;gr<gs&&gi[gr]!="L";++gr){}for(var gp=gh;gp<gr;){if(f7.test(gi[gp])){if(gh<gp){gq.splice(gk,0,new f9(1,gh,gp))}var go=gp;for(++gp;gp<gr&&f7.test(gi[gp]);++gp){}gq.splice(gk,0,new f9(2,go,gp));gh=gp}else{++gp}}if(gh<gr){gq.splice(gk,0,new f9(1,gh,gr))}}}if(gq[0].level==1&&(gn=gm.match(/^\s+/))){gq[0].from=gn[0].length;gq.unshift(new f9(0,0,gn[0].length))}if(fw(gq).level==1&&(gn=gm.match(/\s+$/))){fw(gq).to-=gn[0].length;gq.push(new f9(0,gs-gn[0].length,gs))}if(gq[0].level!=fw(gq).level){gq.push(new f9(gq[0].level,gs,gs))}return gq}})();J.version="4.5.0";return J});